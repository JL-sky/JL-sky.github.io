<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Êú¨Êñá‰ªãÁªç‰∫ÜÁ®ãÂ∫èÂä†ËΩΩÂà∞ÂÜÖÂ≠òÊòØÂ¶Ç‰ΩïÂºÄÂßãÂ∑•‰ΩúÁöÑ‰ª•ÂèäÂ¶Ç‰ΩïÂä†ËΩΩÂÜÖÊ†∏">
<title>„ÄäÊìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü„ÄãÁ¨¨‰∫îÁ´†Ôºà‰∫åÔºâ‚Äî‚Äî Âä†ËΩΩÂÜÖÊ†∏</title>

<link rel='canonical' href='http://localhost:1313/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F%E7%AC%AC%E4%BA%94%E7%AB%A0%E4%BA%8C-%E5%8A%A0%E8%BD%BD%E5%86%85%E6%A0%B8/'>

<link rel="stylesheet" href="/scss/style.min.c2172b128ab8744b3f98599d792c6144c766b07c79ba00c88ff5c11861a33247.css"><meta property='og:title' content="„ÄäÊìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü„ÄãÁ¨¨‰∫îÁ´†Ôºà‰∫åÔºâ‚Äî‚Äî Âä†ËΩΩÂÜÖÊ†∏">
<meta property='og:description' content="Êú¨Êñá‰ªãÁªç‰∫ÜÁ®ãÂ∫èÂä†ËΩΩÂà∞ÂÜÖÂ≠òÊòØÂ¶Ç‰ΩïÂºÄÂßãÂ∑•‰ΩúÁöÑ‰ª•ÂèäÂ¶Ç‰ΩïÂä†ËΩΩÂÜÖÊ†∏">
<meta property='og:url' content='http://localhost:1313/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F%E7%AC%AC%E4%BA%94%E7%AB%A0%E4%BA%8C-%E5%8A%A0%E8%BD%BD%E5%86%85%E6%A0%B8/'>
<meta property='og:site_name' content='‰Ω†Â•Ω'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2024-12-13T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2024-12-20T11:39:40&#43;08:00'/><meta property='og:image' content='https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241214_1734176213.jpg' />
<meta name="twitter:title" content="„ÄäÊìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü„ÄãÁ¨¨‰∫îÁ´†Ôºà‰∫åÔºâ‚Äî‚Äî Âä†ËΩΩÂÜÖÊ†∏">
<meta name="twitter:description" content="Êú¨Êñá‰ªãÁªç‰∫ÜÁ®ãÂ∫èÂä†ËΩΩÂà∞ÂÜÖÂ≠òÊòØÂ¶Ç‰ΩïÂºÄÂßãÂ∑•‰ΩúÁöÑ‰ª•ÂèäÂ¶Ç‰ΩïÂä†ËΩΩÂÜÖÊ†∏"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241214_1734176213.jpg' />
  


</head>

<body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
        
        <figure class="site-avatar">
            
            <a href="https://jl-sky.github.io/">
                
                

                
                
                <img src="/img/avatar_hu16686392332003896281.png" width="300"
                    height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                
            </a>
            
            <span class="emoji">ü§î</span>
            
        </figure>
        
        

        <div class="site-meta">
            <h1 class="site-name"><a href="/">‰Ω†Â•Ω</a></h1>
            <h2 class="site-description">ÂéüÊù•ÊòØ‰Ω†Âïä</h2>
        </div>
    </header><ol class="menu-social">
        
        <li>
            <a href='https://github.com/JL-sky' target="_blank"  title="GitHub"  rel="me">
                
                
                <?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="438.536px" height="438.536px" viewBox="0 0 438.536 438.536" style="enable-background:new 0 0 438.536 438.536;"
	 xml:space="preserve">
<g>
	<g>
		<path d="M158.173,352.599c-3.049,0.568-4.381,1.999-3.999,4.281c0.38,2.283,2.093,3.046,5.138,2.283
			c3.049-0.76,4.38-2.095,3.997-3.997C162.931,353.074,161.218,352.216,158.173,352.599z"/>
		<path d="M141.898,354.885c-3.046,0-4.568,1.041-4.568,3.139c0,2.474,1.619,3.518,4.853,3.138c3.046,0,4.57-1.047,4.57-3.138
			C146.753,355.553,145.134,354.502,141.898,354.885z"/>
		<path d="M119.629,354.022c-0.76,2.095,0.478,3.519,3.711,4.284c2.855,1.137,4.664,0.568,5.424-1.714
			c0.572-2.091-0.666-3.61-3.711-4.568C122.197,351.265,120.39,351.922,119.629,354.022z"/>
		<path d="M414.41,24.123C398.326,8.042,378.964,0,356.309,0H82.225C59.577,0,40.208,8.042,24.123,24.123
			C8.042,40.207,0,59.576,0,82.225v274.088c0,22.65,8.042,42.017,24.123,58.098c16.084,16.084,35.454,24.126,58.102,24.126h63.953
			c4.184,0,7.327-0.144,9.42-0.424c2.092-0.288,4.184-1.526,6.279-3.717c2.096-2.187,3.14-5.376,3.14-9.562
			c0-0.568-0.05-7.046-0.144-19.417c-0.097-12.375-0.144-22.176-0.144-29.41l-6.567,1.143c-4.187,0.76-9.469,1.095-15.846,0.999
			c-6.374-0.096-12.99-0.76-19.841-1.998c-6.855-1.239-13.229-4.093-19.13-8.562c-5.898-4.477-10.085-10.328-12.56-17.559
			l-2.856-6.571c-1.903-4.373-4.899-9.229-8.992-14.554c-4.093-5.332-8.232-8.949-12.419-10.852l-1.999-1.428
			c-1.331-0.951-2.568-2.098-3.711-3.429c-1.141-1.335-1.997-2.669-2.568-3.997c-0.571-1.335-0.097-2.43,1.427-3.289
			c1.524-0.855,4.281-1.279,8.28-1.279l5.708,0.855c3.808,0.76,8.516,3.042,14.134,6.851c5.614,3.806,10.229,8.754,13.846,14.843
			c4.38,7.806,9.657,13.75,15.846,17.843c6.184,4.097,12.419,6.143,18.699,6.143s11.704-0.476,16.274-1.424
			c4.565-0.954,8.848-2.385,12.847-4.288c1.713-12.751,6.377-22.559,13.988-29.41c-10.848-1.143-20.602-2.854-29.265-5.14
			c-8.658-2.286-17.605-5.995-26.835-11.136c-9.234-5.14-16.894-11.512-22.985-19.13c-6.09-7.618-11.088-17.61-14.987-29.978
			c-3.901-12.375-5.852-26.652-5.852-42.829c0-23.029,7.521-42.637,22.557-58.814c-7.044-17.32-6.379-36.732,1.997-58.242
			c5.52-1.714,13.706-0.428,24.554,3.855c10.85,4.286,18.794,7.951,23.84,10.992c5.046,3.042,9.089,5.614,12.135,7.71
			c17.705-4.949,35.976-7.423,54.818-7.423c18.841,0,37.115,2.474,54.821,7.423l10.849-6.852c7.426-4.57,16.18-8.757,26.269-12.562
			c10.088-3.806,17.795-4.854,23.127-3.14c8.562,21.51,9.328,40.922,2.279,58.241c15.036,16.179,22.559,35.786,22.559,58.815
			c0,16.18-1.951,30.505-5.852,42.969c-3.898,12.467-8.939,22.463-15.13,29.981c-6.184,7.519-13.894,13.843-23.124,18.986
			c-9.232,5.137-18.178,8.853-26.84,11.132c-8.661,2.286-18.414,4.004-29.263,5.147c9.891,8.562,14.839,22.072,14.839,40.538v68.238
			c0,3.237,0.472,5.852,1.424,7.851c0.958,1.998,2.478,3.374,4.571,4.141c2.102,0.76,3.949,1.235,5.571,1.424
			c1.622,0.191,3.949,0.287,6.995,0.287h63.953c22.648,0,42.018-8.042,58.095-24.126c16.084-16.084,24.126-35.454,24.126-58.102
			V82.225C438.533,59.576,430.491,40.204,414.41,24.123z"/>
		<path d="M86.793,319.195c-1.331,0.948-1.141,2.471,0.572,4.565c1.906,1.902,3.427,2.189,4.57,0.855
			c1.331-0.948,1.141-2.471-0.575-4.569C89.458,318.336,87.936,318.049,86.793,319.195z"/>
		<path d="M77.374,312.057c-0.57,1.335,0.096,2.478,1.999,3.426c1.521,0.955,2.762,0.767,3.711-0.568
			c0.57-1.335-0.096-2.478-1.999-3.433C79.182,310.91,77.945,311.102,77.374,312.057z"/>
		<path d="M95.646,330.331c-1.715,0.948-1.715,2.666,0,5.137c1.713,2.478,3.328,3.142,4.853,1.998c1.714-1.334,1.714-3.142,0-5.427
			C98.978,329.571,97.359,328.993,95.646,330.331z"/>
		<path d="M105.641,343.174c-1.714,1.526-1.336,3.327,1.142,5.428c2.281,2.279,4.185,2.566,5.708,0.849
			c1.524-1.519,1.143-3.326-1.142-5.42C109.068,341.751,107.164,341.463,105.641,343.174z"/>
	</g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

                
            </a>
        </li>
        
    </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E6%88%91%E7%9A%84/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÊàëÁöÑ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                
                <li id="i18n-switch">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" title="language"
                        onchange="window.location.href = this.selectedOptions[0].value">
                        
                        <option value="http://localhost:1313/en/" >English</option>
                        
                        <option value="http://localhost:1313/" selected>ÁÆÄ‰Ωì‰∏≠Êñá</option>
                        
                        <option value="http://localhost:1313/ar/" >ÿπÿ±ÿ®Ÿä</option>
                        
                    </select>
                </li>
                
                

                
                <li id="dark-mode-toggle">
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-sun-high"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" /><path d="M6.343 17.657l-1.414 1.414" /><path d="M6.343 6.343l-1.414 -1.414" /><path d="M17.657 6.343l1.414 -1.414" /><path d="M17.657 17.657l1.414 1.414" /><path d="M4 12h-2" /><path d="M12 4v-2" /><path d="M20 12h2" /><path d="M12 20v2" /></svg>
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-moon-stars"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /><path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2" /><path d="M19 11h2m-1 -1v2" /></svg>
                    <span>ÊöóËâ≤Ê®°Âºè</span>
                </li>
                
            </ol>
        </li>
    </ol>
</aside>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#Á´†ËäÇ‰ªªÂä°‰ªãÁªç">Á´†ËäÇ‰ªªÂä°‰ªãÁªç</a>
      <ol>
        <li><a href="#‰ªªÂä°ÁÆÄ‰ªã">‰ªªÂä°ÁÆÄ‰ªã</a></li>
        <li><a href="#ÂÜÖÂ≠òÂ∏ÉÂ±Ä">ÂÜÖÂ≠òÂ∏ÉÂ±Ä</a></li>
      </ol>
    </li>
    <li><a href="#ÂâçÁΩÆÁü•ËØÜ">ÂâçÁΩÆÁü•ËØÜ</a>
      <ol>
        <li><a href="#ÁõÆÊ†áÊñá‰ª∂ÁöÑÂàÜÁ±ª">ÁõÆÊ†áÊñá‰ª∂ÁöÑÂàÜÁ±ª</a></li>
        <li><a href="#elf‰∏éÂèØÊâßË°åÊñá‰ª∂ÁöÑÁªÑÊàê">ELF‰∏éÂèØÊâßË°åÊñá‰ª∂ÁöÑÁªÑÊàê</a></li>
        <li><a href="#elf-headerËØ¶Ëß£">elf headerËØ¶Ëß£</a>
          <ol>
            <li><a href="#elf-headerÁªÑÊàê">elf headerÁªÑÊàê</a></li>
            <li><a href="#Á®ãÂ∫èÂ§¥Ë°®ÁªÑÊàê">Á®ãÂ∫èÂ§¥Ë°®ÁªÑÊàê</a></li>
          </ol>
        </li>
        <li><a href="#Â¶Ç‰ΩïÊü•Áúã‰∏Ä‰∏™Á®ãÂ∫èÁöÑelf-header‰ø°ÊÅØ">Â¶Ç‰ΩïÊü•Áúã‰∏Ä‰∏™Á®ãÂ∫èÁöÑelf header‰ø°ÊÅØ</a></li>
      </ol>
    </li>
    <li><a href="#Âä†ËΩΩÂÜÖÊ†∏">Âä†ËΩΩÂÜÖÊ†∏</a>
      <ol>
        <li><a href="#‰ª£Á†ÅÁõÆÂΩïÁªìÊûÑ">‰ª£Á†ÅÁõÆÂΩïÁªìÊûÑ</a></li>
        <li><a href="#Â∞ÜÂÜÖÊ†∏ËΩΩÂÖ•ÂÜÖÂ≠ò">Â∞ÜÂÜÖÊ†∏ËΩΩÂÖ•ÂÜÖÂ≠ò</a></li>
        <li><a href="#Ëß£ÊûêÂÜÖÊ†∏Â§¥Êñá‰ª∂Âä†ËΩΩÂÜÖÊ†∏Êò†ÂÉè">Ëß£ÊûêÂÜÖÊ†∏Â§¥Êñá‰ª∂ÔºåÂä†ËΩΩÂÜÖÊ†∏Êò†ÂÉè</a></li>
        <li><a href="#ÁºñËØëËøêË°å">ÁºñËØëËøêË°å</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
    <div class="article-image">
        <a href="/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F%E7%AC%AC%E4%BA%94%E7%AB%A0%E4%BA%8C-%E5%8A%A0%E8%BD%BD%E5%86%85%E6%A0%B8/">
            
            <img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241214_1734176213.jpg" loading="lazy" alt="Featured image of post „ÄäÊìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü„ÄãÁ¨¨‰∫îÁ´†Ôºà‰∫åÔºâ‚Äî‚Äî Âä†ËΩΩÂÜÖÊ†∏" />
            
        </a>
    </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
        <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F/" >
            Êìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü
        </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F%E7%AC%AC%E4%BA%94%E7%AB%A0%E4%BA%8C-%E5%8A%A0%E8%BD%BD%E5%86%85%E6%A0%B8/">„ÄäÊìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü„ÄãÁ¨¨‰∫îÁ´†Ôºà‰∫åÔºâ‚Äî‚Äî Âä†ËΩΩÂÜÖÊ†∏</a>
        </h2>

        
        <h3 class="article-subtitle">
            Êú¨Êñá‰ªãÁªç‰∫ÜÁ®ãÂ∫èÂä†ËΩΩÂà∞ÂÜÖÂ≠òÊòØÂ¶Ç‰ΩïÂºÄÂßãÂ∑•‰ΩúÁöÑ‰ª•ÂèäÂ¶Ç‰ΩïÂä†ËΩΩÂÜÖÊ†∏
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
            <time class="article-time--published">2024-12-13</time>
        </div>
        

        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



            <time class="article-lastmod">
                ÊúÄÂêéÊõ¥Êñ∞‰∫é
                2024-12-20
            </time>
        </div>
        <div>
            <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 17.0.2, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="33px" height="32px" viewBox="0 0 33 32" enable-background="new 0 0 33 32" xml:space="preserve">
<g>
	<path fill="#828282" d="M1.5,32h21c0.827,0,1.5-0.673,1.5-1.5V23c0-0.01-0.005-0.018-0.006-0.028
		c0.055-0.035,0.112-0.068,0.166-0.105l7.986,7.986C32.244,30.951,32.372,31,32.5,31s0.256-0.049,0.354-0.146
		c0.195-0.195,0.195-0.512,0-0.707l-7.913-7.913C26.205,21.047,27,19.366,27,17.5c0-2.297-1.201-4.316-3.006-5.472
		C23.995,12.018,24,12.01,24,12V9.5c0-0.017-0.008-0.031-0.009-0.047c-0.002-0.023-0.008-0.043-0.013-0.065
		c-0.017-0.071-0.046-0.135-0.09-0.191c-0.007-0.009-0.006-0.02-0.013-0.029l-8-9c-0.003-0.003-0.007-0.003-0.01-0.006
		c-0.06-0.065-0.137-0.108-0.223-0.134c-0.019-0.006-0.036-0.008-0.056-0.011C15.557,0.012,15.53,0,15.5,0h-14
		C0.673,0,0,0.673,0,1.5v29C0,31.327,0.673,32,1.5,32z M26,17.5c0,3.033-2.468,5.5-5.5,5.5S15,20.533,15,17.5s2.468-5.5,5.5-5.5
		S26,14.467,26,17.5z M16,1.815L22.387,9H16.5C16.28,9,16,8.58,16,8.25V1.815z M1,1.5C1,1.224,1.225,1,1.5,1H15v7.25
		C15,9.059,15.655,10,16.5,10H23v1.501C22.23,11.179,21.386,11,20.5,11c-1.838,0-3.496,0.77-4.679,2H5.5C5.224,13,5,13.224,5,13.5
		S5.224,14,5.5,14h9.532c-0.565,0.879-0.922,1.901-1.006,3H5.5C5.224,17,5,17.224,5,17.5S5.224,18,5.5,18h8.525
		c0.084,1.099,0.442,2.121,1.006,3H5.5C5.224,21,5,21.224,5,21.5S5.224,22,5.5,22h10.25c0.021,0,0.039-0.009,0.06-0.012
		C16.994,23.225,18.657,24,20.5,24c0.886,0,1.73-0.179,2.5-0.502V30.5c0,0.276-0.225,0.5-0.5,0.5h-21C1.22,31,1,30.78,1,30.5V1.5z"
		/>
	<path fill="#828282" d="M5.5,10h6c0.276,0,0.5-0.224,0.5-0.5S11.776,9,11.5,9h-6C5.224,9,5,9.224,5,9.5S5.224,10,5.5,10z"/>
	<path fill="#828282" d="M5.5,26h13c0.276,0,0.5-0.224,0.5-0.5S18.776,25,18.5,25h-13C5.224,25,5,25.224,5,25.5S5.224,26,5.5,26z"/>
</g>
</svg>

            
            <time class="article-words">
                Êú¨ÊñáÂÖ± 16653 Â≠ó
            </time>
        </div>
        

    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <p>Êú¨Á´†ËäÇÊâÄÊúâ‰ª£Á†ÅÊâòÁÆ°Âú®<a class="link" href="https://github.com/JL-sky/miniOS_32"  target="_blank" rel="noopener"
    >miniOS_32</a></p>
<h2 id="Á´†ËäÇ‰ªªÂä°‰ªãÁªç">Á´†ËäÇ‰ªªÂä°‰ªãÁªç
</h2><h3 id="‰ªªÂä°ÁÆÄ‰ªã">‰ªªÂä°ÁÆÄ‰ªã
</h3><p><a class="link" href="https://jl-sky.github.io/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F%E7%AC%AC%E4%BA%94%E7%AB%A0%E4%B8%80-%E4%BF%9D%E6%8A%A4%E6%A8%A1%E5%BC%8F%E8%BF%9B%E9%98%B6%E5%BC%80%E5%90%AF%E5%88%86%E9%A1%B5%E6%9C%BA%E5%88%B6/"  target="_blank" rel="noopener"
    >‰∏ä‰∏ÄËäÇ</a>ÔºåÊàë‰ª¨‰ªãÁªç‰∫ÜÂ¶Ç‰ΩïÂºÄÂêØÂàÜÈ°µÊú∫Âà∂Ôºå‰ªéËÄåËÆ©ÂÜÖÊ†∏ËÉΩÂ§üÂú®ÂàÜÈ°µÊú∫Âà∂‰∏ãÂ∑•‰Ωú</p>
<p>Êú¨ËäÇÊàë‰ª¨Â∞ÜÂú®Ê≠£Âºè‰π¶ÂÜôÂÜÖÊ†∏‰πãÂâçÂÆåÊàêloaderÁöÑÊúÄÂêé‰∏ÄÈ°π‰ªªÂä°‚Äî‚ÄîÂä†ËΩΩÂÜÖÊ†∏</p>
<p>Êú¨Á´†ÁöÑ‰∏ªË¶Å‰ªªÂä°ÊúâÔºö</p>
<blockquote>
<ol>
<li>Â∞ÜÂèØÊâßË°åÂÜÖÊ†∏Á®ãÂ∫è‰ªéÁ£ÅÁõòÂä†ËΩΩÂà∞ÂÜÖÂ≠ò</li>
<li>ËØªÂèñÂèØÊâßË°åÂÜÖÊ†∏Á®ãÂ∫èÁöÑelf headerÔºå‰ªé‰∏≠ËØªÂèñÂÜÖÊ†∏Á®ãÂ∫èÁöÑ‰ª£Á†ÅÊÆµÂíåÊï∞ÊçÆÊÆµÁ≠âÂÜÖÂÆπÔºåÂπ∂Â∞ÜÂÖ∂Âä†ËΩΩÂà∞ÂÜÖÂ≠òÁöÑÊåáÂÆö‰ΩçÁΩÆ</li>
</ol>
</blockquote>
<h3 id="ÂÜÖÂ≠òÂ∏ÉÂ±Ä">ÂÜÖÂ≠òÂ∏ÉÂ±Ä
</h3><p>Êú¨ËäÇÊàë‰ª¨ÁöÑ‰ªªÂä°ÂÆåÊàêÂêéÔºåloaderÁöÑ‰ΩøÂëΩ‰πüÂ∞±Âëä‰∏ÄÊÆµËêΩ‰∫ÜÔºå‰ª•‰∏ãÊòØÊú¨ËäÇÂÆåÊàêÂêéÁõÆÂâçÁöÑÂÜÖÂ≠òÂ∏ÉÂ±Ä</p>
<p><img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241215_1734192172.png"
	
	
	
	loading="lazy"
	
		alt="image-20241215000251778"
	
	
></p>
<h2 id="ÂâçÁΩÆÁü•ËØÜ">ÂâçÁΩÆÁü•ËØÜ
</h2><h3 id="ÁõÆÊ†áÊñá‰ª∂ÁöÑÂàÜÁ±ª">ÁõÆÊ†áÊñá‰ª∂ÁöÑÂàÜÁ±ª
</h3><blockquote>
<ul>
<li>ÈùôÊÄÅÈìæÊé•Êñá‰ª∂ÔºöÔºöËøôÁ±ªÊñá‰ª∂ÈÄöÂ∏∏ÊòØ <code>.a</code> Êàñ <code>.o</code> Êñá‰ª∂ÔºåÂåÖÂê´Â∑≤ÁªèÈùôÊÄÅÈìæÊé•ÁöÑ‰ª£Á†ÅÂíåÊï∞ÊçÆÔºåÂèØ‰ª•Ë¢´ÂÖ∂‰ªñÁ®ãÂ∫èÂºïÁî®Âπ∂ÊúÄÁªàÁîüÊàêÂèØÊâßË°åÊñá‰ª∂„ÄÇ</li>
<li>Âä®ÊÄÅÈìæÊé•Êñá‰ª∂ÔºöÔºöËøôÁ±ªÊñá‰ª∂ÈÄöÂ∏∏ÊòØ <code>.so</code> Êñá‰ª∂ÔºàÂÖ±‰∫´ÂØπË±°Êñá‰ª∂ÔºâÔºåÂÆÉ‰ª¨‰∏çÂåÖÂê´ÂÆåÊï¥ÁöÑÁ®ãÂ∫è‰ª£Á†ÅÔºåËÄåÊòØ‰æùËµñ‰∫éËøêË°åÊó∂Âä†ËΩΩÂÖ±‰∫´Â∫ìÔºàÂÖ±‰∫´ÂØπË±°Ôºâ„ÄÇ</li>
<li>ÂèØÊâßË°åÊñá‰ª∂ÔºöÊúÄÁªàÁîüÊàêÁöÑÂèØÊâßË°åÊñá‰ª∂ÔºåÈÄöÂ∏∏ÊòØ <code>.out</code> ÊàñÁ±ª‰ººÁöÑÊ†ºÂºèÔºåÂåÖÂê´‰∫ÜÂèØ‰ª•Ë¢´Êìç‰ΩúÁ≥ªÁªüÂä†ËΩΩÂíåÊâßË°åÁöÑÁ®ãÂ∫è‰ª£Á†Å„ÄÇ</li>
</ul>
</blockquote>
<h3 id="elf‰∏éÂèØÊâßË°åÊñá‰ª∂ÁöÑÁªÑÊàê">ELF‰∏éÂèØÊâßË°åÊñá‰ª∂ÁöÑÁªÑÊàê
</h3><p>ELFÔºöÂç≥Executable and Linkable FormatÔºåÂèØÊâßË°åÊñá‰ª∂ÂíåÁõÆÊ†áÊñá‰ª∂ÁöÑ‰∏ÄÁßçÊ†áÂáÜÊ†ºÂºè„ÄÇÂÆÉ‰ªÖ‰ªÖ‰ª£Ë°®‰∏ÄÁßçÊñá‰ª∂Ê†ºÂºèÔºåÁ±ª‰ºº‰∏éwindowsÁöÑexeÊ†ºÂºè,Âú®linux‰∏≠ÔºåÁõÆÊ†áÊñá‰ª∂ÈÉΩÊåâÁÖßELFÊñá‰ª∂Ê†ºÂºèËøõË°åÁªÑÁªá.</p>
<p>Á®ãÂ∫èÊòØÁî±ÊÆµÔºàÂ¶Ç‰ª£Á†ÅÊÆµ„ÄÅÊï∞ÊçÆÊÆµÔºâÁªÑÊàêÁöÑÔºåËÄåÊÆµÊòØÁî±ËäÇÁªÑÊàêÁöÑÔºàÂ¶Ç.textËäÇ„ÄÅ.dataËäÇ„ÄÅ.bssËäÇÁ≠âÔºâÔºåÂõ†Ê≠§Âú®Á®ãÂ∫èÂ§¥‰∏≠Ë¶ÅÊúâ‰∏Ä‰∏™ÊÆµÂ§¥Ë°®ÔºàÁ®ãÂ∫èÂ§¥Ë°®ÔºâÂíåËäÇÂ§¥Ë°®Êù•ÊèèËø∞Á®ãÂ∫è‰∏≠ÂêÑÁßçÊÆµÂèäËäÇÁöÑ‰ø°ÊÅØÔºåÊïÖ</p>
<blockquote>
<ul>
<li>Á®ãÂ∫èÂ§¥Ë°®Ôºö‰πüÁß∞ÊÆµÂ§¥Ë°®ÔºåÁî®‰∫éËÆ∞ÂΩïÁ®ãÂ∫è‰∏≠ÁöÑÂêÑ‰∏™ÊÆµÁöÑ‰ø°ÊÅØ</li>
<li>ËäÇÂ§¥Ë°®ÔºöÂÖ∂ÂÜÖÂÖÉÁ¥†Áî®‰∫éÊèèËø∞Á®ãÂ∫è‰∏≠ÁöÑÂêÑ‰∏™ËäÇ</li>
</ul>
</blockquote>
<p>Áî±‰∫éÁ®ãÂ∫èÂ§¥ÔºàÊÆµÂ§¥ÔºâÂíåËäÇÂ§¥ÁöÑÊï∞Èáè‰∏çÂõ∫ÂÆöÔºåÂõ†Ê≠§<strong>Á®ãÂ∫èÂ§¥Ë°®ÂíåËäÇÂ§¥Ë°®ÁöÑÂ§ßÂ∞è‰πüÂ∞±‰∏çÂõ∫ÂÆöÔºåÂõ†Ê≠§ÈúÄË¶Å‰∏Ä‰∏™Êï∞ÊçÆÁªìÊûÑÊù•ËØ¥ÊòéÁ®ãÂ∫èÂ§¥Ë°®ÂíåËäÇÂ§¥Ë°®ÁöÑÂ§ßÂ∞èÂíå‰ΩçÁΩÆ‰ø°ÊÅØÔºåËøô‰∏™Êï∞ÊçÆÁªìÊûÑÂ∞±ÊòØelf header</strong>ÔºåËøôÂ∞±ÊòØelf headerÁöÑÁî±Êù•</p>
<p>ÊïÖÔºå‰∏Ä‰∏™ÁõÆÊ†áÊñá‰ª∂ÊåâÁÖßELFÊ†ºÂºèËøõË°åÁªÑÁªáÔºåÂÖ∂‰∏ªË¶ÅÁªÑÊàê‰∏∫</p>
<blockquote>
<ul>
<li>ELF header</li>
<li>Á®ãÂ∫è‰ΩìÔºà‰ª£Á†ÅÂíåÊï∞ÊçÆÁ≠âÔºâ</li>
</ul>
</blockquote>
<p>ELF headerÂ∞±ÊòØÊñá‰ª∂Â§¥ÔºåËÆ∞ÂΩï‰∫ÜÁ®ãÂ∫è‰ΩìÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºàÂ¶ÇÁ®ãÂ∫èÁöÑÂÖ•Âè£Âú∞ÂùÄ„ÄÅÂêÑÁßçÊÆµÁöÑ‰ø°ÊÅØ„ÄÅÁ¨¶Âè∑‰ø°ÊÅØÁ≠âÔºâÔºåÂπ∂Èùû‰ª£Á†Å‰πüÂπ∂ÈùûÊï∞ÊçÆÔºåÊòØÊó†Ê≥ïÊâßË°åÁöÑÔºåÂõ†Ê≠§ÂΩì‰∏Ä‰∏™Á®ãÂ∫èÂä†ËΩΩÂà∞ÂÜÖÂ≠òÂêéÔºåÈúÄË¶ÅÊ†πÊçÆELF headerÊäΩÂèñÂá∫Á®ãÂ∫èÁöÑ‰ª£Á†ÅÂíåÊï∞ÊçÆÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂ÊîæÂà∞ÊåáÂÆöÂÜÖÂ≠òÂ§ÑÊâçËÉΩÁúüÊ≠£ÊâßË°å‰ª£Á†Å</p>
<h3 id="elf-headerËØ¶Ëß£">elf headerËØ¶Ëß£
</h3><p>‰ª•‰∏ãÊòØ‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑelfÂèØÊâßË°åÁõÆÊ†áÊñá‰ª∂ÁªÑÊàê</p>
<p><img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241214_1734180751.png"
	
	
	
	loading="lazy"
	
		alt="image-20241214205230981"
	
	
></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÊú¨Ë¥®‰∏äÁ®ãÂ∫èÊòØÁî±ÂêÑÁßçËäÇÁªÑÊàêÁöÑÔºåÂÖ∂‰∏≠.init„ÄÅ.text„ÄÅ.rodataÁªÑÊàê‰∫Ü‰ª£Á†ÅÊÆµÔºå.data„ÄÅ.bssÁªÑÊàê‰∫ÜÊï∞ÊçÆÊÆµÔºåËøòÊúâÂÖ∂‰ªñÁöÑ‰∏Ä‰∫õÊÆµ</p>
<p>‰ª•‰∏ãÊòØËøô‰∫õËäÇÁöÑÊ¶ÇÂøµ</p>
<blockquote>
<ul>
<li>**.textÔºö**Â∑≤ÁºñËØëÁ®ãÂ∫èÁöÑÊú∫Âô®‰ª£Á†Å„ÄÇ</li>
<li><strong>.rodata</strong>Ôºö<strong>Âè™ËØªÊï∞ÊçÆ</strong>ÔºåÊØîÂ¶Ç printf ËØ≠Âè•‰∏≠ÁöÑÊ†ºÂºè‰∏≤ÂíåÂºÄÂÖ≥ËØ≠Âè•ÁöÑË∑≥ËΩ¨Ë°®„ÄÇ</li>
<li><strong>.data</strong>Ôºö<strong>Â∑≤ÂàùÂßãÂåñÁöÑÂÖ®Â±ÄÂíåÈùôÊÄÅ C ÂèòÈáè</strong>„ÄÇ<strong>Â±ÄÈÉ® C ÂèòÈáèÂú®ËøêË°åÊó∂Ë¢´‰øùÂ≠òÂú®Ê†à‰∏≠ÔºåÊó¢‰∏çÂ≤ÄÁé∞Âú® .data ËäÇ‰∏≠Ôºå‰πü‰∏çÂ≤ÄÁé∞Âú® .bss ËäÇ‰∏≠„ÄÇ</strong></li>
<li><strong>.bss</strong>Ôºö<strong>Êú™ÂàùÂßãÂåñÁöÑÂÖ®Â±ÄÂíåÈùôÊÄÅ C ÂèòÈáèÔºå‰ª•ÂèäÊâÄÊúâË¢´ÂàùÂßãÂåñ‰∏∫ 0 ÁöÑÂÖ®Â±ÄÊàñÈùôÊÄÅÂèòÈáè</strong>„ÄÇ<strong>Âú®ÁõÆÊ†áÊñá‰ª∂‰∏≠Ëøô‰∏™ËäÇ‰∏çÂç†ÊçÆÂÆûÈôÖÁöÑÁ©∫Èó¥ÔºåÂÆÉ‰ªÖ‰ªÖÊòØ‰∏Ä‰∏™Âç†‰ΩçÁ¨¶</strong>„ÄÇÁõÆÊ†áÊñá‰ª∂Ê†ºÂºèÂå∫ÂàÜÂ∑≤ÂàùÂßãÂåñÂíåÊú™ÂàùÂßãÂåñÂèòÈáèÊòØ‰∏∫‰∫ÜÁ©∫Èó¥ÊïàÁéáÔºöÂú®ÁõÆÊ†áÊñá‰ª∂‰∏≠ÔºåÊú™ÂàùÂßãÂåñÂèòÈáè‰∏çÈúÄË¶ÅÂç†ÊçÆ‰ªª‰ΩïÂÆûÈôÖÁöÑÁ£ÅÁõòÁ©∫Èó¥„ÄÇËøêË°åÊó∂ÔºåÂú®ÂÜÖÂ≠ò‰∏≠ÂàÜÈÖçËøô‰∫õÂèòÈáèÔºåÂàùÂßãÂÄº‰∏∫ 0„ÄÇ</li>
<li><strong>.symtab</strong>Ôºö‰∏Ä‰∏™Á¨¶Âè∑Ë°®ÔºåÂÆÉÂ≠òÊîæÂú®Á®ãÂ∫è‰∏≠ÂÆö‰πâÂíåÂºïÁî®ÁöÑÂáΩÊï∞ÂíåÂÖ®Â±ÄÂèòÈáèÁöÑ‰ø°ÊÅØ„ÄÇ‰∏Ä‰∫õÁ®ãÂ∫èÂëòÈîôËØØÂú∞ËÆ§‰∏∫ÂøÖÈ°ªÈÄöËøá -g ÈÄâÈ°πÊù•ÁºñËØë‰∏Ä‰∏™Á®ãÂ∫èÔºåÊâçËÉΩÂæóÂà∞Á¨¶Âè∑Ë°®‰ø°ÊÅØ„ÄÇÂÆûÈôÖ‰∏äÔºåÊØè‰∏™ÂèØÈáçÂÆö‰ΩçÁõÆÊ†áÊñá‰ª∂Âú® .symtab ‰∏≠ÈÉΩÊúâ‰∏ÄÂº†Á¨¶Âè∑Ë°®ÔºàÈô§ÈùûÁ®ãÂ∫èÂëòÁâπÊÑèÁî® STRIP ÂëΩ‰ª§ÂéªÊéâÂÆÉÔºâ„ÄÇÁÑ∂ËÄåÔºåÂíåÁºñËØëÂô®‰∏≠ÁöÑÁ¨¶Âè∑Ë°®‰∏çÂêåÔºå.symtab Á¨¶Âè∑Ë°®‰∏çÂåÖÂê´Â±ÄÈÉ®ÂèòÈáèÁöÑÊù°ÁõÆ„ÄÇ</li>
<li><strong>.rel.text</strong>Ôºö‰∏Ä‰∏™ .text ËäÇ‰∏≠‰ΩçÁΩÆÁöÑÂàóË°®ÔºåÂΩìÈìæÊé•Âô®ÊääËøô‰∏™ÁõÆÊ†áÊñá‰ª∂ÂíåÂÖ∂‰ªñÊñá‰ª∂ÁªÑÂêàÊó∂ÔºåÈúÄË¶Å‰øÆÊîπËøô‰∫õ‰ΩçÁΩÆ„ÄÇ‰∏ÄËà¨ËÄåË®ÄÔºå‰ªª‰ΩïË∞ÉÁî®Â§ñÈÉ®ÂáΩÊï∞ÊàñËÄÖÂºïÁî®ÂÖ®Â±ÄÂèòÈáèÁöÑÊåá‰ª§ÈÉΩÈúÄË¶Å‰øÆÊîπ„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåË∞ÉÁî®Êú¨Âú∞ÂáΩÊï∞ÁöÑÊåá‰ª§Âàô‰∏çÈúÄË¶Å‰øÆÊîπ„ÄÇÊ≥®ÊÑèÔºåÂèØÊâßË°åÁõÆÊ†áÊñá‰ª∂‰∏≠Âπ∂‰∏çÈúÄË¶ÅÈáçÂÆö‰Ωç‰ø°ÊÅØÔºåÂõ†Ê≠§ÈÄöÂ∏∏ÁúÅÁï•ÔºåÈô§ÈùûÁî®Êà∑ÊòæÂºèÂú∞ÊåáÁ§∫ÈìæÊé•Âô®ÂåÖÂê´Ëøô‰∫õ‰ø°ÊÅØ„ÄÇ</li>
<li><strong>.rel.data</strong>ÔºöË¢´Ê®°ÂùóÂºïÁî®ÊàñÂÆö‰πâÁöÑÊâÄÊúâÂÖ®Â±ÄÂèòÈáèÁöÑÈáçÂÆö‰Ωç‰ø°ÊÅØ„ÄÇ‰∏ÄËà¨ËÄåË®ÄÔºå‰ªª‰ΩïÂ∑≤ÂàùÂßãÂåñÁöÑÂÖ®Â±ÄÂèòÈáèÔºåÂ¶ÇÊûúÂÆÉÁöÑÂàùÂßãÂÄºÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄÂèòÈáèÂú∞ÂùÄÊàñËÄÖÂ§ñÈÉ®ÂÆö‰πâÂáΩÊï∞ÁöÑÂú∞ÂùÄÔºåÈÉΩÈúÄË¶ÅË¢´‰øÆÊîπ„ÄÇ</li>
<li><strong>.debug</strong>Ôºö‰∏Ä‰∏™Ë∞ÉËØïÁ¨¶Âè∑Ë°®ÔºåÂÖ∂Êù°ÁõÆÊòØÁ®ãÂ∫è‰∏≠ÂÆö‰πâÁöÑÂ±ÄÈÉ®ÂèòÈáèÂíåÁ±ªÂûãÂÆö‰πâÔºåÁ®ãÂ∫è‰∏≠ÂÆö‰πâÂíåÂºïÁî®ÁöÑÂÖ®Â±ÄÂèòÈáèÔºå‰ª•ÂèäÂéüÂßãÁöÑ C Ê∫êÊñá‰ª∂„ÄÇÂè™Êúâ‰ª• - g ÈÄâÈ°πË∞ÉÁî®ÁºñËØëÂô®È©±Âä®Á®ãÂ∫èÊó∂ÔºåÊâç ‰ºöÂæóÂà∞ËøôÂº†Ë°®„ÄÇ</li>
<li><strong>.line</strong>Ôºö**ÂéüÂßã C Ê∫êÁ®ãÂ∫è‰∏≠ÁöÑË°åÂè∑Âíå .text ËäÇ‰∏≠Êú∫Âô®Êåá‰ª§‰πãÈó¥ÁöÑÊò†Â∞Ñ„ÄÇÂè™Êúâ‰ª• -g ÈÄâÈ°πË∞ÉÁî®ÁºñËØëÂô®È©±Âä®Á®ãÂ∫èÊó∂ÔºåÊâç‰ºöÂæóÂà∞ËøôÂº†Ë°®„ÄÇ</li>
<li><strong>.strtab</strong>Ôºö‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Ë°®ÔºåÂÖ∂ÂÜÖÂÆπÂåÖÊã¨ .symtab Âíå .debug ËäÇ‰∏≠ÁöÑÁ¨¶Âè∑Ë°®Ôºå‰ª•ÂèäËäÇÂ§¥ÈÉ®‰∏≠ÁöÑËäÇÂêçÂ≠ó„ÄÇÂ≠óÁ¨¶‰∏≤Ë°®Â∞±ÊòØ‰ª• null ÁªìÂ∞æÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÂ∫èÂàó„ÄÇ</li>
</ul>
</blockquote>
<h4 id="elf-headerÁªÑÊàê">elf headerÁªÑÊàê
</h4><p>Âú®Á®ãÂ∫è‰∏≠Ôºåelf header‰ª•ÁªìÊûÑ‰ΩìÁöÑÂΩ¢ÂºèÂ≠òÂú®ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºåelf headerÈô§‰∫ÜËÆ∞ÂΩïÁ®ãÂ∫èÂ§¥Ë°®ÂíåËäÇÂ§¥Ë°®ÁöÑ‰ø°ÊÅØÂ§ñÔºåËøòËÆ∞ÂΩï‰∫ÜÁ®ãÂ∫èÁöÑÂ§ßÂ∞èÁ´Ø„ÄÅelfÊñá‰ª∂Á±ªÂûãÁ≠â‰ø°ÊÅØ</p>
<p><img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241214_1734182121.png"
	
	
	
	loading="lazy"
	
		alt="image-20241214211521585"
	
	
></p>
<blockquote>
<ul>
<li>e_ident[16]Ôºö16Â≠óËäÇÔºåÁî®Êù•Ë°®Á§∫elfÂ≠óÁ¨¶Á≠â‰ø°ÊÅØÔºåÂºÄÂ§¥ÁöÑ4‰∏™Â≠óËäÇÊòØÂõ∫ÂÆö‰∏çÂèòÁöÑÔºåÊòØelfÊñá‰ª∂ÁöÑÈ≠îÊï∞ÔºåÂÆÉ‰ª¨ÂàÜÂà´ÊòØ0x7fÔºå‰ª•ÂèäÂ≠óÁ¨¶‰∏≤ELFÁöÑascÁ†Å:0x45,0x4c,0x46ÔºõÊúâÂÖ≥e_ident[5]Â§ßÂ∞èÁ´ØÂ≠óËäÇÂ∫èÔºåÔºåÁî® file ÂëΩ‰ª§Â∞±ËÉΩÂ§üÊü•ÁúãÂà∞elfÊ†ºÂºèÁöÑÂèØÊâßË°åÁ®ãÂ∫èÊòØLSBÔºåËøòÊòØMSB„ÄÇ
<img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241214_1734182190.png"
	
	
	
	loading="lazy"
	
		alt="image-20241214211630394"
	
	
></li>
<li>e_type:2Â≠óËäÇÔºåÊåáÂÆö<strong>elfÁõÆÊ†áÊñá‰ª∂ÁöÑÁ±ªÂûã</strong>ÔºåÂèØ‰ª•ÁúãÂà∞ÔºåÂèØÊâßË°åÊñá‰ª∂„ÄÅÂä®ÊÄÅÂÖ±‰∫´Êñá‰ª∂‰ª•ÂèäÂèØÈáçÂÆö‰ΩçÊñá‰ª∂ÔºàÈùôÊÄÅÈìæÊé•Êñá‰ª∂ÔºâÈÉΩÂ±û‰∫éELFÊ†ºÂºèÁöÑÊñá‰ª∂ÔºåÈô§Ê≠§‰ª•Â§ñÔºå‰ª£Á†ÅÂá∫Áé∞core dumpÈîôËØØÊó∂ÁîüÊàêÁöÑcoreÊñá‰ª∂‰πüÊòØ‰∏Ä‰∏™ELFÊ†ºÂºèÊñá‰ª∂
<img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241214_1734182276.png"
	
	
	
	loading="lazy"
	
		alt="image-20241214211756139"
	
	
></li>
<li>e_machine:2Â≠óËäÇÔºåÊèèËø∞elfÁõÆÊ†áÊñá‰ª∂Ë¶ÅÂú®ÈÇ£ÁßçÁ°¨‰ª∂Âπ≥Âè∞ËøêË°å</li>
<li>e_versionÔºö4Â≠óËäÇÔºåÁâàÊú¨‰ø°ÊÅØ</li>
<li>e_entry:Âç†Áî®4Â≠óËäÇÔºåÁî®Êù•ÊåáÊòéÊìç‰ΩúÁ≥ªÁªüËøêË°åËØ•Á®ãÂ∫èÊó∂ÔºåÂ∞ÜÊéßÂà∂ÊùÉËΩ¨‰∫§Âà∞ÁöÑËôöÊãüÂú∞ÂùÄ</li>
<li>e_phoff(program header table offset)Ôºö4Â≠óËäÇÔºå<strong>Á®ãÂ∫èÂ§¥Ë°®Âú®Êñá‰ª∂ÂÜÖÁöÑÂ≠óËäÇÂÅèÁßªÈáè</strong></li>
<li>e_shoff(section header table offset)Ôºö4Â≠óËäÇÔºå<strong>ËäÇÂ§¥Ë°®Âú®Êñá‰ª∂ÂÜÖÁöÑÂÅèÁßªÈáè</strong></li>
<li>e_flags:4Â≠óËäÇÔºåÊåáÊòé‰∏éÂ§ÑÁêÜÂô®Áõ∏ÂÖ≥ÁöÑÊ†áÂøó</li>
<li>e_ehsizeÔºö2Â≠óËäÇÔºå<strong>ÊåáÊòéelf headerÂ≠óËäÇÂ§ßÂ∞è</strong></li>
<li>e_phentsize;2Â≠óËäÇÔºåÊåáÊòé<strong>Á®ãÂ∫èÂ§¥Ë°®‰∏≠ÊØè‰∏™Êù°ÁõÆÔºàentryÔºâÁöÑÂ≠óËäÇÂ§ßÂ∞è</strong>Ôºå‰πüÂ∞±ÊòØÊØè‰∏™Áî®Êù•ÊèèËø∞ÊÆµ‰ø°ÊÅØÁöÑÊï∞ÊçÆÁªìÊûÑÁöÑÂ≠óËäÇÂ§ßÂ∞è</li>
<li>e_phnum:2Â≠óËäÇÔºå<strong>Á®ãÂ∫èÂ§¥Ë°®‰∏≠Êù°ÁõÆÁöÑÊï∞Èáè</strong></li>
<li>e_shentsizeÔºö2Â≠óËäÇÔºå<strong>ËäÇÂ§¥Ë°®‰∏≠ÊØè‰∏™Êù°ÁõÆÁöÑÂ≠óËäÇÂ§ßÂ∞è</strong></li>
<li>e_shnumÔºö2Â≠óËäÇÔºå<strong>ËäÇÂ§¥Ë°®‰∏≠Êù°ÁõÆÁöÑÊï∞Èáè</strong></li>
<li>e_shstrndxÔºö2Â≠óËäÇÔºåÊåáÊòéstring name tableÂú®ËäÇÂ§¥Ë°®‰∏≠ÁöÑÁ¥¢Âºïindex</li>
</ul>
</blockquote>
<h4 id="Á®ãÂ∫èÂ§¥Ë°®ÁªÑÊàê">Á®ãÂ∫èÂ§¥Ë°®ÁªÑÊàê
</h4><p>ÂêåÁêÜÔºåÁ®ãÂ∫èÂ§¥Ë°®‰πüÊòØ‰ª•ÁªìÊûÑ‰ΩìÂΩ¢ÂºèÂ≠òÂú®ÔºåËÆ∞ÂΩï‰∫ÜÁ®ãÂ∫èÂêÑÊÆµÁöÑ‰ø°ÊÅØ</p>
<p>‚Äã	<img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241214_1734182576.png"
	
	
	
	loading="lazy"
	
		alt="image-20241214212256256"
	
	
></p>
<blockquote>
<ul>
<li>p_typeÔºö4Â≠óËäÇÔºåÁ®ãÂ∫è‰∏≠<strong>ÊÆµÁöÑÁ±ªÂûã</strong>
<img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241214_1734182625.png"
	
	
	
	loading="lazy"
	
		alt="image-20241214212345602"
	
	
></li>
<li>p_offsetÔºö4Â≠óËäÇÔºå<strong>Êú¨ÊÆµÂú®Êñá‰ª∂ÂÜÖÁöÑËµ∑ÂßãÂÅèÁßªÂú∞ÂùÄ</strong></li>
<li>p_vaddrÔºö4Â≠óËäÇÔºå<strong>Êú¨ÊÆµÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑËµ∑ÂßãËôöÊãüÂú∞ÂùÄ</strong></li>
<li>p_paddrÔºö4Â≠óËäÇÔºåÊöÇ‰∏î‰øùÁïôÔºåÊú™ËÆæÂÆö</li>
<li>p_filezÔºö4Â≠óËäÇÔºå<strong>Êú¨ÊÆµÂú®Êñá‰ª∂‰∏≠ÁöÑÂ§ßÂ∞è</strong></li>
<li>p_memszÔºö4Â≠óËäÇÔºå<strong>Êú¨ÊÆµÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂ§ßÂ∞è</strong></li>
<li>p_flagsÔºö4Â≠óËäÇÔºåÊåáÊòé‰∏éÊú¨ÊÆµÁõ∏ÂÖ≥ÁöÑÊ†áÂøóÔºåÂ¶Ç<strong>Êú¨ÊÆµÁöÑÊùÉÈôê‰ø°ÊÅØ</strong>
<img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241214_1734182692.png"
	
	
	
	loading="lazy"
	
		alt="image-20241214212451966"
	
	
></li>
<li>p_alignÔºö4Â≠óËäÇÔºåÁî®Êù•ÊåáÊòéÊú¨ÊÆµÂú®Êñá‰ª∂ÂíåÂÜÖÂ≠ò‰∏≠ÁöÑÂØπÈΩêÊñπÂºè„ÄÇÂ¶ÇÊûúÂÄº‰∏∫0Êàñ1ÔºåÂàôË°®Á§∫‰∏çÂØπÈΩê„ÄÇÂê¶Âàôp_alignÂ∫îËØ•ÊòØ2ÁöÑÂπÇÊ¨°Êï∞„ÄÇ</li>
</ul>
</blockquote>
<h3 id="Â¶Ç‰ΩïÊü•Áúã‰∏Ä‰∏™Á®ãÂ∫èÁöÑelf-header‰ø°ÊÅØ">Â¶Ç‰ΩïÊü•Áúã‰∏Ä‰∏™Á®ãÂ∫èÁöÑelf header‰ø°ÊÅØ
</h3><p>Â¶Ç‰∏ãÔºåÊàë‰ª¨ÂÜô‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ®ãÂ∫è</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">num1</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">char</span> <span class="n">c1</span><span class="o">=</span><span class="sc">&#39;a&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">num2</span><span class="o">=</span><span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">c2</span><span class="o">=</span><span class="sc">&#39;b&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂Âêé‰ΩøÁî®gccÁºñËØëÂÆÉ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">gcc</span> <span class="p">.</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">cc</span> <span class="o">-</span><span class="n">o</span> <span class="n">main</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Linux‰∏≠ÔºåÊü•Áúã‰∏Ä‰∏™ÂèØÊâßË°åÊñá‰ª∂ÁöÑÂ∑•ÂÖ∑ÊòØ<code>objdump</code>ÔºåÂ¶Ç‰∏ãÊàë‰ª¨‰ΩøÁî®<code>objdump</code>Êü•ÁúãÂèØÊâßË°åÁ®ãÂ∫èmainÁöÑÂ§¥‰ø°ÊÅØ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">objdump -x main
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊòæÁ§∫ÁöÑ‰ø°ÊÅØÊØîËæÉÂ§öÔºåÊàë‰ª¨ÂàÜÂºÄÊù•Áúã</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">main:     file format elf64-x86-64
</span></span><span class="line"><span class="cl">main
</span></span><span class="line"><span class="cl">architecture: i386:x86-64, flags 0x00000150:
</span></span><span class="line"><span class="cl">HAS_SYMS, DYNAMIC, D_PAGED
</span></span><span class="line"><span class="cl">start address 0x00000000000004f0
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊÆµ‰ø°ÊÅØÂëäËØâÊàë‰ª¨ËøôÊòØ‰∏Ä‰∏™64‰ΩçÁöÑELFÊñá‰ª∂ÔºåÂπ∂‰∏îËØ•Êñá‰ª∂ÊòØÈíàÂØπ 64 ‰Ωç x86 Êû∂ÊûÑÊûÑÂª∫ÁöÑÔºåÊîØÊåÅÂÖºÂÆπIntel 32 ‰ΩçÊåá‰ª§ÈõÜÔºåÁ®ãÂ∫èÁöÑÂÖ•Âè£Âú∞ÂùÄÊòØ0x00000000000004f0</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Program Header:
</span></span><span class="line"><span class="cl">    PHDR off    0x0000000000000040 vaddr 0x0000000000000040 paddr 0x0000000000000040 align 2**3
</span></span><span class="line"><span class="cl">         filesz 0x00000000000001f8 memsz 0x00000000000001f8 flags r--
</span></span><span class="line"><span class="cl">  INTERP off    0x0000000000000238 vaddr 0x0000000000000238 paddr 0x0000000000000238 align 2**0
</span></span><span class="line"><span class="cl">         filesz 0x000000000000001c memsz 0x000000000000001c flags r--
</span></span><span class="line"><span class="cl">    LOAD off    0x0000000000000000 vaddr 0x0000000000000000 paddr 0x0000000000000000 align 2**21
</span></span><span class="line"><span class="cl">         filesz 0x00000000000007d8 memsz 0x00000000000007d8 flags r-x
</span></span><span class="line"><span class="cl">    LOAD off    0x0000000000000df0 vaddr 0x0000000000200df0 paddr 0x0000000000200df0 align 2**21
</span></span><span class="line"><span class="cl">         filesz 0x0000000000000225 memsz 0x0000000000000228 flags rw-
</span></span><span class="line"><span class="cl"> DYNAMIC off    0x0000000000000e00 vaddr 0x0000000000200e00 paddr 0x0000000000200e00 align 2**3
</span></span><span class="line"><span class="cl">         filesz 0x00000000000001c0 memsz 0x00000000000001c0 flags rw-
</span></span><span class="line"><span class="cl">    NOTE off    0x0000000000000254 vaddr 0x0000000000000254 paddr 0x0000000000000254 align 2**2
</span></span><span class="line"><span class="cl">         filesz 0x0000000000000044 memsz 0x0000000000000044 flags r--
</span></span><span class="line"><span class="cl">EH_FRAME off    0x0000000000000694 vaddr 0x0000000000000694 paddr 0x0000000000000694 align 2**2
</span></span><span class="line"><span class="cl">         filesz 0x000000000000003c memsz 0x000000000000003c flags r--
</span></span><span class="line"><span class="cl">   STACK off    0x0000000000000000 vaddr 0x0000000000000000 paddr 0x0000000000000000 align 2**4
</span></span><span class="line"><span class="cl">         filesz 0x0000000000000000 memsz 0x0000000000000000 flags rw-
</span></span><span class="line"><span class="cl">   RELRO off    0x0000000000000df0 vaddr 0x0000000000200df0 paddr 0x0000000000200df0 align 2**0
</span></span><span class="line"><span class="cl">         filesz 0x0000000000000210 memsz 0x0000000000000210 flags r--
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨‰∏ªË¶ÅÁúãËøôÊÆµ‰ø°ÊÅØÔºåËøôÊÆµ‰ø°ÊÅØÂ∞±ÊòØÊàë‰ª¨ËØ¥ÁöÑelf headerÈáåÁöÑÁ®ãÂ∫èÂ§¥Ë°®ÔºàProgram Header tableÔºâÔºåÂÜçÊ¨°Âº∫Ë∞É</p>
<blockquote>
<p>elf headerÈáåËÆ∞ÂΩï‰∫ÜÁ®ãÂ∫èÂ§¥Ë°®ÂíåËäÇÂ§¥Ë°®ÁöÑ‰ø°ÊÅØÔºåÁ®ãÂ∫èÂ§¥Ë°®ËÆ∞ÂΩï‰∫ÜÁ®ãÂ∫èÂ§¥ÔºàÊÆµÔºâÁöÑ‰ø°ÊÅØÔºåËäÇÂ§¥Ë°®ËÆ∞ÂΩï‰∫ÜËäÇÁöÑ‰ø°ÊÅØ</p>
</blockquote>
<p>ËßÇÂØü‰∏äËø∞Á®ãÂ∫èÂ§¥Ë°®ÁöÑËøôÊÆµ‰ø°ÊÅØ</p>
<p>ËøôÊÆµ‰ø°ÊÅØËµ∑ÂßãÂ∞±ÊòØ‰ª£Á†ÅÊÆµÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºåÊàë‰ª¨‰ª•ËøôÊÆµ‰ø°ÊÅØ‰∏∫‰æãÔºö</p>
<blockquote>
<ul>
<li>offÔºöËØ•ÊÆµÂú®ÁõÆÊ†áÊñá‰ª∂‰∏≠ÁöÑÂÅèÁßª</li>
<li>vaddr/paddrÔºöËØ•ÊÆµÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑËôöÊãüÂú∞ÂùÄ</li>
<li>alignÔºöÂØπÈΩêË¶ÅÊ±Ç</li>
<li>fileszÔºöÁõÆÊ†áÊñá‰ª∂‰∏≠ËØ•ÊÆµÁöÑÂ§ßÂ∞è</li>
<li>memszÔºöÂÜÖÂ≠ò‰∏≠ËØ•ÊÆµÁöÑÂ§ßÂ∞è</li>
<li>flagsÔºöËøêË°åÊó∂ËØ•ÊÆµÁöÑËÆøÈóÆÊùÉÈôê</li>
</ul>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">    LOAD off    0x0000000000000000 vaddr 0x0000000000000000 paddr 0x0000000000000000 align 2**21
</span></span><span class="line"><span class="cl">         filesz 0x00000000000007d8 memsz 0x00000000000007d8 flags r-x
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âõ†Ê≠§‰∏äËø∞‰ø°ÊÅØÂëäËØâÊàë‰ª¨Ôºå‰ª£Á†ÅÊÆµÂÖ∑ÊúâÂèØËØª„ÄÅÊâßË°åÊùÉÈôêÔºåÂºÄÂßã‰∫éËôöÊãüÂÜÖÂ≠òÂú∞ÂùÄ0x0000000000000000Â§ÑÔºåÊÄªÂÖ±ÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÊòØ0x00000000000007d8Â≠óËäÇ</p>
<p>ÂêåÁêÜ‰ª•‰∏ãÊòØÁ®ãÂ∫èÁöÑÊï∞ÊçÆÊÆµ‰ø°ÊÅØÔºåËøôÊÆµ‰ø°ÊÅØÂëäËØâÊàë‰ª¨ÔºåÊï∞ÊçÆÊÆµÂÖ∑ÊúâËØªÂÜôÊùÉÈôêÔºåÂºÄÂßã‰∫éËôöÊãüÂÜÖÂ≠òÂú∞ÂùÄ0x0000000000200df0Â§ÑÔºåÊÄªÂÖ±ÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÊòØ0x0000000000000228Â≠óËäÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">    LOAD off    0x0000000000000df0 vaddr 0x0000000000200df0 paddr 0x0000000000200df0 align 2**21
</span></span><span class="line"><span class="cl">         filesz 0x0000000000000225 memsz 0x0000000000000228 flags rw-
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êé•‰∏ãÊù•Êàë‰ª¨ÂÜçÊù•Áúã‰∏Ä‰∏ãËäÇÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Sections:
</span></span><span class="line"><span class="cl">Idx Name          Size      VMA               LMA               File off  Algn
</span></span><span class="line"><span class="cl">  <span class="m">0</span> .interp       0000001c  <span class="m">0000000000000238</span>  <span class="m">0000000000000238</span>  <span class="m">00000238</span>  2**0
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl">  <span class="m">1</span> .note.ABI-tag <span class="m">00000020</span>  <span class="m">0000000000000254</span>  <span class="m">0000000000000254</span>  <span class="m">00000254</span>  2**2
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl">  <span class="m">2</span> .note.gnu.build-id <span class="m">00000024</span>  <span class="m">0000000000000274</span>  <span class="m">0000000000000274</span>  <span class="m">00000274</span>  2**2
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl">  <span class="m">3</span> .gnu.hash     0000001c  <span class="m">0000000000000298</span>  <span class="m">0000000000000298</span>  <span class="m">00000298</span>  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl">  <span class="m">4</span> .dynsym       <span class="m">00000090</span>  00000000000002b8  00000000000002b8  000002b8  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl">  <span class="m">5</span> .dynstr       0000007d  <span class="m">0000000000000348</span>  <span class="m">0000000000000348</span>  <span class="m">00000348</span>  2**0
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl">  <span class="m">6</span> .gnu.version  0000000c  00000000000003c6  00000000000003c6  000003c6  2**1
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl">  <span class="m">7</span> .gnu.version_r <span class="m">00000020</span>  00000000000003d8  00000000000003d8  000003d8  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl">  <span class="m">8</span> .rela.dyn     000000c0  00000000000003f8  00000000000003f8  000003f8  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl">  <span class="m">9</span> .init         <span class="m">00000017</span>  00000000000004b8  00000000000004b8  000004b8  2**2
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, CODE
</span></span><span class="line"><span class="cl"> <span class="m">10</span> .plt          <span class="m">00000010</span>  00000000000004d0  00000000000004d0  000004d0  2**4
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, CODE
</span></span><span class="line"><span class="cl"> <span class="m">11</span> .plt.got      <span class="m">00000008</span>  00000000000004e0  00000000000004e0  000004e0  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, CODE
</span></span><span class="line"><span class="cl"> <span class="m">12</span> .text         <span class="m">00000192</span>  00000000000004f0  00000000000004f0  000004f0  2**4
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, CODE
</span></span><span class="line"><span class="cl"> <span class="m">13</span> .fini         <span class="m">00000009</span>  <span class="m">0000000000000684</span>  <span class="m">0000000000000684</span>  <span class="m">00000684</span>  2**2
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, CODE
</span></span><span class="line"><span class="cl"> <span class="m">14</span> .rodata       <span class="m">00000004</span>  <span class="m">0000000000000690</span>  <span class="m">0000000000000690</span>  <span class="m">00000690</span>  2**2
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl"> <span class="m">15</span> .eh_frame_hdr 0000003c  <span class="m">0000000000000694</span>  <span class="m">0000000000000694</span>  <span class="m">00000694</span>  2**2
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl"> <span class="m">16</span> .eh_frame     <span class="m">00000108</span>  00000000000006d0  00000000000006d0  000006d0  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, DATA
</span></span><span class="line"><span class="cl"> <span class="m">17</span> .init_array   <span class="m">00000008</span>  0000000000200df0  0000000000200df0  00000df0  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, DATA
</span></span><span class="line"><span class="cl"> <span class="m">18</span> .fini_array   <span class="m">00000008</span>  0000000000200df8  0000000000200df8  00000df8  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, DATA
</span></span><span class="line"><span class="cl"> <span class="m">19</span> .dynamic      000001c0  0000000000200e00  0000000000200e00  00000e00  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, DATA
</span></span><span class="line"><span class="cl"> <span class="m">20</span> .got          <span class="m">00000040</span>  0000000000200fc0  0000000000200fc0  00000fc0  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, DATA
</span></span><span class="line"><span class="cl"> <span class="m">21</span> .data         <span class="m">00000015</span>  <span class="m">0000000000201000</span>  <span class="m">0000000000201000</span>  <span class="m">00001000</span>  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, DATA
</span></span><span class="line"><span class="cl"> <span class="m">22</span> .bss          <span class="m">00000003</span>  <span class="m">0000000000201015</span>  <span class="m">0000000000201015</span>  <span class="m">00001015</span>  2**0
</span></span><span class="line"><span class="cl">                  ALLOC
</span></span><span class="line"><span class="cl"> <span class="m">23</span> .comment      <span class="m">00000029</span>  <span class="m">0000000000000000</span>  <span class="m">0000000000000000</span>  <span class="m">00001015</span>  2**0
</span></span><span class="line"><span class="cl">                  CONTENTS, READONLY
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨‰ªçÊóßÊà™Âèñ‰∏Ä‰∫õÊàë‰ª¨ÁÜüÊÇâÁöÑËäÇËøõË°åËØ¥Êòé</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> Idx Name          Size      VMA               LMA               File off  Algn
</span></span><span class="line"><span class="cl"> <span class="m">12</span> .text         <span class="m">00000192</span>  00000000000004f0  00000000000004f0  000004f0  2**4
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, READONLY, CODE
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊÆµ‰ø°ÊÅØË°®Á§∫ÔºåËøôÊòØ‰∏Ä‰∏™.textËäÇÔºåÈö∂Â±û‰∫é‰ª£Á†ÅÊÆµÔºåÂè™ËØªÔºåÂú®LinuxÁ®ãÂ∫è‰∏≠ÁöÑÁ¥¢ÂºïÊòØ12ÔºàÁ®ãÂ∫è‰ª•Á¥¢ÂºïÊ†áËÆ∞‰∏Ä‰∏™ËäÇÔºâÔºåËäÇÁöÑÂ§ßÂ∞èÊòØ00000192</p>
<p>ÂêåÁêÜ‰ª•‰∏ãÊòØ.dataËäÇÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">  Idx Name          Size      VMA               LMA               File off  Algn
</span></span><span class="line"><span class="cl"> <span class="m">21</span> .data         <span class="m">00000015</span>  <span class="m">0000000000201000</span>  <span class="m">0000000000201000</span>  <span class="m">00001000</span>  2**3
</span></span><span class="line"><span class="cl">                  CONTENTS, ALLOC, LOAD, DATA
</span></span></code></pre></td></tr></table>
</div>
</div><p>Èô§Ê≠§‰ª•Â§ñÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÁü•ÈÅìÔºåÁ®ãÂ∫èÂú®ÈìæÊé•ÁöÑÊó∂ÂÄôÈúÄË¶ÅÁü•ÈÅìÂêÑÁßçÁ¨¶Âè∑ÁöÑ‰ø°ÊÅØÔºåÊâÄË∞ìÁ¨¶Âè∑Â∞±ÊòØÂáΩÊï∞Âêç„ÄÅÂÖ®Â±ÄÂèòÈáèÂêçÁ≠âÔºåÊ≥®ÊÑèÂ±ÄÈÉ®ÂèòÈáè‰∏çÊòØÁ¨¶ÂêàÔºåÂõ†‰∏∫Â±ÄÈÉ®ÂèòÈáèÊú¨Ë¥®‰∏äÊòØÂú®Á®ãÂ∫èÊâßË°åÂêéÂ≠òÂú®‰∫éÊ†à‰∏≠ÔºåÈöèÁùÄÂáΩÊï∞Ê†àÁöÑÂºÄËæüÂíåÈîÄÊØÅËÄåÁîüÂ≠òÂíåÊ≠ª‰∫°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">SYMBOL TABLE:
</span></span><span class="line"><span class="cl"><span class="m">0000000000000238</span> l    d  .interp        <span class="m">0000000000000000</span>              .interp
</span></span><span class="line"><span class="cl"><span class="m">0000000000000254</span> l    d  .note.ABI-tag  <span class="m">0000000000000000</span>              .note.ABI-tag
</span></span><span class="line"><span class="cl"><span class="m">0000000000000274</span> l    d  .note.gnu.build-id     <span class="m">0000000000000000</span>              .note.gnu.build-id
</span></span><span class="line"><span class="cl"><span class="m">0000000000000298</span> l    d  .gnu.hash      <span class="m">0000000000000000</span>              .gnu.hash
</span></span><span class="line"><span class="cl">00000000000002b8 l    d  .dynsym        <span class="m">0000000000000000</span>              .dynsym
</span></span><span class="line"><span class="cl"><span class="m">0000000000000348</span> l    d  .dynstr        <span class="m">0000000000000000</span>              .dynstr
</span></span><span class="line"><span class="cl">00000000000003c6 l    d  .gnu.version   <span class="m">0000000000000000</span>              .gnu.version
</span></span><span class="line"><span class="cl">00000000000003d8 l    d  .gnu.version_r <span class="m">0000000000000000</span>              .gnu.version_r
</span></span><span class="line"><span class="cl">00000000000003f8 l    d  .rela.dyn      <span class="m">0000000000000000</span>              .rela.dyn
</span></span><span class="line"><span class="cl">00000000000004b8 l    d  .init  <span class="m">0000000000000000</span>              .init
</span></span><span class="line"><span class="cl">00000000000004d0 l    d  .plt   <span class="m">0000000000000000</span>              .plt
</span></span><span class="line"><span class="cl">00000000000004e0 l    d  .plt.got       <span class="m">0000000000000000</span>              .plt.got
</span></span><span class="line"><span class="cl">00000000000004f0 l    d  .text  <span class="m">0000000000000000</span>              .text
</span></span><span class="line"><span class="cl"><span class="m">0000000000000684</span> l    d  .fini  <span class="m">0000000000000000</span>              .fini
</span></span><span class="line"><span class="cl"><span class="m">0000000000000690</span> l    d  .rodata        <span class="m">0000000000000000</span>              .rodata
</span></span><span class="line"><span class="cl"><span class="m">0000000000000694</span> l    d  .eh_frame_hdr  <span class="m">0000000000000000</span>              .eh_frame_hdr
</span></span><span class="line"><span class="cl">00000000000006d0 l    d  .eh_frame      <span class="m">0000000000000000</span>              .eh_frame
</span></span><span class="line"><span class="cl">0000000000200df0 l    d  .init_array    <span class="m">0000000000000000</span>              .init_array
</span></span><span class="line"><span class="cl">0000000000200df8 l    d  .fini_array    <span class="m">0000000000000000</span>              .fini_array
</span></span><span class="line"><span class="cl">0000000000200e00 l    d  .dynamic       <span class="m">0000000000000000</span>              .dynamic
</span></span><span class="line"><span class="cl">0000000000200fc0 l    d  .got   <span class="m">0000000000000000</span>              .got
</span></span><span class="line"><span class="cl"><span class="m">0000000000201000</span> l    d  .data  <span class="m">0000000000000000</span>              .data
</span></span><span class="line"><span class="cl"><span class="m">0000000000201015</span> l    d  .bss   <span class="m">0000000000000000</span>              .bss
</span></span><span class="line"><span class="cl"><span class="m">0000000000000000</span> l    d  .comment       <span class="m">0000000000000000</span>              .comment
</span></span><span class="line"><span class="cl"><span class="m">0000000000000000</span> l    df *ABS*  <span class="m">0000000000000000</span>              crtstuff.c
</span></span><span class="line"><span class="cl"><span class="m">0000000000000520</span> l     F .text  <span class="m">0000000000000000</span>              deregister_tm_clones
</span></span><span class="line"><span class="cl"><span class="m">0000000000000560</span> l     F .text  <span class="m">0000000000000000</span>              register_tm_clones
</span></span><span class="line"><span class="cl">00000000000005b0 l     F .text  <span class="m">0000000000000000</span>              __do_global_dtors_aux
</span></span><span class="line"><span class="cl"><span class="m">0000000000201015</span> l     O .bss   <span class="m">0000000000000001</span>              completed.7698
</span></span><span class="line"><span class="cl">0000000000200df8 l     O .fini_array    <span class="m">0000000000000000</span>              __do_global_dtors_aux_fini_array_entry
</span></span><span class="line"><span class="cl">00000000000005f0 l     F .text  <span class="m">0000000000000000</span>              frame_dummy
</span></span><span class="line"><span class="cl">0000000000200df0 l     O .init_array    <span class="m">0000000000000000</span>              __frame_dummy_init_array_entry
</span></span><span class="line"><span class="cl"><span class="m">0000000000000000</span> l    df *ABS*  <span class="m">0000000000000000</span>              main.cc
</span></span><span class="line"><span class="cl"><span class="m">0000000000000000</span> l    df *ABS*  <span class="m">0000000000000000</span>              crtstuff.c
</span></span><span class="line"><span class="cl">00000000000007d4 l     O .eh_frame      <span class="m">0000000000000000</span>              __FRAME_END__
</span></span><span class="line"><span class="cl"><span class="m">0000000000000000</span> l    df *ABS*  <span class="m">0000000000000000</span>
</span></span><span class="line"><span class="cl">0000000000200df8 l       .init_array    <span class="m">0000000000000000</span>              __init_array_end
</span></span><span class="line"><span class="cl">0000000000200e00 l     O .dynamic       <span class="m">0000000000000000</span>              _DYNAMIC
</span></span><span class="line"><span class="cl">0000000000200df0 l       .init_array    <span class="m">0000000000000000</span>              __init_array_start
</span></span><span class="line"><span class="cl"><span class="m">0000000000000694</span> l       .eh_frame_hdr  <span class="m">0000000000000000</span>              __GNU_EH_FRAME_HDR
</span></span><span class="line"><span class="cl">0000000000200fc0 l     O .got   <span class="m">0000000000000000</span>              _GLOBAL_OFFSET_TABLE_
</span></span><span class="line"><span class="cl"><span class="m">0000000000000680</span> g     F .text  <span class="m">0000000000000002</span>              __libc_csu_fini
</span></span><span class="line"><span class="cl"><span class="m">0000000000000000</span>  w      *UND*  <span class="m">0000000000000000</span>              _ITM_deregisterTMCloneTable
</span></span><span class="line"><span class="cl"><span class="m">0000000000201000</span>  w      .data  <span class="m">0000000000000000</span>              data_start
</span></span><span class="line"><span class="cl"><span class="m">0000000000201015</span> g       .data  <span class="m">0000000000000000</span>              _edata
</span></span><span class="line"><span class="cl"><span class="m">0000000000000684</span> g     F .fini  <span class="m">0000000000000000</span>              _fini
</span></span><span class="line"><span class="cl"><span class="m">0000000000000000</span>       F *UND*  <span class="m">0000000000000000</span>              __libc_start_main@@GLIBC_2.2.5
</span></span><span class="line"><span class="cl"><span class="m">0000000000201000</span> g       .data  <span class="m">0000000000000000</span>              __data_start
</span></span><span class="line"><span class="cl"><span class="m">0000000000000000</span>  w      *UND*  <span class="m">0000000000000000</span>              __gmon_start__
</span></span><span class="line"><span class="cl"><span class="m">0000000000201008</span> g     O .data  <span class="m">0000000000000000</span>              .hidden __dso_handle
</span></span><span class="line"><span class="cl"><span class="m">0000000000000690</span> g     O .rodata        <span class="m">0000000000000004</span>              _IO_stdin_used
</span></span><span class="line"><span class="cl"><span class="m">0000000000000610</span> g     F .text  <span class="m">0000000000000065</span>              __libc_csu_init
</span></span><span class="line"><span class="cl"><span class="m">0000000000201010</span> g     O .data  <span class="m">0000000000000004</span>              num1
</span></span><span class="line"><span class="cl"><span class="m">0000000000201018</span> g       .bss   <span class="m">0000000000000000</span>              _end
</span></span><span class="line"><span class="cl">00000000000004f0 g     F .text  000000000000002b              _start
</span></span><span class="line"><span class="cl"><span class="m">0000000000201014</span> g     O .data  <span class="m">0000000000000001</span>              c1
</span></span><span class="line"><span class="cl"><span class="m">0000000000201015</span> g       .bss   <span class="m">0000000000000000</span>              __bss_start
</span></span><span class="line"><span class="cl">00000000000005fa g     F .text  <span class="m">0000000000000016</span>              main
</span></span><span class="line"><span class="cl"><span class="m">0000000000201018</span> g     O .data  <span class="m">0000000000000000</span>              .hidden __TMC_END__
</span></span><span class="line"><span class="cl"><span class="m">0000000000000000</span>  w      *UND*  <span class="m">0000000000000000</span>              _ITM_registerTMCloneTable
</span></span><span class="line"><span class="cl"><span class="m">0000000000000000</span>  w    F *UND*  <span class="m">0000000000000000</span>              __cxa_finalize@@GLIBC_2.2.5
</span></span><span class="line"><span class="cl">00000000000004b8 g     F .init  <span class="m">0000000000000000</span>              _init
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª•‰∏äÊòØÊàë‰ª¨Á®ãÂ∫èÁöÑÁ¨¶Âè∑‰ø°ÊÅØÔºåËøô‰∫õÁ¨¶Âè∑‰ø°ÊÅØËÆ∞ÂΩïÂú®Á¨¶Âè∑Ë°®‰∏≠ÔºåÊàë‰ª¨ËøòÊà™Âèñ‰∏Ä‰∫õÊàë‰ª¨Áü•ÈÅìÁöÑËØ¥Êòé</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">00000000000005fa g     F .text  <span class="m">0000000000000016</span>              main
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<ol>
<li>
<p><strong>00000000000005fa</strong>ÔºöËøôÊòØÁ¨¶Âè∑Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂú∞ÂùÄÔºåË°®Á§∫ <code>main</code> ÂáΩÊï∞Âú®Á®ãÂ∫èÂÜÖÂ≠ò‰∏≠ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
</li>
<li>
<p><strong>g</strong>Ôºå<strong>Á¨¶Âè∑Á±ªÂûã</strong>Ôºö<code>g</code> Ë°®Á§∫Á¨¶Âè∑ÊòØ <strong>ÂÖ®Â±ÄÁ¨¶Âè∑</strong>„ÄÇ</p>
</li>
<li>
<p><strong>F</strong>Ôºå<strong>Á¨¶Âè∑Á±ªÂûãÔºàËøõ‰∏ÄÊ≠•ËØ¥ÊòéÔºâ</strong>Ôºö<code>F</code> Ë°®Á§∫Ëøô‰∏™Á¨¶Âè∑ÊòØ‰∏Ä‰∏™ <strong>ÂáΩÊï∞</strong>„ÄÇÂõ†Ê≠§Ôºå<code>main</code> Á¨¶Âè∑‰ª£Ë°®ÁöÑÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÁöÑÂÖ•Âè£„ÄÇ</p>
</li>
<li>
<p><strong>.text</strong>Ôºå<strong>ËäÇÂå∫ÔºàSectionÔºâ</strong>Ôºö<code>.text</code> ÊòØ‰∫åËøõÂà∂Êñá‰ª∂‰∏≠ÁöÑ‰ª£Á†ÅÊÆµÔºàtext sectionÔºâ„ÄÇÂú® ELF Êñá‰ª∂‰∏≠Ôºå<code>.text</code> ËäÇÂå∫Â≠òÊîæÁöÑÊòØÂèØÊâßË°å‰ª£Á†Å</p>
</li>
<li>
<p><strong>0000000000000016</strong>Ôºå<strong>Â§ßÂ∞è</strong>ÔºöËøôË°®Á§∫ <code>main</code> ÂáΩÊï∞ÁöÑÂ§ßÂ∞èÊòØ <code>16</code> Â≠óËäÇÔºàÂçÅÂÖ≠ËøõÂà∂Ë°®Á§∫ <code>0x16</code>ÔºåÂç≥ 22 Â≠óËäÇÔºâ„ÄÇ</p>
</li>
<li>
<p><strong>main</strong>ÔºöËøôÊòØÁ¨¶Âè∑ÁöÑÂêçÁß∞„ÄÇËøôÈáåË°®Á§∫ÁöÑÊòØÁ®ãÂ∫èÁöÑÂÖ•Âè£ÂáΩÊï∞ <code>main</code>„ÄÇ</p>
</li>
</ol>
</blockquote>
<p>ÂêåÁêÜÔºåÊàë‰ª¨‰πüÂèØ‰ª•ÊâæÂà∞ÂÖ®Â±ÄÂèòÈáènum1ÁöÑÁ¨¶Âè∑‰ø°ÊÅØÔºåÂÖ∂‰∏≠<code>O</code> Ë°®Á§∫Á¨¶Âè∑ÊòØ <strong>ÂØπË±°</strong>Ôºå‰πüÂ∞±ÊòØËØ¥Ôºå<code>num1</code> ÊòØ‰∏Ä‰∏™Êï∞ÊçÆÂØπË±°ÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™ÂáΩÊï∞„ÄÇËøôÈÄöÂ∏∏ÊåáÁöÑÊòØÂèòÈáèÊàñÂ∏∏ÈáèÔºåËÄå‰∏çÊòØÊâßË°å‰ª£Á†ÅÁöÑÂáΩÊï∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="m">0000000000201010</span> g     O .data  <span class="m">0000000000000004</span>              num1
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËßÇÂØü‰∏äËø∞Á¨¶Âè∑‰ø°ÊÅØÔºåÊàë‰ª¨ÂèëÁé∞ÊòØÊ≤°Êúânum2Ëøô‰∏™Â±ÄÈÉ®ÂèòÈáèÁöÑÁ¨¶Âè∑‰ø°ÊÅØÁöÑÔºåËøô‰∏™Â±ÄÈÉ®ÂèòÈáèÁöÑÁîüÂëΩÂë®ÊúüÁî±Ê†àÊéßÂà∂ÁöÑÔºå‰∏çÂèÇ‰∏éÈìæÊé•ËøáÁ®ã</p>
<h2 id="Âä†ËΩΩÂÜÖÊ†∏">Âä†ËΩΩÂÜÖÊ†∏
</h2><h3 id="‰ª£Á†ÅÁõÆÂΩïÁªìÊûÑ">‰ª£Á†ÅÁõÆÂΩïÁªìÊûÑ
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ boot
</span></span><span class="line"><span class="cl">‚îÇ¬†¬† ‚îú‚îÄ‚îÄ include
</span></span><span class="line"><span class="cl">‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ boot.inc
</span></span><span class="line"><span class="cl">‚îÇ¬†¬† ‚îú‚îÄ‚îÄ loader.S
</span></span><span class="line"><span class="cl">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ mbr.S
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ lib
</span></span><span class="line"><span class="cl">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ kernel
</span></span><span class="line"><span class="cl">‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ main.c
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ Makefile
</span></span><span class="line"><span class="cl">‚îî‚îÄ‚îÄ start.sh
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Â∞ÜÂÜÖÊ†∏ËΩΩÂÖ•ÂÜÖÂ≠ò">Â∞ÜÂÜÖÊ†∏ËΩΩÂÖ•ÂÜÖÂ≠ò
</h3><p>ÂõûÂøÜÊàë‰ª¨‰πãÂâçÂä†ËΩΩmbrÁ®ãÂ∫èÂíåloaderÁ®ãÂ∫èÁöÑËøáÁ®ã</p>
<blockquote>
<ul>
<li>mbrÁ®ãÂ∫èÂõ∫ÂÆöÂú®Á£ÅÁõò0Âùó0ÊâáÂå∫ÔºåÂ§ßÂ∞èÂõ∫ÂÆö512BÔºåÊúÄÂêé‰∏§‰∏™Â≠óËäÇÂõ∫ÂÆöÊòØ0x55,0xaaÔºåÁî±BIOSÂºÄÂêØÂêéÂä†ËΩΩÂà∞ÂÜÖÂ≠òÁöÑ0x7c00‰ΩçÁΩÆÂ§ÑÊâßË°å</li>
<li>loaderÁ®ãÂ∫èÁî±Êàë‰ª¨Ëá™ÂÆö‰πâÂú®Á£ÅÁõò0Âùó2Âè∑ÊâáÂå∫ÔºåÂêåÊó∂Áî±Êàë‰ª¨ÂÜôÁöÑmbrÁ®ãÂ∫èÂ∞ÜÂÖ∂Âä†ËΩΩÂà∞0x900‰ΩçÁΩÆÂ§ÑÔºàÂèØÊâßË°å‰ª£Á†ÅÁöÑ‰ΩçÁΩÆÊòØ0xc00Ôºå‰∏≠Èó¥ÊòØ512Â≠óËäÇÁöÑGDTÂíå256Â≠óËäÇÁöÑÁâ©ÁêÜÂÜÖÂ≠òÂÆπÈáè‰ø°ÊÅØÔºåËøôÊÆµ0x300Â≠óËäÇÁöÑ‰ø°ÊÅØÊòØ‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠Âä†ËΩΩÂÜÖÊ†∏ÁöÑÂøÖË¶Å‰ø°ÊÅØÔºåÊòØ‰∏çÂèØÊâßË°åÁöÑÔºâ</li>
</ul>
</blockquote>
<p>Âõ†Ê≠§ÔºåÊú¨ËäÇÊàë‰ª¨Âä†ËΩΩÂÜÖÊ†∏Êñá‰ª∂‰πüÊòØÂêåÊ†∑ÁöÑËøáÁ®ãÔºå‰πüÈúÄË¶ÅÁî±loaderÂ∞ÜÂÜÖÊ†∏Êñá‰ª∂‰ªéÁ£ÅÁõòÁöÑÊüê‰∏™‰ΩçÁΩÆÂä†ËΩΩÂà∞ÂÜÖÂ≠òÁöÑÊüê‰∏™‰ΩçÁΩÆÔºå‰∫éÊòØÊàë‰ª¨ÂÆö‰πâ</p>
<blockquote>
<ul>
<li>ÂÜÖÊ†∏Êñá‰ª∂Âú®Á£ÅÁõòÁöÑ‰ΩçÁΩÆÊòØ0Âùó9Âè∑ÊâáÂå∫</li>
<li>Âä†ËΩΩÂà∞ÂÜÖÂ≠òÁöÑÁâ©ÁêÜ‰ΩçÁΩÆÊòØ0x70000</li>
</ul>
</blockquote>
<p>Âè¶Â§ñÊàë‰ª¨ÁöÑÂÜÖÊ†∏Âä†ËΩΩ‰ª£Á†ÅÊúâ‰ª•‰∏ãÁâπÁÇπ</p>
<blockquote>
<ul>
<li>Âú®‰øùÊä§Ê®°Âºè‰∏ãËøêË°åÔºå‰øùÊä§Ê®°ÂºèÊòØ32‰ΩçÁöÑÔºåÂõ†Ê≠§ÈúÄË¶Å‰øÆÊîπ‰πãÂâçÊàë‰ª¨Âä†ËΩΩloaderÁöÑ16‰ΩçÁ®ãÂ∫è</li>
<li>Âú®ÂàÜÈ°µÊú∫Âà∂ÂºÄÂêØ‰πãÂâçËøõË°åÂä†ËΩΩÔºåËøô‰∏ÄÁÇπÂπ∂ÈùûÂõ∫ÂÆöÔºåÂè™ÊòØÂú®ÂàÜÈ°µÊú∫Âà∂ÂºÄÂêØ‰πãÂâçÂä†ËΩΩÔºå0x70000Áõ¥Êé•Â∞±ÊòØÁâ©ÁêÜÂú∞ÂùÄÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•ÂÜÖÊ†∏Âä†ËΩΩÂà∞ËØ•Áâ©ÁêÜÂú∞ÂùÄÂ§Ñ</li>
</ul>
</blockquote>
<p>Ë¶ÅÂä†ËΩΩÂÜÖÊ†∏ÔºåÊàë‰ª¨È¶ñÂÖàÈúÄË¶ÅÂÜô‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂÜÖÊ†∏‰ª£Á†Å</p>
<p>/lib/kernel/main.c</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÊàë‰ª¨Âè™ÊòØÂÖàÂÜô‰∏ÄÊÆµÁÆÄÂçïÁöÑ‰ª£Á†Å‰ª•‰ΩúÊµãËØïÔºåÁúüÊ≠£ÁöÑÂÜÖÊ†∏‰ª£Á†ÅÊàë‰ª¨ÂêéÁª≠ÂÜçËøõË°åË°•ÂÖÖ</p>
<p>ÁºñËØëÂÜÖÊ†∏</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">gcc-4.4 <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/lib/kernel/main.c -c -m32 -o <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/bin/main.o
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈìæÊé•ÂÜÖÊ†∏</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ld -m elf_i386 -Ttext 0x00001500 -e main -o <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/bin/kernel.bin <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/bin/main.o
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>ËøôÈáåÊúâ‰∏Ä‰∏™Â∞èÊèíÊõ≤ÔºåÁî±‰∫éÁõÆÂâçÊàë‰ª¨‰ΩøÁî®ÁöÑÊìç‰ΩúÁ≥ªÁªü‰∏ÄËà¨ÈÉΩÊòØ64‰ΩçÁöÑÔºåÂõ†Ê≠§‰ΩøÁî®ÈªòËÆ§ÁöÑÁºñËØëÂô®ÁºñËØëÂá∫Êù•ÁöÑÁªìÊûúÈÉΩÊòØ64‰ΩçÁöÑ</p>
<p>ÊïÖËÄåÂú®ÊúÄÂêéÁöÑÁºñËØëÈò∂ÊÆµÈúÄË¶Å<strong>Èôç‰ΩégccÁâàÊú¨Ëá≥gcc-4.4</strong>ÔºåÂêåÊó∂‰ΩøÁî®-m32ÈÄâÈ°π‰ΩøÁºñËØëÂá∫Êù•ÁöÑÁªìÊûúÊòØ32‰ΩçÔºåÂê¶Âàô‰æø‰ºöÊä•Èîô</p>
<p>ÂÖ∑‰ΩìÊìç‰ΩúÂ¶Ç‰∏ã:</p>
<p>1.ÊâìÂºÄapt-getÊ∫ê</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> vim /etc/apt/sources.list
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¢ûÂä†Â¶Ç‰∏ãÂÜÖÂÆπ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">deb http://dk.archive.ubuntu.com/ubuntu/ trusty main universe
</span></span><span class="line"><span class="cl">deb http://dk.archive.ubuntu.com/ubuntu/ trusty-updates main universe
</span></span></code></pre></td></tr></table>
</div>
</div><p>2.Êõ¥Êñ∞aptÊ∫ê</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt-get update
</span></span></code></pre></td></tr></table>
</div>
</div><p>3.ÂÆâË£Ögcc-4.4</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt-get install g++-4.4
</span></span></code></pre></td></tr></table>
</div>
</div><p>4.Â¶ÇÊûúÊúÄÂêé‰ªçÊóßÊä•ÈîôÔºåÂàôÊâßË°å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt-get install libc6-dev-i386
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>Êé•‰∏ãÊù•Êàë‰ª¨ÂºÄÂßãÊ≠£ÂºèÂ∞Ü‰∏äËø∞ÁºñËØëÊàêÂäüÁöÑÂÜÖÊ†∏Êñá‰ª∂kernel.binÂä†ËΩΩÂà∞ÂÜÖÂ≠òÔºå‰ª•‰∏ãÊòØÂä†ËΩΩÂÜÖÊ†∏ÁöÑ‰ª£Á†Å</p>
<p>/boot/loader.S</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="c1">;------------- Âä†ËΩΩÂÜÖÊ†∏ ----------------</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Â∞ÜÂÜÖÊ†∏‰ªéÁ£ÅÁõòÁöÑ9Âè∑ÊâáÂå∫Âä†ËΩΩÁöÑÂÜÖÂ≠òÁöÑKERNEL_BIN_BASE_ADDRÂú∞ÂùÄÂ§Ñ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,</span><span class="nv">KERNEL_START_SECTOR</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ebx</span><span class="p">,</span><span class="nv">KERNEL_BIN_BASE_ADDR</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ecx</span><span class="p">,</span><span class="mi">200</span>
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">rd_disk_m_32</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª£Á†Å‰∏≠Áõ∏ÂÖ≥ÁöÑÂÆèÂ¶Ç‰∏ãÊâÄÁ§∫</p>
<p>/boot/include/boot.inc</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="c1">;----- ÂÆö‰πâÂÜÖÊ†∏Áõ∏ÂÖ≥ÂÆè -----</span>
</span></span><span class="line"><span class="cl">    <span class="no">KERNEL_BIN_BASE_ADDR</span><span class="kd"> equ</span> <span class="mh">0x70000</span>                <span class="c1">;ÂÜÖÊ†∏Êñá‰ª∂Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑ‰ΩçÁΩÆÔºå‰πüÂ∞±ÊòØÂåÖÂê´Êñá‰ª∂Â§¥ÂíåÁ®ãÂ∫èÊï∞ÊçÆÁöÑÂéüÂßãÂÜÖÊ†∏Êñá‰ª∂ÊöÇÊó∂Â≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑ‰ΩçÁΩÆ</span>
</span></span><span class="line"><span class="cl">                                                    <span class="c1">;Ê≥®ÊÑèÂÜÖÊ†∏Âä†ËΩΩÊòØÂú®ÂºÄÂêØÂàÜÈ°µÊú∫Âà∂‰πãÂâçËøõË°åÁöÑÔºåÂõ†Ê≠§ËØ•Âú∞ÂùÄÂπ∂‰∏çÊòØËôöÊãüÂú∞ÂùÄÔºåËÄåÊòØÁâ©ÁêÜÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;0Âè∑ÊâáÂå∫Â≠òÊîæmbrÔºå2Âè∑~4Âè∑ÊâáÂå∫Â≠òÊîæloaderÔºå‰∏∫ÈÅøÂÖçÂ∞ÜÊù•Êâ©Â§ßloaderÔºåÂ∞ÜÂÜÖÊ†∏Â≠òÊîæÂú®9Âè∑ÊâáÂå∫</span>
</span></span><span class="line"><span class="cl">    <span class="no">KERNEL_START_SECTOR</span><span class="kd"> equ</span> <span class="mh">0x9</span>                     <span class="c1">;ÂÜÖÊ†∏Âú®Á£ÅÁõòÁöÑËµ∑ÂßãÊâáÂå∫</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂêåmbrÂä†ËΩΩloader‰∏ÄÊ†∑ÔºåÊàë‰ª¨‰ΩøÁî®ÂÜôÂ•ΩÁöÑÂáΩÊï∞Â∞ÜÂÜÖÊ†∏Êñá‰ª∂‰ªéÁ£ÅÁõòÂä†ËΩΩÂà∞ÂÜÖÂ≠òÊåáÂÆö‰ΩçÁΩÆÔºåÂè™ÊòØËøôÈáåÊòØÂú®32‰Ωç‰øùÊä§Ê®°Âºè‰∏ãËøêË°åÔºåÂõ†Ê≠§ÈúÄË¶ÅÁÆÄÂçï‰øÆÊîπ‰∏Ä‰∏ã‰ª£Á†ÅÔºåÂ¶Ç‰∏ãÊâÄÁ§∫</p>
<p>/boot/loader.S</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="c1">; ------ 32‰ΩçÊ®°Âºè‰∏ã‰ªéÁ£ÅÁõò‰∏≠Âä†ËΩΩÊñá‰ª∂Âà∞ÂÜÖÂ≠ò ------</span>
</span></span><span class="line"><span class="cl"><span class="nl">rd_disk_m_32:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;ÂèÇÊï∞Ôºö</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; eax=LBAÊâáÂå∫Âè∑</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; ebx=Â∞ÜÊï∞ÊçÆÂÜôÂÖ•ÁöÑÂÜÖÂ≠òÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; ecx=ËØªÂÖ•ÁöÑÊâáÂå∫Êï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">esi</span><span class="p">,</span><span class="nb">eax</span>	                                        <span class="c1">;Â§á‰ªΩeax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">di</span><span class="p">,</span><span class="nb">cx</span>		                                    <span class="c1">;Â§á‰ªΩcx</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;ËØªÂÜôÁ°¨Áõò:</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Á¨¨1Ê≠•ÔºöÈÄâÊã©ÁâπÂÆöÈÄöÈÅìÁöÑÂØÑÂ≠òÂô®ÔºåËÆæÁΩÆË¶ÅËØªÂèñÁöÑÊâáÂå∫Êï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f2</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">al</span><span class="p">,</span><span class="nb">cl</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>                                           <span class="c1">;ËØªÂèñÁöÑÊâáÂå∫Êï∞</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">esi</span>	                                        <span class="c1">;ÊÅ¢Â§çax</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Á¨¨2Ê≠•ÔºöÂú®ÁâπÂÆöÈÄöÈÅìÂØÑÂ≠òÂô®‰∏≠ÊîæÂÖ•Ë¶ÅËØªÂèñÊâáÂå∫ÁöÑÂú∞ÂùÄÔºåÂ∞ÜLBAÂú∞ÂùÄÂ≠òÂÖ•0x1f3 ~ 0x1f6</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;LBAÂú∞ÂùÄ7~0‰ΩçÂÜôÂÖ•Á´ØÂè£0x1f3</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f3</span>                       
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>                          
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;LBAÂú∞ÂùÄ15~8‰ΩçÂÜôÂÖ•Á´ØÂè£0x1f4</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">cl</span><span class="p">,</span><span class="mi">8</span>
</span></span><span class="line"><span class="cl">    <span class="nf">shr</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">cl</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f4</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;LBAÂú∞ÂùÄ23~16‰ΩçÂÜôÂÖ•Á´ØÂè£0x1f5</span>
</span></span><span class="line"><span class="cl">    <span class="nf">shr</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">cl</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f5</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nf">shr</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">cl</span>
</span></span><span class="line"><span class="cl">    <span class="nf">and</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0x0f</span>	                                        <span class="c1">;lbaÁ¨¨24~27‰Ωç</span>
</span></span><span class="line"><span class="cl">    <span class="nf">or</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0xe0</span>	                                        <span class="c1">; ËÆæÁΩÆ7ÔΩû4‰Ωç‰∏∫1110,Ë°®Á§∫lbaÊ®°Âºè</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f6</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Á¨¨3Ê≠•ÔºöÂêë0x1f7Á´ØÂè£ÂÜôÂÖ•ËØªÂëΩ‰ª§Ôºå0x20 </span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f7</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0x20</span>                        
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Á¨¨4Ê≠•ÔºöÊ£ÄÊµãÁ°¨ÁõòÁä∂ÊÄÅ</span>
</span></span><span class="line"><span class="cl"><span class="nl">.not_ready:</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Âêå‰∏ÄÁ´ØÂè£ÔºåÂÜôÊó∂Ë°®Á§∫ÂÜôÂÖ•ÂëΩ‰ª§Â≠óÔºåËØªÊó∂Ë°®Á§∫ËØªÂÖ•Á°¨ÁõòÁä∂ÊÄÅ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">nop</span>
</span></span><span class="line"><span class="cl">    <span class="nf">in</span> <span class="nb">al</span><span class="p">,</span><span class="nb">dx</span>
</span></span><span class="line"><span class="cl">    <span class="nf">and</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0x88</span>	                                        <span class="c1">;Á¨¨4‰Ωç‰∏∫1Ë°®Á§∫Á°¨ÁõòÊéßÂà∂Âô®Â∑≤ÂáÜÂ§áÂ•ΩÊï∞ÊçÆ‰º†ËæìÔºåÁ¨¨7‰Ωç‰∏∫1Ë°®Á§∫Á°¨ÁõòÂøô</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cmp</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0x08</span>
</span></span><span class="line"><span class="cl">    <span class="nf">jnz</span> <span class="nv">.not_ready</span>	                                    <span class="c1">;Ëã•Êú™ÂáÜÂ§áÂ•ΩÔºåÁªßÁª≠Á≠â„ÄÇ</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Á¨¨5Ê≠•Ôºö‰ªé0x1f0Á´ØÂè£ËØªÊï∞ÊçÆ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ax</span><span class="p">,</span> <span class="nb">di</span>                                          <span class="c1">;diÂΩì‰∏≠Â≠òÂÇ®ÁöÑÊòØË¶ÅËØªÂèñÁöÑÊâáÂå∫Êï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span> <span class="mi">256</span>                                         <span class="c1">;ÊØè‰∏™ÊâáÂå∫512Â≠óËäÇÔºå‰∏ÄÊ¨°ËØªÂèñ‰∏§‰∏™Â≠óËäÇÔºåÊâÄ‰ª•‰∏Ä‰∏™ÊâáÂå∫Â∞±Ë¶ÅËØªÂèñ256Ê¨°Ôºå‰∏éÊâáÂå∫Êï∞Áõ∏‰πòÔºåÂ∞±Á≠âÂæóÂà∞ÊÄªËØªÂèñÊ¨°Êï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mul</span> <span class="nb">dx</span>                                              <span class="c1">;8‰Ωç‰πòÊ≥ï‰∏é16‰Ωç‰πòÊ≥ïÁü•ËØÜÊü•Áúã‰π¶p133,Ê≥®ÊÑèÔºö16‰Ωç‰πòÊ≥ï‰ºöÊîπÂèòdxÁöÑÂÄºÔºÅÔºÅÔºÅÔºÅ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">cx</span><span class="p">,</span> <span class="nb">ax</span>	                                        <span class="c1">; ÂæóÂà∞‰∫ÜË¶ÅËØªÂèñÁöÑÊÄªÊ¨°Êï∞ÔºåÁÑ∂ÂêéÂ∞ÜËøô‰∏™Êï∞Â≠óÊîæÂÖ•cx‰∏≠</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span> <span class="mh">0x1f0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.go_on_read:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">in</span> <span class="nb">ax</span><span class="p">,</span><span class="nb">dx</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nb">ebx</span><span class="p">],</span><span class="nb">ax</span>                                        <span class="c1">;‰∏érd_disk_m_16Áõ∏ÊØîÔºåÂ∞±ÊòØÊääËøô‰∏§Âè•ÁöÑbxÊîπÊàê‰∫Üebx</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">ebx</span><span class="p">,</span><span class="mi">2</span>		        
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; Áî±‰∫éÂú®ÂÆûÊ®°Âºè‰∏ãÂÅèÁßªÂú∞ÂùÄ‰∏∫16‰Ωç,ÊâÄ‰ª•Áî®bxÂè™‰ºöËÆøÈóÆÂà∞0~FFFFhÁöÑÂÅèÁßª„ÄÇ</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; loaderÁöÑÊ†àÊåáÈíà‰∏∫0x900,bx‰∏∫ÊåáÂêëÁöÑÊï∞ÊçÆËæìÂá∫ÁºìÂÜ≤Âå∫,‰∏î‰∏∫16‰ΩçÔºå</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; Ë∂ÖËøá0xffffÂêé,bxÈÉ®ÂàÜ‰ºö‰ªé0ÂºÄÂßã,ÊâÄ‰ª•ÂΩìË¶ÅËØªÂèñÁöÑÊâáÂå∫Êï∞ËøáÂ§ß,ÂæÖÂÜôÂÖ•ÁöÑÂú∞ÂùÄË∂ÖËøábxÁöÑËåÉÂõ¥Êó∂Ôºå</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ‰ªéÁ°¨Áõò‰∏äËØªÂá∫ÁöÑÊï∞ÊçÆ‰ºöÊää0x0000~0xffffÁöÑË¶ÜÁõñÔºå</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÈÄ†ÊàêÊ†àË¢´Á†¥Âùè,ÊâÄ‰ª•retËøîÂõûÊó∂,ËøîÂõûÂú∞ÂùÄË¢´Á†¥Âùè‰∫Ü,Â∑≤Áªè‰∏çÊòØ‰πãÂâçÊ≠£Á°ÆÁöÑÂú∞ÂùÄ,</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÊïÖÁ®ãÂ∫èÂá∫‰ºöÈîô,‰∏çÁü•ÈÅì‰ºöË∑ëÂà∞Âì™ÈáåÂéª„ÄÇ</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÊâÄ‰ª•Êîπ‰∏∫ebx‰ª£ÊõøbxÊåáÂêëÁºìÂÜ≤Âå∫,ËøôÊ†∑ÁîüÊàêÁöÑÊú∫Âô®Á†ÅÂâçÈù¢‰ºöÊúâ0x66Âíå0x67Êù•ÂèçËΩ¨„ÄÇ</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; 0X66Áî®‰∫éÂèçËΩ¨ÈªòËÆ§ÁöÑÊìç‰ΩúÊï∞Â§ßÂ∞è! 0X67Áî®‰∫éÂèçËΩ¨ÈªòËÆ§ÁöÑÂØªÂùÄÊñπÂºè.</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; cpuÂ§Ñ‰∫é16‰ΩçÊ®°ÂºèÊó∂,‰ºöÁêÜÊâÄÂΩìÁÑ∂ÁöÑËÆ§‰∏∫Êìç‰ΩúÊï∞ÂíåÂØªÂùÄÈÉΩÊòØ16‰Ωç,Â§Ñ‰∫é32‰ΩçÊ®°ÂºèÊó∂,</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ‰πü‰ºöËÆ§‰∏∫Ë¶ÅÊâßË°åÁöÑÊåá‰ª§ÊòØ32‰Ωç.</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÂΩìÊàë‰ª¨Âú®ÂÖ∂‰∏≠‰ªªÊÑèÊ®°Âºè‰∏ãÁî®‰∫ÜÂè¶Â§ñÊ®°ÂºèÁöÑÂØªÂùÄÊñπÂºèÊàñÊìç‰ΩúÊï∞Â§ßÂ∞è(Âßë‰∏îËÆ§‰∏∫16‰ΩçÊ®°ÂºèÁî®16‰ΩçÂ≠óËäÇÊìç‰ΩúÊï∞Ôºå</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; 32‰ΩçÊ®°Âºè‰∏ãÁî®32Â≠óËäÇÁöÑÊìç‰ΩúÊï∞)Êó∂,ÁºñËØëÂô®‰ºöÂú®Êåá‰ª§ÂâçÂ∏ÆÊàë‰ª¨Âä†‰∏ä0x66Êàñ0x67Ôºå</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ‰∏¥Êó∂ÊîπÂèòÂΩìÂâçcpuÊ®°ÂºèÂà∞Âè¶Â§ñÁöÑÊ®°Âºè‰∏ã.</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÂÅáËÆæÂΩìÂâçËøêË°åÂú®16‰ΩçÊ®°Âºè,ÈÅáÂà∞0X66Êó∂,Êìç‰ΩúÊï∞Â§ßÂ∞èÂèò‰∏∫32‰Ωç.</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÂÅáËÆæÂΩìÂâçËøêË°åÂú®32‰ΩçÊ®°Âºè,ÈÅáÂà∞0X66Êó∂,Êìç‰ΩúÊï∞Â§ßÂ∞èÂèò‰∏∫16‰Ωç.</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÂÅáËÆæÂΩìÂâçËøêË°åÂú®16‰ΩçÊ®°Âºè,ÈÅáÂà∞0X67Êó∂,ÂØªÂùÄÊñπÂºèÂèò‰∏∫32‰ΩçÂØªÂùÄ</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÂÅáËÆæÂΩìÂâçËøêË°åÂú®32‰ΩçÊ®°Âºè,ÈÅáÂà∞0X67Êó∂,ÂØªÂùÄÊñπÂºèÂèò‰∏∫16‰ΩçÂØªÂùÄ.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">loop</span> <span class="nv">.go_on_read</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ret</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Ëß£ÊûêÂÜÖÊ†∏Â§¥Êñá‰ª∂Âä†ËΩΩÂÜÖÊ†∏Êò†ÂÉè">Ëß£ÊûêÂÜÖÊ†∏Â§¥Êñá‰ª∂ÔºåÂä†ËΩΩÂÜÖÊ†∏Êò†ÂÉè
</h3><p>ÂÜÖÊ†∏Êò†ÂÉèÔºåÂÖ∂ÂÆûÂ∞±ÊòØËß£ÊûêÂÜÖÊ†∏ÁöÑelfÂ§¥‰πãÂêéÔºåÂ∞ÜÂÜÖÊ†∏Êñá‰ª∂ÁöÑÁ®ãÂ∫è‰ª£Á†ÅÂíåÁ®ãÂ∫èÊï∞ÊçÆÊäΩÂá∫Êù•ÔºåÁÑ∂ÂêéÊîæÂà∞ÂÜÖÂ≠òÁöÑÊåáÂÆö‰ΩçÁΩÆÂ§ÑÊâßË°åÔºå‰πãÊâÄ‰ª•ËøôÊ†∑ÂÅöÊòØÂõ†‰∏∫elfÂ§¥Êñá‰ª∂Âè™ÊòØËÆ∞ÂΩïÁ®ãÂ∫è‰ø°ÊÅØÁöÑÁªìÊûÑÂåñ‰ø°ÊÅØÔºå‰∏çËÉΩÊâßË°åÔºå‰ΩÜÊòØËÆ°ÁÆóÊú∫‰∏çÁü•ÈÅìËøô‰∏ÄÁÇπÔºåÈúÄË¶ÅÊàë‰ª¨ÊâßË°åËøô‰∏ÄÊ≠•Êìç‰Ωú</p>
<blockquote>
<p>Ê≥®ÊÑèÔºåËß£ÊûêÂÜÖÊ†∏Â§¥Êñá‰ª∂ÁöÑÂ∑•‰ΩúÊòØÂú®ÂºÄÂêØÂàÜÈ°µÊú∫Âà∂ÂêéËøõË°åÁöÑÔºåÂõ†‰∏∫ÂÜÖÊ†∏Â∞ÜÊù•Ë¶ÅÂÅöÂàÜÈ°µÊú∫Âà∂‰∏ãÂ∑•‰ΩúÔºåÂõ†Ê≠§Êàë‰ª¨Áõ¥Êé•Âú®ÂàÜÈ°µÊú∫Âà∂‰∏ãÂä†ËΩΩÂÜÖÊ†∏Êò†ÂÉè</p>
</blockquote>
<p>ÈÇ£‰πàÈóÆÈ¢òÊù•‰∫ÜÔºåÊàë‰ª¨Ë¶ÅÂ∞ÜÂÜÖÊ†∏Êò†ÂÉèÂä†ËΩΩÂà∞ÂÜÖÂ≠òÁöÑÂì™ÈáåÂë¢Ôºü</p>
<blockquote>
<ul>
<li>ÂÖ≥‰∫éËøô‰∏™ÈóÆÈ¢òÔºåÊàë‰ª¨Áü•ÈÅìÔºåÂ∞ÜÊù•<strong>Êàë‰ª¨ÁöÑÂÜÖÊ†∏‰ºöË∂äÊù•Ë∂äÂ§ßÔºåËÄåÊàë‰ª¨ÁöÑÂÜÖÊ†∏Áâ©ÁêÜÁ©∫Èó¥Âú®‰Ωé1MÂ≠óËäÇËøôÂùóÂå∫ÂüüÂÜÖ</strong>ÔºåÂõ†Ê≠§Êàë‰ª¨<strong>Â∞ΩÈáèËÆ©Êàë‰ª¨ÁöÑÂÜÖÊ†∏Êò†ÂÉèÊîæÁΩÆÂà∞ÂÜÖÂ≠ò‰ΩéÂ≠óËäÇ‰ΩçÁΩÆÔºåËøôÊ†∑Â∞ÜÊù•ÁöÑÂÜÖÊ†∏ÊâçÊúâÂèØ‰ΩôÁ©∫Èó¥Â¢ûÈïø</strong></li>
<li>Âè¶‰∏ÄÊñπÈù¢ÔºåÊàë‰ª¨Áü•ÈÅìÔºåÊàë‰ª¨ÁöÑloaderÁ®ãÂ∫èÂ∑≤ÁªèÂç†ÊçÆÂú®‰∫ÜÂÜÖÂ≠òÁöÑ0x900‰ΩçÁΩÆÔºåÂÖ∂‰∏≠0x900 ~ 0xb00ÊòØGDTÁöÑ‰ø°ÊÅØÔºå0xb00 ~ 0xc00ÊòØÂ≠òÊîæÁöÑÁâ©ÁêÜÂÜÖÂ≠òÂÆπÈáè‰ø°ÊÅØÔºåËøô‰∫õ‰ø°ÊÅØÈÉΩ‰∏çËÉΩË¢´Ë¶ÜÁõñÔºåÂõ†Ê≠§<strong>Êàë‰ª¨ÁöÑÂÜÖÊ†∏Êò†ÂÉè‰∏çËÉΩË¶ÜÁõñÊéâloader</strong></li>
<li>‰∫éÊòØ‰πéÔºå<strong>ÂÅáËÆæÊàë‰ª¨loaderÂ§ßÂ∞èÊúÄÂ§ßÊòØ2000BÔºåÂàô0x900+2000=0x10d0ÔºåÂêë‰∏äÂèñÊï¥Â∞±Â∞ÜÂÜÖÊ†∏ÁöÑÁâ©ÁêÜÂä†ËΩΩÂú∞ÂùÄÈÄâ‰∏∫0x1500</strong></li>
<li>ËØªËÄÖ‰ºöÂèëÁé∞Ôºå‰πãÂâçÊàë‰ª¨ÁªôÂÜÖÊ†∏Êñá‰ª∂Âä†ËΩΩÁöÑ‰ΩçÁΩÆÁöÑ0x70000ÔºåËÄåÊàë‰ª¨ÁöÑÂÜÖÊ†∏Êò†ÂÉèÊòØÂú®0x1500ÔºåÂ¶ÇÊûúÂÜÖÊ†∏Êò†ÂÉèË¶ÜÁõñÊéâÂéüÂßãÂÜÖÊ†∏Êñá‰ª∂ÊÄé‰πàÂäûÔºåËøô‰∏ÄÁÇπ‰∏çÂøÖÊãÖÂøÉÔºåÂõ†‰∏∫ÂÜÖÊ†∏Êñá‰ª∂Âú®Ë¢´ÊäΩÁ¶ªÂá∫Êù•ÂÜÖÊ†∏Êò†ÂÉè‰πãÂêéÂ∞±Ê≤°Áî®‰∫ÜÔºåÂõ†Ê≠§Âç≥‰ΩøË¶ÜÁõñÊéâ‰πüÊ≤°ÂÖ≥Á≥ª</li>
</ul>
</blockquote>
<p>Áªº‰∏äÔºåÊàë‰ª¨ÊúâÂ¶Ç‰∏ãÂÆö‰πâ</p>
<p>/boot/include/boot.inc</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl">    <span class="c1">;loaderÁöÑÁâ©ÁêÜÂä†ËΩΩÂú∞ÂùÄÊòØ0x900,ÂÅáËÆæloaderÁöÑÊñá‰ª∂Â§ßÂ∞èÊúÄÂ§ß‰∏∫2000B,Âàô0x900+2000=0x10d0Ôºå</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;Âêë‰∏äÂèñÊï¥Â∞±Â∞ÜÂÜÖÊ†∏ÁöÑÁâ©ÁêÜÂä†ËΩΩÂú∞ÂùÄÈÄâ‰∏∫0x1500</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;Áî±‰∫éÊàë‰ª¨Â∞ÜÊìç‰ΩúÁ≥ªÁªüÁöÑËôöÊãüÂú∞ÂùÄÁ©∫Èó¥ÂàíÂàÜ‰∏∫3GB~4GB</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;Âõ†Ê≠§ÂÜÖÊ†∏ÁöÑËôöÊãüÂä†ËΩΩÂú∞ÂùÄÂ∞±Êàê‰∫Ü0xc0000000+0x1500=0xc0001500</span>
</span></span><span class="line"><span class="cl">    <span class="no">KERNEL_ENTRY_POINT</span><span class="kd"> equ</span> <span class="mh">0xc0001500</span>               <span class="c1">;ÂÜÖÊ†∏ÂèØÊâßË°å‰ª£Á†ÅÔºàÂÜÖÊ†∏Êò†ÂÉèÔºâÁöÑËôöÊãüÂÖ•Âè£Âú∞ÂùÄ</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Ê≥®ÊÑèÔºå<strong><code>0xc0001500</code>Ëøô‰∏™ÂÜÖÊ†∏Êò†ÂÉèÁöÑËôöÊãüÂÖ•Âè£Âú∞ÂùÄÊòØÁî±gcc-4.4ÁºñËØëÂô®Áî®ÈÄâÈ°π<code>-Ttext 0x00001500</code>ÊåáÂÆöÁöÑ</strong></p>
</blockquote>
<p>Âè¶Â§ñÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÊ∑ªÂä†‰∏ÄÊÆµÂÆèÂÆö‰πâ‰ø°ÊÅØÔºåÂú®ÊèêÂèñelfÂ§¥‰ø°ÊÅØÊó∂‰ΩøÁî®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">;-----  Á®ãÂ∫èÊÆµÁöÑÁ±ªÂûãÂÆö‰πâ  ---------
</span></span><span class="line"><span class="cl">    PT_NULL equ 0
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êúâ‰∫Ü‰ª•‰∏äÂáÜÂ§áÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Ê≠£ÂºèÂä†ËΩΩÂÜÖÊ†∏Êò†ÂÉè‰∫Ü</p>
<p>/boot/loader.S</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="c1">;------------- ËøõÂÖ•ÂÜÖÊ†∏ÂáΩÊï∞ ----------------</span>
</span></span><span class="line"><span class="cl"><span class="nl">enter_kernel:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">kernel_init</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">esp</span><span class="p">,</span><span class="mh">0xc009f000</span>
</span></span><span class="line"><span class="cl">    <span class="nf">jmp</span> <span class="nv">KERNEL_ENTRY_POINT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">kernel_init:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">eax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">ebx</span><span class="p">,</span><span class="nb">ebx</span>                             <span class="c1">;ËÆ∞ÂΩïÁ®ãÂ∫èÂ§¥Ë°®(ÊÆµ)Âú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">ecx</span><span class="p">,</span><span class="nb">ecx</span>                             <span class="c1">;ËÆ∞ÂΩïÁ®ãÂ∫èÂ§¥Ë°®(ÊÆµÂ§¥Ë°®)‰∏≠Á®ãÂ∫èÂ§¥Êï∞Èáè</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">edx</span><span class="p">,</span><span class="nb">edx</span>                             <span class="c1">;ËÆ∞ÂΩïÁ®ãÂ∫èÂ§¥Ë°®‰∏≠ÊØè‰∏™Êù°ÁõÆÁöÑÂ§ßÂ∞è</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,[</span><span class="nv">KERNEL_BIN_BASE_ADDR</span><span class="o">+</span><span class="mi">42</span><span class="p">]</span>        <span class="c1">;42Â≠óËäÇÂ§ÑÊòØe_phentsizeÔºåÂç≥Á®ãÂ∫èÂ§¥‰∏≠ÊØè‰∏™Êù°ÁõÆÁöÑÂ§ßÂ∞è</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ebx</span><span class="p">,[</span><span class="nv">KERNEL_BIN_BASE_ADDR</span><span class="o">+</span><span class="mi">28</span><span class="p">]</span>       <span class="c1">;28Â≠óËäÇÂ§ÑÊòØe_phoffÔºåÂç≥Á®ãÂ∫èÂ§¥Ë°®ÁöÑÂÅèÁßª</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">ebx</span><span class="p">,</span><span class="nv">KERNEL_BIN_BASE_ADDR</span>            <span class="c1">;Á®ãÂ∫èÂ§¥Ë°®ÁöÑÂÅèÁßªÂä†‰∏äÂÜÖÊ†∏Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑËµ∑ÂßãÂú∞ÂùÄÔºåÂ∞±ÊòØÁ®ãÂ∫èÂ§¥Ë°®ÁöÑËµ∑ÂßãÁâ©ÁêÜÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">cx</span><span class="p">,[</span><span class="nv">KERNEL_BIN_BASE_ADDR</span><span class="o">+</span><span class="mi">44</span><span class="p">]</span>        <span class="c1">;44Â≠óËäÇÂ§ÑÊòØe_phnumÔºåÂç≥Á®ãÂ∫èÂ§¥Ë°®(ÊÆµÂ§¥Ë°®)‰∏≠Á®ãÂ∫èÂ§¥Êï∞Èáè</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ÈÅçÂéÜÊÆµÂ§¥Ë°®ÔºåÂèñÂá∫Á®ãÂ∫è‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÊÆµÔºåÂ∞ÜÂÖ∂Êã∑Ë¥ùÂà∞ÂØπÂ∫îÁöÑËôöÊãüÂú∞ÂùÄÁ©∫Èó¥‰∏≠</span>
</span></span><span class="line"><span class="cl"><span class="nl">.each_segment:</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Ê£ÄÊü•ÊÆµÂ§¥Ë°®‰∏≠ÁöÑÊÆµÂ§¥ÊòØ‰ºöÂê¶ÊòØÁ©∫ÊÆµ(PT_NULL)ÔºåÂ¶ÇÊûú‰∏çÊòØÂ∞±Â∞ÜËØ•ÊÆµÊã∑Ë¥ùÂà∞ÂØπÂ∫îÂå∫ÂüüÔºåÂê¶ÂàôÂ∞±ÁªßÁª≠ÈÅçÂéÜ‰∏ã‰∏Ä‰∏™ÊÆµÂ§¥</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cmp</span> <span class="kt">byte</span> <span class="p">[</span><span class="nb">ebx</span><span class="o">+</span><span class="mi">0</span><span class="p">],</span><span class="nv">PT_NULL</span>                <span class="c1">;ÊØîËæÉp_typeÊòØÂê¶Á≠â‰∫éPT_NULLÔºåËã•Áõ∏Á≠âËØ¥ÊòéÁ®ãÂ∫èÂ§¥Êú™‰ΩøÁî®</span>
</span></span><span class="line"><span class="cl">    <span class="nf">je</span> <span class="nv">.PTNULL</span>                              <span class="c1">;Ëã•Áõ∏Á≠âÂàôË∑≥ËΩ¨Âà∞.PTNULL</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;‰∏∫ÂáΩÊï∞memcpy(dst,src,size)ÂéãÂÖ•ÂèÇÊï∞ÔºåÂèÇÊï∞‰æùÊ¨°‰ªéÂè≥ÂêëÂ∑¶ÂéãÂÖ•ÔºåËøôÊ†∑ÂáΩÊï∞Â∞±ÂèØ‰ª•‰ªéÂ∑¶Âà∞Âè≥ÂèñÂá∫ÂèÇÊï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="kt">dword</span> <span class="p">[</span><span class="nb">ebx</span><span class="o">+</span><span class="mi">16</span><span class="p">]</span>                     <span class="c1">;ÂÆûÂèÇsizeÔºåÁ®ãÂ∫èÂ§¥Ë°®ÂÅèÁßª16Â≠óËäÇÁöÑÂú∞Êñπp_fileszÔºåÊú¨ÊÆµÂú®Êñá‰ª∂ÂÜÖÁöÑÂ§ßÂ∞è</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="nl">.PTNULL:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">ebx</span><span class="p">,</span><span class="nb">edx</span>                             <span class="c1">;ÊåáÂêë‰∏ã‰∏Ä‰∏™ÊÆµÂ§¥</span>
</span></span><span class="line"><span class="cl">    <span class="nf">loop</span> <span class="nv">.each_segment</span>                      <span class="c1">;ÁªßÁª≠ÈÅçÂéÜÊÆµÂ§¥Ë°®</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ret</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ÈÄêÂ≠óËäÇÊã∑Ë¥ùÂáΩÊï∞ÔºåÂ∞ÜesiÊåáÂêëÁöÑÂÜÖÂ≠òÂå∫ÂüüÁöÑsize‰∏™Â≠óËäÇÊã∑Ë¥ùÂà∞ediÊåáÂêëÁöÑÂå∫Âüü</span>
</span></span><span class="line"><span class="cl"><span class="nl">mem_cpy:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cld</span>                                    <span class="c1">;ÊåáÊòéÊã∑Ë¥ùÊó∂esi‰∏éediÁöÑÂ¢ûÈïøÊñπÂêëÊòØÂêë‰∏äÁöÑ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nb">ebp</span>                               <span class="c1">;‰øùÂ≠òebp</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ebp</span><span class="p">,</span><span class="nb">esp</span>                            <span class="c1">;Â∞ÜespÊåáÂêëebp</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nb">ecx</span>                               <span class="c1">;repÊåá‰ª§‰ºöÁî®Âà∞ecxÁöÑÂæ™ÁéØËÆ°Êï∞ÔºåËÄåÂ§ñÂ±ÇÂáΩÊï∞‰πüÁî®Âà∞‰∫ÜecxÁöÑÂÄºÔºå</span>
</span></span><span class="line"><span class="cl">                                           <span class="c1">;Âõ†Ê≠§Ê≠§Â§ÑÈúÄË¶ÅÂ∞ÜÂ§ñÂ±ÇÂáΩÊï∞ÁöÑecxÁöÑÂÄºËøõË°åÂ§á‰ªΩ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">edi</span><span class="p">,[</span><span class="nb">ebp</span><span class="o">+</span><span class="mi">8</span><span class="p">]</span>                        <span class="c1">;ÂèÇÊï∞dst</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">esi</span><span class="p">,[</span><span class="nb">ebp</span><span class="o">+</span><span class="mi">12</span><span class="p">]</span>                       <span class="c1">;ÂèÇÊï∞src</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ecx</span><span class="p">,[</span><span class="nb">ebp</span><span class="o">+</span><span class="mi">16</span><span class="p">]</span>                       <span class="c1">;ÂèÇÊï∞size</span>
</span></span><span class="line"><span class="cl">    <span class="nf">rep</span> <span class="nv">movsb</span>                              <span class="c1">;rep(repeat)Êåá‰ª§ÔºåÈáçÂ§çÊâßË°åmovsbÊåá‰ª§</span>
</span></span><span class="line"><span class="cl">                                           <span class="c1">;movsbÊåá‰ª§ÔºåsË°®Á§∫stringÔºåbË°®Á§∫byteÔºå</span>
</span></span><span class="line"><span class="cl">                                           <span class="c1">;Âç≥Â∞ÜesiÊåáÂêëÁöÑÂÜÖÂ≠òÊã∑Ë¥ù‰∏Ä‰∏™Â≠óËäÇÁªôediÊåáÂêëÁöÑÂÜÖÂ≠ò</span>
</span></span><span class="line"><span class="cl">                                           <span class="c1">;Âõ†Ê≠§Êú¨Êù°Êåá‰ª§Ë°®Á§∫ÈÄêÂ≠óËäÇÊã∑Ë¥ùÔºåÊã∑Ë¥ùÁöÑÂ≠óËäÇ‰∏™Êï∞‰∏∫ecxÁöÑÂÄº</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="nb">ecx</span>                                <span class="c1">;ÂèñÂá∫Â§á‰ªΩÁöÑÂÄº</span>
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="nb">ebp</span>                                <span class="c1">;ËøîÂõû‰∏äÂ±ÇÂáΩÊï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ret</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª£Á†ÅÈÄªËæëÂæàÁÆÄÂçïÔºö</p>
<blockquote>
<ol>
<li>‰ªéelfÂ§¥‰∏≠ËØªÂèñÁ®ãÂ∫èÂ§¥Ë°®ÁöÑ‰ø°ÊÅØ
<ul>
<li>Á®ãÂ∫èÂ§¥Ë°®ÁöÑÂàùÂßãÂÅèÁßª</li>
<li>Á®ãÂ∫èÂ§¥Ë°®‰∏≠Êù°ÁõÆÔºàËÆ∞ÂΩïÊÆµÁöÑ‰ø°ÊÅØÔºâÁöÑÊï∞Èáè</li>
<li>Á®ãÂ∫èÂ§¥Ë°®‰∏≠ÊØè‰∏™Êù°ÁõÆÁöÑÂ§ßÂ∞è</li>
</ul>
</li>
<li>ËØªÂèñÂà∞Á®ãÂ∫èÂ§¥Ë°®ÁöÑ‰ø°ÊÅØÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÂÉèÈÅçÂéÜÊï∞ÁªÑ‰∏ÄÊ†∑ÈÅçÂéÜÁ®ãÂ∫èÂ§¥Ë°®ÔºåÂèñÂá∫Á®ãÂ∫èÂ§¥Ë°®‰∏≠ÁöÑÊØè‰∏™Á®ãÂ∫èÂ§¥Ôºà‰πüÂ∞±ÊòØÊÆµÂ§¥ÔºâÁöÑ‰ø°ÊÅØ
<ul>
<li>Êú¨ÊÆµÂú®Êñá‰ª∂ÂÜÖÁöÑÂ§ßÂ∞è</li>
<li>Êú¨ÊÆµÂú®Êñá‰ª∂ÂÜÖÁöÑËµ∑ÂßãÂÅèÁßª</li>
<li>Êú¨ÊÆµÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑËµ∑ÂßãËôöÊãüÂú∞ÂùÄ</li>
</ul>
</li>
<li>Â∞ÜÊÆµÂ§çÂà∂Âà∞ÂÜÖÂ≠òÊåáÂÆöÁöÑËôöÊãüÂú∞ÂùÄÂ§Ñ</li>
</ol>
</blockquote>
<p>‰ª•‰∏ãÊòØÂÆåÊï¥‰ª£Á†Å</p>
<p>/boot/include/boot.inc</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="c1">;----- loader and kernel -----</span>
</span></span><span class="line"><span class="cl">    <span class="no">LOADER_BASE_ADDR</span><span class="kd"> equ</span> <span class="mh">0x900</span>                      <span class="c1">;loaderÂú®ÂÜÖÂ≠ò‰∏≠‰ΩçÁΩÆ</span>
</span></span><span class="line"><span class="cl">    <span class="no">LOADER_START_SECTOR</span><span class="kd"> equ</span> <span class="mh">0x2</span>                     <span class="c1">;loaderÂú®Á£ÅÁõò‰∏≠ÁöÑÈÄªËæëÊâáÂå∫Âú∞ÂùÄÔºåÂç≥LBAÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="no">LOADER_STACK_TOP</span><span class="kd"> equ</span> <span class="nv">LOADER_BASE_ADDR</span>           <span class="c1">;ÂàùÂßãÂåñÊ†àÊåáÈíàÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;----- ÂÆö‰πâÂÜÖÊ†∏Áõ∏ÂÖ≥ÂÆè -----</span>
</span></span><span class="line"><span class="cl">    <span class="no">KERNEL_BIN_BASE_ADDR</span><span class="kd"> equ</span> <span class="mh">0x70000</span>                <span class="c1">;ÂÜÖÊ†∏Êñá‰ª∂Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑ‰ΩçÁΩÆÔºå‰πüÂ∞±ÊòØÂåÖÂê´Êñá‰ª∂Â§¥ÂíåÁ®ãÂ∫èÊï∞ÊçÆÁöÑÂéüÂßãÂÜÖÊ†∏Êñá‰ª∂ÊöÇÊó∂Â≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑ‰ΩçÁΩÆ</span>
</span></span><span class="line"><span class="cl">                                                    <span class="c1">;Ê≥®ÊÑèÂÜÖÊ†∏Âä†ËΩΩÊòØÂú®ÂºÄÂêØÂàÜÈ°µÊú∫Âà∂‰πãÂâçËøõË°åÁöÑÔºåÂõ†Ê≠§ËØ•Âú∞ÂùÄÂπ∂‰∏çÊòØËôöÊãüÂú∞ÂùÄÔºåËÄåÊòØÁâ©ÁêÜÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;0Âè∑ÊâáÂå∫Â≠òÊîæmbrÔºå2Âè∑~4Âè∑ÊâáÂå∫Â≠òÊîæloaderÔºå‰∏∫ÈÅøÂÖçÂ∞ÜÊù•Êâ©Â§ßloaderÔºåÂ∞ÜÂÜÖÊ†∏Â≠òÊîæÂú®9Âè∑ÊâáÂå∫</span>
</span></span><span class="line"><span class="cl">    <span class="no">KERNEL_START_SECTOR</span><span class="kd"> equ</span> <span class="mh">0x9</span>                     <span class="c1">;ÂÜÖÊ†∏Âú®Á£ÅÁõòÁöÑËµ∑ÂßãÊâáÂå∫</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;loaderÁöÑÁâ©ÁêÜÂä†ËΩΩÂú∞ÂùÄÊòØ0x900,ÂÅáËÆæloaderÁöÑÊñá‰ª∂Â§ßÂ∞èÊúÄÂ§ß‰∏∫2000B,Âàô0x900+2000=0x10d0Ôºå</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;Âêë‰∏äÂèñÊï¥Â∞±Â∞ÜÂÜÖÊ†∏ÁöÑÁâ©ÁêÜÂä†ËΩΩÂú∞ÂùÄÈÄâ‰∏∫0x1500</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;Áî±‰∫éÊàë‰ª¨Â∞ÜÊìç‰ΩúÁ≥ªÁªüÁöÑËôöÊãüÂú∞ÂùÄÁ©∫Èó¥ÂàíÂàÜ‰∏∫3GB~4GB</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;Âõ†Ê≠§ÂÜÖÊ†∏ÁöÑËôöÊãüÂä†ËΩΩÂú∞ÂùÄÂ∞±Êàê‰∫Ü0xc0000000+0x1500=0xc0001500</span>
</span></span><span class="line"><span class="cl">    <span class="no">KERNEL_ENTRY_POINT</span><span class="kd"> equ</span> <span class="mh">0xc0001500</span>               <span class="c1">;ÂÜÖÊ†∏ÂèØÊâßË°å‰ª£Á†ÅÔºàÂÜÖÊ†∏Êò†ÂÉèÔºâÁöÑËôöÊãüÂÖ•Âè£Âú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;----- ÂÆö‰πâÈ°µÁõÆÂΩïË°®‰∏éÈ°µË°®Áõ∏ÂÖ≥ÂÆè -----</span>
</span></span><span class="line"><span class="cl">    <span class="no">PAGE_DIR_TABLE_POS</span><span class="kd"> equ</span> <span class="mh">0x100000</span>                 <span class="c1">;È°µÁõÆÂΩïË°®Âü∫ÂùÄ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;-----  gdtÊèèËø∞Á¨¶Â±ûÊÄß  ---------</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_G_4K</span><span class="kd">   equ</span>   <span class="mi">1</span><span class="nv">_00000000000000000000000b</span>    <span class="c1">;ËÆæÁΩÆÊÆµÁïåÈôêÁöÑÂçï‰Ωç‰∏∫4KB</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_D_32</span><span class="kd">   equ</span>    <span class="mi">1</span><span class="nv">_0000000000000000000000b</span>    <span class="c1">;ËÆæÁΩÆ‰ª£Á†ÅÊÆµ/Êï∞ÊçÆÊÆµÁöÑÊúâÊïàÂú∞ÂùÄÔºàÊÆµÂÜÖÂÅèÁßªÂú∞ÂùÄÔºâÂèäÊìç‰ΩúÊï∞Â§ßÂ∞è‰∏∫32‰Ωç</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_L</span><span class="kd">    equ</span>       <span class="mi">0</span><span class="nv">_000000000000000000000b</span>    <span class="c1">;64‰Ωç‰ª£Á†ÅÊÆµÊ†áËÆ∞‰ΩçÔºåÁé∞Âú®ÊòØ32‰ΩçÊìç‰ΩúÁ≥ªÁªüÔºåÂõ†Ê≠§Ê†áËÆ∞‰∏∫0Âç≥ÂèØ„ÄÇ</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_AVL</span><span class="kd">  equ</span>        <span class="mi">0</span><span class="nv">_00000000000000000000b</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ÂÆö‰πâÊÆµÁïåÈôê‰Ωç</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;ÊÆµÁïåÈôêÁöÑÁ¨¨2ÈÉ®ÂàÜÔºåÂç≥ÊèèËø∞Á¨¶ÁöÑÈ´ò32‰Ωç‰∏≠ÁöÑÁ¨¨16~19‰ΩçÔºåÊúÄÁªàÁöÑ‰ª£Á†ÅÊÆµÊÆµÁïåÈôê‰∏∫0xFFFFF</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_LIMIT_CODE2</span><span class="kd"> equ</span> <span class="mi">1111</span><span class="nv">_0000000000000000b</span>     <span class="c1">;ÂÆö‰πâ‰ª£Á†ÅÊÆµË¶ÅÁî®ÁöÑÊÆµÊèèËø∞Á¨¶È´ò32‰Ωç‰∏≠16~19ÊÆµÁïåÈôê‰∏∫ÂÖ®1</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_LIMIT_DATA2</span><span class="kd"> equ</span> <span class="nv">DESC_LIMIT_CODE2</span>           <span class="c1">;ÂÆö‰πâÊï∞ÊçÆÊÆµË¶ÅÁî®ÁöÑÊÆµÊèèËø∞Á¨¶È´ò32‰Ωç‰∏≠16~19ÊÆµÁïåÈôê‰∏∫ÂÖ®1</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_LIMIT_VIDEO2</span><span class="kd">  equ</span> <span class="mi">0000</span><span class="nv">_000000000000000b</span>    <span class="c1">;ÂÆö‰πâÊàë‰ª¨Ë¶ÅÊìç‰ΩúÊòæÂ≠òÊó∂ÂØπÂ∫îÁöÑÊÆµÊèèËø∞Á¨¶ÁöÑÈ´ò32‰Ωç‰∏≠16~19ÊÆµÁïåÈôê‰∏∫ÂÖ®0</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_P</span><span class="kd">  equ</span> <span class="mi">1</span><span class="nv">_000000000000000b</span>                  <span class="c1">;ÂÆö‰πâ‰∫ÜÊÆµÊèèËø∞Á¨¶‰∏≠ÁöÑPÊ†áÂøó‰ΩçÔºåË°®Á§∫ËØ•ÊÆµÊèèËø∞Á¨¶ÊåáÂêëÁöÑÊÆµÊòØÂê¶Âú®ÂÜÖÂ≠ò‰∏≠</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ÂÆö‰πâÊèèËø∞Á¨¶ÁöÑÁâπÊùÉÁ∫ßÂà´‰Ωç</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_DPL_0</span><span class="kd"> equ</span> <span class="mi">00</span><span class="nv">_0000000000000b</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_DPL_1</span><span class="kd"> equ</span> <span class="mi">01</span><span class="nv">_0000000000000b</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_DPL_2</span><span class="kd"> equ</span> <span class="mi">10</span><span class="nv">_0000000000000b</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_DPL_3</span><span class="kd"> equ</span> <span class="mi">11</span><span class="nv">_0000000000000b</span>
</span></span><span class="line"><span class="cl"><span class="c1">;ÂÆö‰πâÁ±ªÂûã‰Ωç</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_S_CODE</span><span class="kd"> equ</span> <span class="mi">1</span><span class="nv">_000000000000b</span>                 <span class="c1">;‰ª£Á†ÅÊÆµÂíåÊï∞ÊçÆÊÆµÈÉΩÊòØÈùûÁ≥ªÁªüÊÆµÔºåÊïÖÁ±ªÂûãÂ≠óÊÆµsËÆæÁΩÆ‰∏∫1</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_S_DATA</span><span class="kd"> equ</span> <span class="nv">DESC_S_CODE</span>                     <span class="c1">;‰ª£Á†ÅÊÆµÂíåÊï∞ÊçÆÊÆµÈÉΩÊòØÈùûÁ≥ªÁªüÊÆµÔºåÊïÖÁ±ªÂûãÂ≠óÊÆµsËÆæÁΩÆ‰∏∫1</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_S_sys</span><span class="kd"> equ</span> <span class="mi">0</span><span class="nv">_000000000000b</span>                  <span class="c1">;Á≥ªÁªüÊÆµÁöÑÁ±ªÂûãÂ≠óÊÆµËÆæÁΩÆ‰∏∫0</span>
</span></span><span class="line"><span class="cl"><span class="c1">;ÂÆö‰πâÂ≠êÁ±ªÂûã‰Ωç</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_TYPE_CODE</span><span class="kd"> equ</span> <span class="mi">1000</span><span class="nv">_00000000b</span>               <span class="c1">;x=1,c=0,r=0,a=0 ‰ª£Á†ÅÊÆµÊòØÂèØÊâßË°åÁöÑÔºåÈùû‰∏ÄËá¥ÊÄßÔºå‰∏çÂèØËØªÔºåÂ∑≤ËÆøÈóÆ‰ΩçaÊ∏Ö0</span>
</span></span><span class="line"><span class="cl">    <span class="no">DESC_TYPE_DATA</span><span class="kd"> equ</span> <span class="mi">0010</span><span class="nv">_00000000b</span>               <span class="c1">;x=0,e=0,w=1,a=0ÔºåÊï∞ÊçÆÊÆµ‰∏çÂèØÊâßË°åÔºåÂêë‰∏äÊâ©Â±ïÔºåÂèØÂÜôÔºåÂ∑≤ËÆøÈóÆ‰ΩçaÊ∏Ö0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ÊãºÊé•‰ª£Á†ÅÊÆµÁöÑÊèèËø∞Á¨¶</span>
</span></span><span class="line"><span class="cl"><span class="no">DESC_CODE_HIGH4</span><span class="kd"> equ</span> <span class="p">(</span><span class="mh">0x00</span><span class="o">&lt;&lt;</span><span class="mi">24</span><span class="p">)</span> <span class="o">+</span> <span class="nv">DESC_G_4K</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">                    <span class="err">+</span> <span class="nf">DESC_D_32</span> <span class="o">+</span> <span class="nv">DESC_L</span> <span class="o">+</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">DESC_AVL</span> <span class="o">+</span> <span class="nv">DESC_LIMIT_CODE2</span> <span class="o">+</span> <span class="nv">DESC_P</span> <span class="o">+</span> <span class="nv">DESC_DPL_0</span> <span class="o">+</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">DESC_S_CODE</span> <span class="o">+</span> <span class="nv">DESC_TYPE_CODE</span> <span class="o">+</span> <span class="mh">0x00</span>
</span></span><span class="line"><span class="cl"><span class="c1">;ÊãºÊé•Êï∞ÊçÆÊÆµÁöÑÊèèËø∞Á¨¶</span>
</span></span><span class="line"><span class="cl"><span class="no">DESC_DATA_HIGH4</span><span class="kd"> equ</span> <span class="p">(</span><span class="mh">0x00</span><span class="o">&lt;&lt;</span><span class="mi">24</span><span class="p">)</span> <span class="o">+</span> <span class="nv">DESC_G_4K</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">                    <span class="err">+</span> <span class="nf">DESC_D_32</span> <span class="o">+</span> <span class="nv">DESC_L</span> <span class="o">+</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">DESC_AVL</span> <span class="o">+</span> <span class="nv">DESC_LIMIT_DATA2</span> <span class="o">+</span> <span class="nv">DESC_P</span> <span class="o">+</span> <span class="nv">DESC_DPL_0</span> <span class="o">+</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">DESC_S_DATA</span> <span class="o">+</span> <span class="nv">DESC_TYPE_DATA</span> <span class="o">+</span> <span class="mh">0x00</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ÊãºÊé•ÊòæÂ≠òÊÆµÁöÑÊèèËø∞Á¨¶‰Ωç                    </span>
</span></span><span class="line"><span class="cl"><span class="no">DESC_VIDEO_HIGH4</span><span class="kd"> equ</span> <span class="p">(</span><span class="mh">0x00</span><span class="o">&lt;&lt;</span><span class="mi">24</span><span class="p">)</span> <span class="o">+</span> <span class="nv">DESC_G_4K</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">                    <span class="err">+</span> <span class="nf">DESC_D_32</span> <span class="o">+</span> <span class="nv">DESC_L</span> <span class="o">+</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">DESC_AVL</span> <span class="o">+</span> <span class="nv">DESC_LIMIT_VIDEO2</span> <span class="o">+</span> <span class="nv">DESC_P</span> <span class="o">+</span> <span class="nv">DESC_DPL_0</span> <span class="o">+</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">DESC_S_DATA</span> <span class="o">+</span> <span class="nv">DESC_TYPE_DATA</span> <span class="o">+</span> <span class="mh">0x0b</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;-----  ÈÄâÊã©Â≠êÂ±ûÊÄß  ---------</span>
</span></span><span class="line"><span class="cl">    <span class="no">RPL0</span><span class="kd"> equ</span> <span class="mb">00b</span>
</span></span><span class="line"><span class="cl">    <span class="no">RPL1</span><span class="kd"> equ</span> <span class="mb">01b</span>
</span></span><span class="line"><span class="cl">    <span class="no">RPL2</span><span class="kd"> equ</span> <span class="mb">10b</span>
</span></span><span class="line"><span class="cl">    <span class="no">RPL3</span><span class="kd"> equ</span> <span class="mb">11b</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="no">TI_GDT</span><span class="kd"> equ</span> <span class="mb">000b</span>
</span></span><span class="line"><span class="cl">    <span class="no">TI_LDT</span><span class="kd"> equ</span> <span class="mb">100b</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;-----  Ê®°ÂùóÂåñÁöÑÈ°µÁõÆÂΩïË°®Â≠óÊÆµ  ---------</span>
</span></span><span class="line"><span class="cl">    <span class="no">PG_P</span><span class="kd"> equ</span> <span class="mb">1b</span>
</span></span><span class="line"><span class="cl">    <span class="no">PG_RW_R</span><span class="kd"> equ</span> <span class="mb">00b</span>
</span></span><span class="line"><span class="cl">    <span class="no">PG_RW_W</span><span class="kd"> equ</span> <span class="mb">10b</span>
</span></span><span class="line"><span class="cl">    <span class="no">PG_US_S</span><span class="kd"> equ</span> <span class="mb">000b</span>
</span></span><span class="line"><span class="cl">    <span class="no">PG_US_U</span><span class="kd"> equ</span> <span class="mb">100b</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;-----  Á®ãÂ∫èÊÆµÁöÑÁ±ªÂûãÂÆö‰πâ  ---------</span>
</span></span><span class="line"><span class="cl">    <span class="no">PT_NULL</span><span class="kd"> equ</span> <span class="mi">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>/boot/loader.S</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="cp">%include &#34;boot.inc&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">SECTION</span> <span class="nv">loader</span> <span class="nv">vstart</span><span class="err">=</span><span class="nv">LOADER_BASE_ADDR</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;------------- ÊûÑÂª∫gdtÂèäÂÖ∂ÂÜÖÈÉ®ÁöÑÊèèËø∞Á¨¶ -------------</span>
</span></span><span class="line"><span class="cl">    <span class="nl">GDT_BASE:</span> 
</span></span><span class="line"><span class="cl">        <span class="kd">dd</span> <span class="mh">0x00000000</span>
</span></span><span class="line"><span class="cl">        <span class="kd">dd</span> <span class="mh">0x00000000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;‰ª£Á†ÅÊÆµÊèèËø∞Á¨¶ÁöÑ‰Ωé4Â≠óËäÇÈÉ®ÂàÜÔºåÂÖ∂‰∏≠È´ò‰∏§‰∏™Â≠óËäÇË°®Á§∫ÊÆµÂü∫ÂùÄÁöÑ0~15‰Ωç,Âú®ËøôÈáåÂÆö‰πâ‰∏∫0x0000</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;‰Ωé‰∏§‰∏™Â≠óËäÇË°®Á§∫ÊÆµÁïåÈôêÁöÑ0~15‰ΩçÔºåÁî±‰∫é‰ΩøÁî®ÁöÑÊòØÂπ≥Âù¶Ê®°ÂûãÔºåÂõ†Ê≠§ÊòØ0xFFFF</span>
</span></span><span class="line"><span class="cl">    <span class="nl">CODE_DESC:</span>  
</span></span><span class="line"><span class="cl">        <span class="kd">dd</span> <span class="mh">0x0000FFFF</span>
</span></span><span class="line"><span class="cl">        <span class="kd">dd</span> <span class="nv">DESC_CODE_HIGH4</span><span class="c1">;ÊÆµÊèèËø∞Á¨¶ÁöÑÈ´ò4Â≠óËäÇÈÉ®ÂàÜ</span>
</span></span><span class="line"><span class="cl">    <span class="nl">DATA_STACK_DESC:</span> 
</span></span><span class="line"><span class="cl">        <span class="kd">dd</span> <span class="mh">0x0000FFFF</span>
</span></span><span class="line"><span class="cl">        <span class="kd">dd</span> <span class="nv">DESC_DATA_HIGH4</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;ÂÆö‰πâÊòæÂ≠òÊÆµÁöÑÊèèËø∞Á¨¶</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;ÊñáÊú¨Ê®°Âºè‰∏ãÁöÑÈÄÇÈÖçÂô®Âú∞ÂùÄ‰∏∫0xb8000~0xbffff,‰∏∫‰∫ÜÊñπ‰æøÊòæÂ≠òÊìç‰ΩúÔºåÊòæÂ≠òÊÆµ‰∏ç‰ΩøÁî®Âπ≥Âù¶Ê®°Âûã</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;Âõ†Ê≠§ÊÆµÂü∫ÂùÄ‰∏∫0xb8000,ÊÆµÂ§ßÂ∞è‰∏∫0xbffff-0xb8000=0x7fff,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;ÊÆµÁ≤íÂ∫¶‰Ωç4kÔºåÂõ†Ê≠§ÊÆµÁïåÈôêÁöÑÂÄº‰∏∫0x7fff/4k=7</span>
</span></span><span class="line"><span class="cl">    <span class="nl">VIDEO_DESC:</span> 
</span></span><span class="line"><span class="cl">        <span class="kd">dd</span> <span class="mh">0x80000007</span>
</span></span><span class="line"><span class="cl">        <span class="kd">dd</span> <span class="nv">DESC_VIDEO_HIGH4</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="no">GDT_SIZE</span><span class="kd"> equ</span> <span class="kc">$</span><span class="o">-</span><span class="nv">GDT_BASE</span>
</span></span><span class="line"><span class="cl">    <span class="no">GDT_LIMIT</span><span class="kd"> equ</span> <span class="nv">GDT_SIZE</span><span class="o">-</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="kd">times</span> <span class="mi">60</span> <span class="nv">dq</span> <span class="mi">0</span> <span class="c1">;Ê≠§Â§ÑÈ¢ÑÁïô60‰∏™ÊèèËø∞Á¨¶ÁöÑÁ©∫‰Ωç</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;------------- ÊûÑÂª∫ÈÄâÊã©Â≠ê -------------</span>
</span></span><span class="line"><span class="cl">    <span class="no">SELECTOR_CODE</span><span class="kd"> equ</span> <span class="p">(</span><span class="mh">0x0001</span><span class="o">&lt;&lt;</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="nv">TI_GDT</span> <span class="o">+</span> <span class="nv">RPL0</span>
</span></span><span class="line"><span class="cl">    <span class="no">SELECTOR_DATA</span><span class="kd"> equ</span> <span class="p">(</span><span class="mh">0x0002</span><span class="o">&lt;&lt;</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="nv">TI_GDT</span> <span class="o">+</span> <span class="nv">RPL0</span>
</span></span><span class="line"><span class="cl">    <span class="no">SELECTOR_VIDEO</span><span class="kd"> equ</span> <span class="p">(</span><span class="mh">0x0003</span><span class="o">&lt;&lt;</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="nv">TI_GDT</span> <span class="o">+</span> <span class="nv">RPL0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">total_mem_bytes</span> <span class="nv">dd</span> <span class="mi">0</span>    <span class="c1">;total_mem_bytesÁî®‰∫é‰øùÂ≠òÊúÄÁªàËé∑ÂèñÂà∞ÁöÑÂÜÖÂ≠òÂÆπÈáèÔºå‰∏∫4‰∏™Â≠óËäÇ</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">;Áî±‰∫éloaderÁ®ãÂ∫èÁöÑÂä†ËΩΩÂú∞ÂùÄ‰∏∫0x900ÔºåËÄåloader.binÁöÑÊñá‰ª∂Â§¥Â§ßÂ∞è‰∏∫0x200</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">;Ôºà4‰∏™gdtÊÆµÊèèËø∞Á¨¶Ôºà8BÔºâÂä†‰∏ä60‰∏™dpÔºà8BÔºâÂ°´ÂÖÖÂ≠óÔºåÊïÖ64*8=512BÔºâÔºå</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">;ÊïÖtotal_mem_bytesÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂú∞ÂùÄ‰∏∫0x900+0x200=0xb00</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">;ËØ•Âú∞ÂùÄÂ∞ÜÊù•Âú®ÂÜÖÊ†∏‰∏≠‰ºöË¢´Áî®Âà∞</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;------------- ÂÆö‰πâgdtrÔºàÊåáÂêëGDTÁöÑÂØÑÂ≠òÂô®Ôºâ -------------</span>
</span></span><span class="line"><span class="cl">    <span class="nf">gdt_ptr</span> <span class="nv">dw</span> <span class="nv">GDT_LIMIT</span>
</span></span><span class="line"><span class="cl">            <span class="kd">dd</span> <span class="nv">GDT_BASE</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;------------- ÂÆö‰πâËÆ∞ÂΩïARDSÁªìÊûÑ‰Ωì‰ø°ÊÅØÁöÑÂèòÈáè -------------</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ards_buf</span> <span class="nv">times</span> <span class="mi">244</span> <span class="nv">db</span> <span class="mi">0</span> <span class="c1">;ÂºÄËæü‰∏ÄÂùóÁºìÂÜ≤Âå∫ÔºåÁî®‰∫éËÆ∞ÂΩïËøîÂõûÁöÑARDSÁªìÊûÑ‰ΩìÔºå</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">;ËØ•ÂÆö‰πâËØ≠Âè•‰∫ãÂÆû‰∏äÊòØÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Êï∞ÁªÑards_buf[244]</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">;244ÊòØÂõ†‰∏∫total_mem_bytes(4)+gdt_ptr(6)+244+ards_nr(2)=256,Âç≥0x100</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">;ËøôÊ†∑loader_startÁöÑÂú®Êñá‰ª∂ÂÜÖÁöÑÂÅèÁßªÂú∞ÂùÄÂ∞±ÊòØ0x100+0x200=0x300</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">ards_nr</span> <span class="nv">dw</span> <span class="mi">0</span>            <span class="c1">;Áî®‰∫éËÆ∞ÂΩïardsÁªìÊûÑ‰ΩìÊï∞Èáè</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1">;INT 0x15 ÂäüËÉΩÂè∑Ôºö0xe820 ÂäüËÉΩÊèèËø∞ÔºöËé∑ÂèñÂÜÖÂ≠òÂÆπÈáèÔºåÊ£ÄÊµãÂÜÖÂ≠ò</span>
</span></span><span class="line"><span class="cl"><span class="c1">;------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1">;ËæìÂÖ•Ôºö</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;EAX:ÂäüËÉΩÂè∑Ôºå0xE820Ôºå‰ΩÜË∞ÉÁî®ËøîÂõûÊó∂eax‰ºöË¢´Â°´ÂÖ•‰∏Ä‰∏≤ASCIIÂÄº</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;EBX:ARDSÂêéÁª≠ÂÄº</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;ES:di:ARDSÁºìÂÜ≤Âå∫ÔºåBIOSÂ∞ÜËé∑ÂèñÂà∞ÁöÑÂÜÖÂ≠ò‰ø°ÊÅØÂ≠òÂà∞Ê≠§ÂØÑÂ≠òÂô®ÊåáÂêëÁöÑÂÜÖÂ≠òÔºåÊØèÊ¨°ÈÉΩ‰ª•ARDSÊ†ºÂºèËøîÂõû</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;ECX:ARDSÁªìÊûÑÁöÑÂ≠óËäÇÂ§ßÂ∞èÔºå20</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;EDX:Âõ∫ÂÆö‰∏∫Á≠æÂêçÊ†áËÆ∞Ôºå0x534d4150</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ËøîÂõûÂÄº</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;CFÔºöËã•cf‰∏∫0ÔºåË°®Á§∫Êú™Âá∫ÈîôÔºåcf‰∏∫1ÔºåË°®Á§∫Ë∞ÉÁî®Âá∫Èîô</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;EAXÔºöÂ≠óÁ¨¶‰∏≤SMAPÁöÑASCIIÁ†ÅÂÄºÔºå0x534d4150</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;ES:di:ARDSÁºìÂÜ≤Âå∫ÔºåBIOSÂ∞ÜËé∑ÂèñÂà∞ÁöÑÂÜÖÂ≠ò‰ø°ÊÅØÂ≠òÂà∞Ê≠§ÂØÑÂ≠òÂô®ÊåáÂêëÁöÑÂÜÖÂ≠òÔºåÊØèÊ¨°ÈÉΩ‰ª•ARDSÊ†ºÂºèËøîÂõû</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;ECX:ARDSÁªìÊûÑÁöÑÂ≠óËäÇÂ§ßÂ∞èÔºå20</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;EBX:ARDSÂêéÁª≠ÂÄºÔºåÂç≥‰∏ã‰∏Ä‰∏™ARDSÁöÑ‰ΩçÁΩÆ„ÄÇ</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;ÊØèÊ¨°BIOS‰∏≠Êñ≠ËøîÂõûÂêéÔºåBIOS‰ºöÊõ¥Êñ∞Ê≠§ÂÄºÔºåBIOS‰ºöÈÄöËøáÊ≠§ÂÄºÊâæÂà∞‰∏ã‰∏Ä‰∏™ÂæÖËøîÂõûÁöÑARDSÁªìÊûÑ„ÄÇ</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;Âú®cf‰Ωç‰∏∫0ÁöÑÊÉÖÂÜµ‰∏ãÔºåËã•ËøîÂõûÂêéÁöÑEBXÂÄº‰∏∫0ÔºåË°®Á§∫ËøôÊòØÊúÄÂêé‰∏Ä‰∏™ARDSÁªìÊûÑ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">loader_start:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">ebx</span><span class="p">,</span><span class="nb">ebx</span>             <span class="c1">;Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî®Êó∂ÔºåË¶ÅÂ∞ÜebxÊ∏ÖÁ©∫ÁΩÆ‰∏∫0ÔºåÊ≠§Â§Ñ‰ΩøÁî®ÁöÑÊòØÂºÇÊàñËøêÁÆóÁΩÆ0</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">edx</span><span class="p">,</span><span class="mh">0x534d4150</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">di</span><span class="p">,</span><span class="nv">ards_buf</span>         <span class="c1">;diÂ≠òÂÇ®ÁºìÂÜ≤Âå∫Âú∞ÂùÄÔºåÂç≥ÊåáÂêëÁºìÂÜ≤Âå∫È¶ñÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">.e820_mem_get_loop:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,</span><span class="mh">0x0000e820</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ecx</span><span class="p">,</span><span class="mi">20</span>              <span class="c1">;‰∏Ä‰∏™ardsÁªìÊûÑ‰ΩìÁöÑÂ§ßÂ∞è</span>
</span></span><span class="line"><span class="cl">    <span class="nf">int</span> <span class="mh">0x15</span>                <span class="c1">;Ë∞ÉÁî®0x15‰∏≠Êñ≠ÂáΩÊï∞ÔºåËøîÂõûÁöÑardsÁªìÊûÑ‰ΩìË¢´ËøîÂõûÁªôdiÊåáÂêëÁöÑÁºìÂÜ≤Âå∫‰∏≠</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">di</span><span class="p">,</span><span class="nb">cx</span>               <span class="c1">;‰ΩødiÂ¢ûÂä†20Â≠óËäÇÊåáÂêëÁºìÂÜ≤Âå∫‰∏≠‰∏ã‰∏Ä‰∏™ÁöÑARDSÁªìÊûÑ‰ΩçÁΩÆ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">inc</span> <span class="kt">word</span> <span class="p">[</span><span class="nv">ards_nr</span><span class="p">]</span>      <span class="c1">;incÔºàincrementÂ¢ûÂä†ÔºâÊåá‰ª§Ë°®Á§∫Â∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊìç‰ΩúÊï∞Â¢ûÂä†‰∏ÄÔºåÊ≠§Â§ÑÁî®‰∫éËÆ∞ÂΩïËøîÂõûÁöÑARDSÊï∞Èáè</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cmp</span> <span class="nb">ebx</span><span class="p">,</span><span class="mi">0</span>               <span class="c1">;ÊØîËæÉebx‰∏≠ÁöÑÂÄºÊòØÂê¶‰∏∫0</span>
</span></span><span class="line"><span class="cl">    <span class="nf">jnz</span> <span class="nv">.e820_mem_get_loop</span>  <span class="c1">;Ëã•ebx‰∏ç‰∏∫0ÔºåÂàôÁªßÁª≠ËøõË°åÂæ™ÁéØËé∑ÂèñARDSÔºå</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">;Ëã•‰∏∫0ËØ¥ÊòéÂ∑≤ÁªèËé∑ÂèñÂà∞ÊúÄÂêé‰∏Ä‰∏™ardsÔºåÂàôÈÄÄÂá∫Âæ™ÁéØ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">cx</span><span class="p">,[</span><span class="nv">ards_nr</span><span class="p">]</span>        <span class="c1">;cxÂ≠òÂÇ®ÈÅçÂéÜÂà∞ÁöÑardsÁªìÊûÑ‰Ωì‰∏™Êï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ebx</span><span class="p">,</span><span class="nv">ards_buf</span>        <span class="c1">;ebxÊåáÂêëÁºìÂÜ≤Âå∫Âú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">edx</span><span class="p">,</span><span class="nb">edx</span>             <span class="c1">;EDXÁî®‰∫é‰øùÂ≠òBaseAddrLow+LengthLowÊúÄÂ§ßÂÄºÔºåÊ≠§Â§ÑÂàùÂßãÂåñ‰∏∫0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">.find_max_mem_area:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,[</span><span class="nb">ebx</span><span class="p">]</span>           <span class="c1">;eaxÁî®‰∫éÈÅçÂéÜÁºìÂÜ≤Âå∫‰∏≠ÁöÑÊØè‰∏Ä‰∏™ardsÁöÑBaseAddrLow</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">eax</span><span class="p">,[</span><span class="nb">ebx</span><span class="o">+</span><span class="mi">8</span><span class="p">]</span>         <span class="c1">;ebx+8Ëé∑ÂèñÁöÑÊòØLengthLowÔºåÊïÖËØ•‰ª£Á†ÅËÆ°ÁÆóÁöÑÊòØBaseAddrLow+LengthLow</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">ebx</span><span class="p">,</span><span class="mi">20</span>              <span class="c1">;ÈÅçÂéÜ‰∏ã‰∏Ä‰∏™ards</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cmp</span> <span class="nb">edx</span><span class="p">,</span><span class="nb">eax</span>             <span class="c1">;ÂàÜÊîØËØ≠Âè•ÔºåÂ¶ÇÊûúedxÂ§ß‰∫éÁ≠â‰∫éeaxÔºåÂàôË∑≥ËΩ¨Âà∞.next_ardsÔºå‰πüÂ∞±ÊòØËøõÂÖ•Âæ™ÁéØ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">jge</span> <span class="nv">.next_ards</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">edx</span><span class="p">,</span><span class="nb">eax</span>             <span class="c1">;Âê¶ÂàôÂ∞±ÊòØÊõ¥Êñ∞edx</span>
</span></span><span class="line"><span class="cl"><span class="nl">.next_ards:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">loop</span> <span class="nv">.find_max_mem_area</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">total_mem_bytes</span><span class="p">],</span><span class="nb">edx</span>   <span class="c1">;Â∞ÜÊúÄÁªàÁªìÊûú‰øùÂ≠òÂà∞total_mem_bytes</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;------------- ÂáÜÂ§áËøõÂÖ•‰øùÊä§Ê®°Âºè -------------</span>
</span></span><span class="line"><span class="cl"><span class="c1">;1.ÊâìÂºÄA20</span>
</span></span><span class="line"><span class="cl"><span class="c1">;2.Âä†ËΩΩgdt</span>
</span></span><span class="line"><span class="cl"><span class="c1">;3.ÁΩÆcr0ÁöÑPE‰Ωç‰∏∫1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;------------- ÊâìÂºÄA20 -------------</span>
</span></span><span class="line"><span class="cl">    <span class="nf">in</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0x92</span>
</span></span><span class="line"><span class="cl">    <span class="nf">or</span> <span class="nb">al</span><span class="p">,</span><span class="mi">0000</span><span class="nv">_0010B</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="mh">0x92</span><span class="p">,</span><span class="nb">al</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">;------------- Âä†ËΩΩgdt -------------</span>
</span></span><span class="line"><span class="cl">    <span class="nf">lgdt</span> <span class="p">[</span><span class="nv">gdt_ptr</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">;------------- ÁΩÆcr0ÁöÑPE‰Ωç‰∏∫1 -------------</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">cr0</span>
</span></span><span class="line"><span class="cl">    <span class="nf">or</span> <span class="nb">eax</span><span class="p">,</span><span class="mh">0x00000001</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">cr0</span><span class="p">,</span><span class="nb">eax</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">jmp</span> <span class="kt">dword</span> <span class="nv">SELECTOR_CODE</span><span class="p">:</span><span class="nv">p_mode_start</span><span class="c1">;Âà∑Êñ∞ÊµÅÊ∞¥Á∫ø</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">.error_hlt:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">hlt</span>                     <span class="c1">;Âá∫ÈîôÂàôÊåÇËµ∑</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">[</span><span class="k">bits</span> <span class="mi">32</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nl">p_mode_start:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ax</span><span class="p">,</span><span class="nv">SELECTOR_DATA</span>                    <span class="c1">;ÂàùÂßãÂåñÊÆµÂØÑÂ≠òÂô®ÔºåÂ∞ÜÊï∞ÊçÆÊÆµÁöÑÈÄâÊã©Â≠êÂàÜÂà´ÊîæÂÖ•ÂêÑÊÆµÂØÑÂ≠òÂô®</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ds</span><span class="p">,</span><span class="nb">ax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">es</span><span class="p">,</span><span class="nb">ax</span>                      
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ss</span><span class="p">,</span><span class="nb">ax</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">esp</span><span class="p">,</span><span class="nv">LOADER_STACK_TOP</span>                <span class="c1">;ÂàùÂßãÂåñÊ†àÊåáÈíàÔºåÂ∞ÜÊ†àÊåáÈíàÂú∞ÂùÄÊîæÂÖ•bspÂØÑÂ≠òÂô®</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ax</span><span class="p">,</span><span class="nv">SELECTOR_VIDEO</span>                   <span class="c1">;ÂàùÂßãÂåñÊòæÂ≠òÊÆµÂØÑÂ≠òÂô®ÔºåÊòæÂ≠òÊÆµÁöÑÈÄâÊã©Â≠êÊîæÂÖ•gsÂØÑÂ≠òÂô®</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">gs</span><span class="p">,</span><span class="nb">ax</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;------------- Âä†ËΩΩÂÜÖÊ†∏ ----------------</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Â∞ÜÂÜÖÊ†∏‰ªéÁ£ÅÁõòÁöÑ9Âè∑ÊâáÂå∫Âä†ËΩΩÁöÑÂÜÖÂ≠òÁöÑKERNEL_BIN_BASE_ADDRÂú∞ÂùÄÂ§Ñ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,</span><span class="nv">KERNEL_START_SECTOR</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ebx</span><span class="p">,</span><span class="nv">KERNEL_BIN_BASE_ADDR</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ecx</span><span class="p">,</span><span class="mi">200</span> 
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">rd_disk_m_32</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;------------- ÂºÄÂêØÂàÜÈ°µÊú∫Âà∂ -------------</span>
</span></span><span class="line"><span class="cl"><span class="c1">;1.ÊûÑÂª∫È°µË°®ÂíåÈ°µÁõÆÂΩïË°®</span>
</span></span><span class="line"><span class="cl"><span class="c1">;2.Â∞ÜÈ°µÁõÆÂΩïË°®ÁöÑ‰ΩçÁΩÆÂä†ËΩΩÂà∞ÊéßÂà∂ÂØÑÂ≠òÂô®cr3</span>
</span></span><span class="line"><span class="cl"><span class="c1">;3.ÁΩÆcr0ÂØÑÂ≠òÂô®ÁöÑPG‰Ωç‰∏∫1ÔºåÊâìÂºÄÂàÜÈ°µÊú∫Âà∂</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">setup_page</span>                         <span class="c1">;ÂàõÂª∫È°µÁõÆÂΩïË°®ÂíåÈ°µË°®ÔºåÂπ∂ÂàùÂßãÂåñÈ°µÂÜÖÂ≠ò‰ΩçÂõæ</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;‰ª•‰∏ãÂ∞ÜÂêÑÊÆµÊèèËø∞Á¨¶ÁöÑÂü∫ÂùÄËøÅÁßªÂà∞ËôöÊãüÂÜÖÂ≠òÁ©∫Èó¥‰∏≠                                </span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ebx</span><span class="p">,[</span><span class="nv">gdt_ptr</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span>                     <span class="c1">;gdt_ptr+2Ë°®Á§∫GDT_BASE,‰πüÂ∞±ÊòØGDTÁöÑËµ∑ÂßãÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">or</span> <span class="kt">dword</span> <span class="p">[</span><span class="nb">ebx</span><span class="o">+</span><span class="mh">0x18</span><span class="o">+</span><span class="mi">4</span><span class="p">],</span><span class="mh">0xc0000000</span>        <span class="c1">;ebx‰∏≠‰øùÂ≠òÁùÄGDT_BASEÔºå0x18=24ÔºåÊïÖebx+0x18Ë°®Á§∫ÂèñÂá∫ÊòæÂ≠òÊÆµÁöÑËµ∑ÂßãÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">                                            <span class="c1">;+4Ë°®Á§∫ÂèñÂá∫ÊÆµÊèèËø∞Á¨¶ÁöÑÈ´ò32‰ΩçÔºå‰πãÂêéÂíå0xc0000000ËøõË°åÊàñÊìç‰Ωú</span>
</span></span><span class="line"><span class="cl">                                            <span class="c1">;Ë°®Á§∫Â∞ÜÊòæÂ≠òÊÆµÁöÑËµ∑ÂßãÂú∞ÂùÄÂ¢ûÂä†‰∫Ü3G</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="kt">dword</span> <span class="p">[</span><span class="nv">gdt_ptr</span><span class="o">+</span><span class="mi">2</span><span class="p">],</span><span class="mh">0xc0000000</span>        <span class="c1">;ÂêåÁêÜÂ∞ÜGDT_BASEÁöÑËµ∑ÂßãÂú∞ÂùÄ‰πüÂ¢ûÂä†3G</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">esp</span><span class="p">,</span><span class="mh">0xc0000000</span>                      <span class="c1">;ÂêåÁêÜÂ∞ÜespÊ†àÊåáÈíàÁöÑËµ∑ÂßãÂú∞ÂùÄ‰πüÂ¢ûÂä†3G</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,</span><span class="nv">PAGE_DIR_TABLE_POS</span>              <span class="c1">;Â∞ÜÈ°µÁõÆÂΩïË°®ÁöÑ‰ΩçÁΩÆÂä†ËΩΩÂà∞ÊéßÂà∂ÂØÑÂ≠òÂô®cr3</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">cr3</span><span class="p">,</span><span class="nb">eax</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">cr0</span>                             <span class="c1">;ÊâìÂºÄcr0ÁöÑPG‰ΩçÔºåÂºÄÂêØÂàÜÈ°µÊú∫Âà∂</span>
</span></span><span class="line"><span class="cl">    <span class="nf">or</span> <span class="nb">eax</span><span class="p">,</span><span class="mh">0x80000000</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">cr0</span><span class="p">,</span><span class="nb">eax</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">lgdt</span> <span class="p">[</span><span class="nv">gdt_ptr</span><span class="p">]</span>                          <span class="c1">;ÂºÄÂêØÂàÜÈ°µÂêéÔºåÁî®gdtÁöÑÊñ∞Âú∞ÂùÄÈáçÊñ∞Âä†ËΩΩ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;------------- ËøõÂÖ•ÂÜÖÊ†∏ÂáΩÊï∞ ----------------</span>
</span></span><span class="line"><span class="cl"><span class="nl">enter_kernel:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">kernel_init</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">esp</span><span class="p">,</span><span class="mh">0xc009f000</span>
</span></span><span class="line"><span class="cl">    <span class="nf">jmp</span> <span class="nv">KERNEL_ENTRY_POINT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">kernel_init:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">eax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">ebx</span><span class="p">,</span><span class="nb">ebx</span>                             <span class="c1">;ËÆ∞ÂΩïÁ®ãÂ∫èÂ§¥Ë°®(ÊÆµ)Âú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">ecx</span><span class="p">,</span><span class="nb">ecx</span>                             <span class="c1">;ËÆ∞ÂΩïÁ®ãÂ∫èÂ§¥Ë°®(ÊÆµÂ§¥Ë°®)‰∏≠Á®ãÂ∫èÂ§¥Êï∞Èáè</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">edx</span><span class="p">,</span><span class="nb">edx</span>                             <span class="c1">;ËÆ∞ÂΩïÁ®ãÂ∫èÂ§¥Ë°®‰∏≠ÊØè‰∏™Êù°ÁõÆÁöÑÂ§ßÂ∞è</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,[</span><span class="nv">KERNEL_BIN_BASE_ADDR</span><span class="o">+</span><span class="mi">42</span><span class="p">]</span>        <span class="c1">;42Â≠óËäÇÂ§ÑÊòØe_phentsizeÔºåÂç≥Á®ãÂ∫èÂ§¥‰∏≠ÊØè‰∏™Êù°ÁõÆÁöÑÂ§ßÂ∞è</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ebx</span><span class="p">,[</span><span class="nv">KERNEL_BIN_BASE_ADDR</span><span class="o">+</span><span class="mi">28</span><span class="p">]</span>       <span class="c1">;28Â≠óËäÇÂ§ÑÊòØe_phoffÔºåÂç≥Á®ãÂ∫èÂ§¥Ë°®ÁöÑÂÅèÁßª</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">ebx</span><span class="p">,</span><span class="nv">KERNEL_BIN_BASE_ADDR</span>            <span class="c1">;Á®ãÂ∫èÂ§¥Ë°®ÁöÑÂÅèÁßªÂä†‰∏äÂÜÖÊ†∏Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑËµ∑ÂßãÂú∞ÂùÄÔºåÂ∞±ÊòØÁ®ãÂ∫èÂ§¥Ë°®ÁöÑËµ∑ÂßãÁâ©ÁêÜÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">cx</span><span class="p">,[</span><span class="nv">KERNEL_BIN_BASE_ADDR</span><span class="o">+</span><span class="mi">44</span><span class="p">]</span>        <span class="c1">;44Â≠óËäÇÂ§ÑÊòØe_phnumÔºåÂç≥Á®ãÂ∫èÂ§¥Ë°®(ÊÆµÂ§¥Ë°®)‰∏≠Á®ãÂ∫èÂ§¥Êï∞Èáè</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">;ÈÅçÂéÜÊÆµÂ§¥Ë°®ÔºåÂèñÂá∫Á®ãÂ∫è‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÊÆµÔºåÂ∞ÜÂÖ∂Êã∑Ë¥ùÂà∞ÂØπÂ∫îÁöÑËôöÊãüÂú∞ÂùÄÁ©∫Èó¥‰∏≠</span>
</span></span><span class="line"><span class="cl"><span class="nl">.each_segment:</span>
</span></span><span class="line"><span class="cl"><span class="c1">;Ê£ÄÊü•ÊÆµÂ§¥Ë°®‰∏≠ÁöÑÊÆµÂ§¥ÊòØ‰ºöÂê¶ÊòØÁ©∫ÊÆµ(PT_NULL)ÔºåÂ¶ÇÊûú‰∏çÊòØÂ∞±Â∞ÜËØ•ÊÆµÊã∑Ë¥ùÂà∞ÂØπÂ∫îÂå∫ÂüüÔºåÂê¶ÂàôÂ∞±ÁªßÁª≠ÈÅçÂéÜ‰∏ã‰∏Ä‰∏™ÊÆµÂ§¥</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cmp</span> <span class="kt">byte</span> <span class="p">[</span><span class="nb">ebx</span><span class="o">+</span><span class="mi">0</span><span class="p">],</span><span class="nv">PT_NULL</span>                <span class="c1">;ÊØîËæÉp_typeÊòØÂê¶Á≠â‰∫éPT_NULLÔºåËã•Áõ∏Á≠âËØ¥ÊòéÁ®ãÂ∫èÂ§¥Êú™‰ΩøÁî®</span>
</span></span><span class="line"><span class="cl">    <span class="nf">je</span> <span class="nv">.PTNULL</span>                              <span class="c1">;Ëã•Áõ∏Á≠âÂàôË∑≥ËΩ¨Âà∞.PTNULL</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="c1">;‰∏∫ÂáΩÊï∞memcpy(dst,src,size)ÂéãÂÖ•ÂèÇÊï∞ÔºåÂèÇÊï∞‰æùÊ¨°‰ªéÂè≥ÂêëÂ∑¶ÂéãÂÖ•ÔºåËøôÊ†∑ÂáΩÊï∞Â∞±ÂèØ‰ª•‰ªéÂ∑¶Âà∞Âè≥ÂèñÂá∫ÂèÇÊï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="kt">dword</span> <span class="p">[</span><span class="nb">ebx</span><span class="o">+</span><span class="mi">16</span><span class="p">]</span>                     <span class="c1">;ÂÆûÂèÇsizeÔºåÁ®ãÂ∫èÂ§¥Ë°®ÂÅèÁßª16Â≠óËäÇÁöÑÂú∞Êñπp_fileszÔºåÊú¨ÊÆµÂú®Êñá‰ª∂ÂÜÖÁöÑÂ§ßÂ∞è</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,[</span><span class="nb">ebx</span><span class="o">+</span><span class="mi">4</span><span class="p">]</span>                         <span class="c1">;Á®ãÂ∫èÂ§¥Ë°®ÂÅèÁßª4Â≠óËäÇÁöÑÂú∞Êñπp_offsetÔºåÊú¨ÊÆµÂú®Êñá‰ª∂ÂÜÖÁöÑËµ∑ÂßãÂÅèÁßª</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">eax</span><span class="p">,</span><span class="nv">KERNEL_BIN_BASE_ADDR</span>            <span class="c1">;Êú¨ÊÆµÁöÑÂÅèÁßªÂä†‰∏äÂÜÖÊ†∏Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑËµ∑ÂßãÂú∞ÂùÄÔºåÂ∞±ÊòØÊú¨ÊÆµÁöÑÁâ©ÁêÜÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nb">eax</span>                                <span class="c1">;ÂÆûÂèÇsrc</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="kt">dword</span> <span class="p">[</span><span class="nb">ebx</span><span class="o">+</span><span class="mi">8</span><span class="p">]</span>                      <span class="c1">;ÂÆûÂèÇdstÔºåp_vaddrÔºåÊú¨ÊÆµÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑËµ∑ÂßãËôöÊãüÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">mem_cpy</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">esp</span><span class="p">,</span><span class="mi">12</span>                              <span class="c1">;ÂõûÊî∂mem_cpyÁöÑÊ†àÂ∏ßÁ©∫Èó¥</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="nl">.PTNULL:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">ebx</span><span class="p">,</span><span class="nb">edx</span>                             <span class="c1">;ÊåáÂêë‰∏ã‰∏Ä‰∏™ÊÆµÂ§¥</span>
</span></span><span class="line"><span class="cl">    <span class="nf">loop</span> <span class="nv">.each_segment</span>                      <span class="c1">;ÁªßÁª≠ÈÅçÂéÜÊÆµÂ§¥Ë°®</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ret</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ÈÄêÂ≠óËäÇÊã∑Ë¥ùÂáΩÊï∞ÔºåÂ∞ÜesiÊåáÂêëÁöÑÂÜÖÂ≠òÂå∫ÂüüÁöÑsize‰∏™Â≠óËäÇÊã∑Ë¥ùÂà∞ediÊåáÂêëÁöÑÂå∫Âüü</span>
</span></span><span class="line"><span class="cl"><span class="nl">mem_cpy:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cld</span>                                    <span class="c1">;ÊåáÊòéÊã∑Ë¥ùÊó∂esi‰∏éediÁöÑÂ¢ûÈïøÊñπÂêëÊòØÂêë‰∏äÁöÑ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nb">ebp</span>                               <span class="c1">;‰øùÂ≠òebp</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ebp</span><span class="p">,</span><span class="nb">esp</span>                            <span class="c1">;Â∞ÜespÊåáÂêëebp</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nb">ecx</span>                               <span class="c1">;repÊåá‰ª§‰ºöÁî®Âà∞ecxÁöÑÂæ™ÁéØËÆ°Êï∞ÔºåËÄåÂ§ñÂ±ÇÂáΩÊï∞‰πüÁî®Âà∞‰∫ÜecxÁöÑÂÄºÔºå</span>
</span></span><span class="line"><span class="cl">                                           <span class="c1">;Âõ†Ê≠§Ê≠§Â§ÑÈúÄË¶ÅÂ∞ÜÂ§ñÂ±ÇÂáΩÊï∞ÁöÑecxÁöÑÂÄºËøõË°åÂ§á‰ªΩ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">edi</span><span class="p">,[</span><span class="nb">ebp</span><span class="o">+</span><span class="mi">8</span><span class="p">]</span>                        <span class="c1">;ÂèÇÊï∞dst</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">esi</span><span class="p">,[</span><span class="nb">ebp</span><span class="o">+</span><span class="mi">12</span><span class="p">]</span>                       <span class="c1">;ÂèÇÊï∞src</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ecx</span><span class="p">,[</span><span class="nb">ebp</span><span class="o">+</span><span class="mi">16</span><span class="p">]</span>                       <span class="c1">;ÂèÇÊï∞size</span>
</span></span><span class="line"><span class="cl">    <span class="nf">rep</span> <span class="nv">movsb</span>                              <span class="c1">;rep(repeat)Êåá‰ª§ÔºåÈáçÂ§çÊâßË°åmovsbÊåá‰ª§</span>
</span></span><span class="line"><span class="cl">                                           <span class="c1">;movsbÊåá‰ª§ÔºåsË°®Á§∫stringÔºåbË°®Á§∫byteÔºå</span>
</span></span><span class="line"><span class="cl">                                           <span class="c1">;Âç≥Â∞ÜesiÊåáÂêëÁöÑÂÜÖÂ≠òÊã∑Ë¥ù‰∏Ä‰∏™Â≠óËäÇÁªôediÊåáÂêëÁöÑÂÜÖÂ≠ò</span>
</span></span><span class="line"><span class="cl">                                           <span class="c1">;Âõ†Ê≠§Êú¨Êù°Êåá‰ª§Ë°®Á§∫ÈÄêÂ≠óËäÇÊã∑Ë¥ùÔºåÊã∑Ë¥ùÁöÑÂ≠óËäÇ‰∏™Êï∞‰∏∫ecxÁöÑÂÄº</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="nb">ecx</span>                                <span class="c1">;ÂèñÂá∫Â§á‰ªΩÁöÑÂÄº</span>
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="nb">ebp</span>                                <span class="c1">;ËøîÂõû‰∏äÂ±ÇÂáΩÊï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ret</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;------------- ÂàõÂª∫È°µÁõÆÂΩïË°®ÂíåÈ°µË°® -------------</span>
</span></span><span class="line"><span class="cl"><span class="c1">;ÂàùÂßãÂåñÈ°µÁõÆÂΩïË°®ÂíåÈ°µË°®</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ÈÄêÂ≠óËäÇÊ∏ÖÁ©∫È°µÁõÆÂΩïË°®</span>
</span></span><span class="line"><span class="cl"><span class="nl">setup_page:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ecx</span><span class="p">,</span><span class="mi">4096</span>                                    <span class="c1">;È°µÁõÆÂΩïË°®ÁöÑÂ§ßÂ∞è‰∏∫4KBÔºåecxÊòØloopÊåá‰ª§ÁöÑÂæ™ÁéØËÆ°Êï∞Âô®</span>
</span></span><span class="line"><span class="cl">                                                    <span class="c1">;Áî±‰∫éÂàùÂßãÂåñÈ°µË°®ÊòØÈÄêÂ≠óËäÇÁΩÆ0ÁöÑÔºåÂõ†Ê≠§ecxÁöÑÂÄº‰∏∫4096</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">esi</span><span class="p">,</span><span class="mi">0</span>                                       <span class="c1">;È°µÁõÆÂΩïË°®ÁöÑÂÅèÁßªÈáè</span>
</span></span><span class="line"><span class="cl"><span class="nl">.clear_page_dir:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="kt">byte</span> <span class="p">[</span><span class="nv">PAGE_DIR_TABLE_POS</span><span class="o">+</span><span class="nb">esi</span><span class="p">],</span><span class="mi">0</span>             <span class="c1">;ÈÄêÂ≠óËäÇÊ∏ÖÁ©∫È°µÁõÆÂΩïË°®</span>
</span></span><span class="line"><span class="cl">                                                    <span class="c1">;ÂÖ∂‰∏≠PAGE_DIR_TABLE_POS‰∏∫È°µÁõÆÂΩïË°®ÂàùÂßãÂú∞ÂùÄÁöÑÂÆè</span>
</span></span><span class="line"><span class="cl">    <span class="nf">inc</span> <span class="nb">esi</span>                                         <span class="c1">;ÈÄíÂ¢ûÂÅèÁßªÈáèÔºåÊ∏ÖÁ©∫‰∏ã‰∏Ä‰∏™Â≠óËäÇ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">loop</span> <span class="nv">.clear_page_dir</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ÂàùÂßãÂåñÂàõÂª∫È°µÁõÆÂΩïË°®</span>
</span></span><span class="line"><span class="cl"><span class="nl">.create_pde:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,</span><span class="nv">PAGE_DIR_TABLE_POS</span>                      <span class="c1">;eax‰øùÂ≠òÈ°µÁõÆÂΩïË°®ÁöÑËµ∑ÂßãÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">eax</span><span class="p">,</span><span class="mh">0x1000</span>                                  <span class="c1">;0x1000‰∏∫1kÔºåÊïÖËØ•‰ª£Á†ÅÁöÑËÆ°ÁÆóÁªìÊûúÊòØÂ∞ÜeaxÊåáÂêëÁ¨¨‰∏ÄÂº†È°µË°®ÁöÑËµ∑ÂßãÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ebx</span><span class="p">,</span><span class="nb">eax</span>                                     <span class="c1">;ebx‰øùÂ≠òÁ¨¨‰∏ÄÂº†È°µË°®ÁöÑËµ∑ÂßãÂú∞ÂùÄÔºåÂêéÁª≠‰ºöÁî®Âà∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">or</span> <span class="nb">eax</span><span class="p">,</span><span class="nv">PG_US_U</span><span class="o">|</span><span class="nv">PG_RW_W</span><span class="o">|</span><span class="nv">PG_P</span>                     <span class="c1">;eaxÂ∑≤ÁªèÊúâ‰∫ÜÁ¨¨‰∏ÄÂº†È°µË°®ÁöÑËµ∑ÂßãÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">                                                    <span class="c1">;Ê≠§Â§ÑÂÜçÂä†‰∏äÂ±ûÊÄßÔºåÂç≥ÂèØË°®Á§∫‰∏∫È°µÁõÆÂΩïË°®ÁöÑ‰∏Ä‰∏™Ë°®È°πÔºå</span>
</span></span><span class="line"><span class="cl">                                                    <span class="c1">;ËØ•Ë°®È°π‰ª£Ë°®ÁöÑÊòØÁ¨¨‰∏ÄÂº†È°µË°®ÁöÑÁâ©ÁêÜÂú∞ÂùÄÂèäÂÖ∂Áõ∏ÂÖ≥Â±ûÊÄß</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">PAGE_DIR_TABLE_POS</span><span class="o">+</span><span class="mh">0x0</span><span class="p">],</span><span class="nb">eax</span>                <span class="c1">;È°µÁõÆÂΩïË°®ÁöÑÁ¨¨‰∏Ä‰∏™Ë°®È°πÊåáÂêëÁ¨¨‰∏ÄÂº†È°µË°®</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">PAGE_DIR_TABLE_POS</span><span class="o">+</span><span class="mh">0xc00</span><span class="p">],</span><span class="nb">eax</span>              <span class="c1">;0xc0000000Âç≥‰∏∫3GBÔºåÁî±‰∫éÊàë‰ª¨ÂàíÂàÜÁöÑËôöÊãüÂú∞ÂùÄÁ©∫Èó¥3GB‰ª•‰∏ä‰∏∫osÂú∞ÂùÄÁ©∫Èó¥</span>
</span></span><span class="line"><span class="cl">                                                    <span class="c1">;Âõ†Ê≠§ËØ•ËØ≠Âè•ÊòØÂ∞Ü3GBÁöÑËôöÊãüÁ©∫Èó¥Êò†Â∞ÑÂà∞ÂÜÖÊ†∏Á©∫Èó¥ </span>
</span></span><span class="line"><span class="cl">                                                    <span class="c1">;ËÄå0xc00/4=768Ôºå‰πüÂ∞±ÊòØËØ¥È°µÁõÆÂΩïË°®ÁöÑ768Âè∑Ë°®È°πÊò†Â∞Ñ‰∏∫Áâ©ÁêÜÂÜÖÊ†∏Á©∫Èó¥</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nf">sub</span> <span class="nb">eax</span><span class="p">,</span><span class="mh">0x1000</span>          
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">PAGE_DIR_TABLE_POS</span><span class="o">+</span><span class="mi">4092</span><span class="p">],</span><span class="nb">eax</span>               <span class="c1">;ÊúÄÂêé‰∏Ä‰∏™È°µË°®È°πÊåáÂêëËá™Â∑±Ôºå‰∏∫Â∞ÜÊù•Âä®ÊÄÅÊìç‰ΩúÈ°µË°®ÂÅöÂáÜÂ§á</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;ÂàõÂª∫Á¨¨‰∏ÄÂº†È°µË°®ÁöÑÈ°µË°®È°πÔºåÁî±‰∫éosÁöÑÁâ©ÁêÜÂÜÖÂ≠ò‰∏ç‰ºöË∂ÖËøá1MÔºåÊïÖÈ°µË°®È°π‰∏™Êï∞ÁöÑÊúÄÂ§ßÂÄº‰∏∫1M/4k=256</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ecx</span><span class="p">,</span><span class="mi">256</span>                                     <span class="c1">;Âæ™ÁéØËÆ°Êï∞Âô®</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">esi</span><span class="p">,</span><span class="mi">0</span>                                       <span class="c1">;ÂÅèÁßªÈáè</span>
</span></span><span class="line"><span class="cl">    <span class="nf">xor</span> <span class="nb">edx</span><span class="p">,</span><span class="nb">edx</span>                                     <span class="c1">;Á¨¨‰∏Ä‰∏™È°µË°®È°πÊåáÂêëÁâ©ÁêÜÁ©∫Èó¥ÁöÑ0~4KBÁâ©ÁêÜÈ°µÊ°Ü</span>
</span></span><span class="line"><span class="cl">                                                    <span class="c1">;ÊïÖËÆ∞ÂΩïÁöÑËµ∑ÂßãÂú∞ÂùÄÂ∞±ÊòØÁ¨¨‰∏Ä‰∏™È°µÊ°ÜÁöÑËµ∑ÂßãÂú∞ÂùÄÔºå‰πüÂ∞±ÊòØ0</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">edx</span><span class="p">,</span><span class="nv">PG_US_S</span><span class="o">|</span><span class="nv">PG_RW_W</span><span class="o">|</span><span class="nv">PG_P</span>                    <span class="c1">;Ê≠§Êó∂ÁöÑedxË°®Á§∫Êã•ÊúâÂ±ûÊÄßPG_US_S|PG_RW_W|PG_P</span>
</span></span><span class="line"><span class="cl">                                                    <span class="c1">;‰∏îÁâ©ÁêÜÂú∞ÂùÄ‰∏∫0ÁöÑÁâ©ÁêÜÈ°µÁöÑÈ°µË°®È°π</span>
</span></span><span class="line"><span class="cl"><span class="nl">.create_pte:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nb">ebx</span><span class="o">+</span><span class="nb">esi</span><span class="o">*</span><span class="mi">4</span><span class="p">],</span><span class="nb">edx</span>                             <span class="c1">;Ê≠§ÂâçebxÂ∑≤Áªè‰øùÂ≠ò‰∫ÜÁ¨¨‰∏ÄÂº†È°µË°®ÁöÑËµ∑ÂßãÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">edx</span><span class="p">,</span><span class="mi">4096</span>                                    <span class="c1">;edxÊåáÂêë‰∏ã‰∏Ä‰∏™Áâ©ÁêÜÈ°µÔºà‰∏Ä‰∏™Áâ©ÁêÜÈ°µ4KBÔºâ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">inc</span> <span class="nb">esi</span>                                         <span class="c1">;esiÊåáÂêëÈ°µË°®ÁöÑ‰∏ã‰∏Ä‰∏™ÂÅèÁßª</span>
</span></span><span class="line"><span class="cl">    <span class="nf">loop</span> <span class="nv">.create_pte</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">; -------------------ÂàùÂßãÂåñÈ°µÁõÆÂΩïË°®769Âè∑-1022Âè∑È°πÔºå769Âè∑È°πÊåáÂêëÁ¨¨‰∫å‰∏™È°µË°®ÁöÑÂú∞ÂùÄÔºàÊ≠§È°µË°®Á¥ßÊå®ÁùÄ‰∏äÈù¢ÁöÑÁ¨¨‰∏Ä‰∏™È°µË°®ÔºâÔºå770Âè∑ÊåáÂêëÁ¨¨‰∏â‰∏™Ôºå‰ª•Ê≠§Á±ªÊé®</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,</span><span class="nv">PAGE_DIR_TABLE_POS</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">eax</span><span class="p">,</span><span class="mh">0x2000</span>                                  <span class="c1">;Ê≠§Êó∂ÁöÑeaxË°®Á§∫Á¨¨‰∫åÂº†È°µË°®ÁöÑËµ∑ÂßãÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">or</span> <span class="nb">eax</span><span class="p">,</span><span class="nv">PG_US_U</span><span class="o">|</span><span class="nv">PG_RW_W</span><span class="o">|</span><span class="nv">PG_P</span>                     <span class="c1">;‰∏∫eaxË°®È°πÊ∑ªÂä†Â±ûÊÄß</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ebx</span><span class="p">,</span><span class="nv">PAGE_DIR_TABLE_POS</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ecx</span><span class="p">,</span><span class="mi">254</span>                                     <span class="c1">;Ë¶ÅËÆæÁΩÆ254‰∏™È°µË°®È°π</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">esi</span><span class="p">,</span><span class="mi">769</span>                                     <span class="c1">;‰ªéÁ¨¨769‰∏™È°µË°®È°πÂºÄÂßãËÆæÁΩÆ</span>
</span></span><span class="line"><span class="cl"><span class="nl">.create_kernel_pde:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nb">ebx</span><span class="o">+</span><span class="nb">esi</span><span class="o">*</span><span class="mi">4</span><span class="p">],</span><span class="nb">eax</span>                             <span class="c1">; ËÆæÁΩÆÈ°µÁõÆÂΩïË°®È°π</span>
</span></span><span class="line"><span class="cl">    <span class="nf">inc</span> <span class="nb">esi</span>                                         <span class="c1">; Â¢ûÂä†Ë¶ÅËÆæÁΩÆÁöÑÈ°µÁõÆÂΩïË°®È°πÁöÑÂÅèÁßª</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">eax</span><span class="p">,</span><span class="mh">0x1000</span>                                  <span class="c1">; eaxÊåáÂêë‰∏ã‰∏Ä‰∏™È°µË°®ÁöÑ‰ΩçÁΩÆÔºåÁî±‰∫é‰πãÂâçËÆæÂÆö‰∫ÜÂ±ûÊÄßÔºåÊâÄ‰ª•eaxÊòØ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÊåáÂêë‰∏ã‰∏Ä‰∏™È°µË°®ÁöÑÈ°µÁõÆÂΩïË°®È°π</span>
</span></span><span class="line"><span class="cl">    <span class="nf">loop</span> <span class="nv">.create_kernel_pde</span>                         <span class="c1">; Âæ™ÁéØËÆæÂÆö254‰∏™È°µÁõÆÂΩïË°®È°π</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ret</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">; ------ 32‰ΩçÊ®°Âºè‰∏ã‰ªéÁ£ÅÁõò‰∏≠Âä†ËΩΩÊñá‰ª∂Âà∞ÂÜÖÂ≠ò ------</span>
</span></span><span class="line"><span class="cl"><span class="nl">rd_disk_m_32:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;ÂèÇÊï∞Ôºö</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; eax=LBAÊâáÂå∫Âè∑</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; ebx=Â∞ÜÊï∞ÊçÆÂÜôÂÖ•ÁöÑÂÜÖÂ≠òÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; ecx=ËØªÂÖ•ÁöÑÊâáÂå∫Êï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">esi</span><span class="p">,</span><span class="nb">eax</span>	                                        <span class="c1">;Â§á‰ªΩeax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">di</span><span class="p">,</span><span class="nb">cx</span>		                                    <span class="c1">;Â§á‰ªΩcx</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;ËØªÂÜôÁ°¨Áõò:</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Á¨¨1Ê≠•ÔºöÈÄâÊã©ÁâπÂÆöÈÄöÈÅìÁöÑÂØÑÂ≠òÂô®ÔºåËÆæÁΩÆË¶ÅËØªÂèñÁöÑÊâáÂå∫Êï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f2</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">al</span><span class="p">,</span><span class="nb">cl</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>                                           <span class="c1">;ËØªÂèñÁöÑÊâáÂå∫Êï∞</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">esi</span>	                                        <span class="c1">;ÊÅ¢Â§çax</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Á¨¨2Ê≠•ÔºöÂú®ÁâπÂÆöÈÄöÈÅìÂØÑÂ≠òÂô®‰∏≠ÊîæÂÖ•Ë¶ÅËØªÂèñÊâáÂå∫ÁöÑÂú∞ÂùÄÔºåÂ∞ÜLBAÂú∞ÂùÄÂ≠òÂÖ•0x1f3 ~ 0x1f6</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;LBAÂú∞ÂùÄ7~0‰ΩçÂÜôÂÖ•Á´ØÂè£0x1f3</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f3</span>                       
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>                          
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;LBAÂú∞ÂùÄ15~8‰ΩçÂÜôÂÖ•Á´ØÂè£0x1f4</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">cl</span><span class="p">,</span><span class="mi">8</span>
</span></span><span class="line"><span class="cl">    <span class="nf">shr</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">cl</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f4</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;LBAÂú∞ÂùÄ23~16‰ΩçÂÜôÂÖ•Á´ØÂè£0x1f5</span>
</span></span><span class="line"><span class="cl">    <span class="nf">shr</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">cl</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f5</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nf">shr</span> <span class="nb">eax</span><span class="p">,</span><span class="nb">cl</span>
</span></span><span class="line"><span class="cl">    <span class="nf">and</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0x0f</span>	                                        <span class="c1">;lbaÁ¨¨24~27‰Ωç</span>
</span></span><span class="line"><span class="cl">    <span class="nf">or</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0xe0</span>	                                        <span class="c1">; ËÆæÁΩÆ7ÔΩû4‰Ωç‰∏∫1110,Ë°®Á§∫lbaÊ®°Âºè</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f6</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Á¨¨3Ê≠•ÔºöÂêë0x1f7Á´ØÂè£ÂÜôÂÖ•ËØªÂëΩ‰ª§Ôºå0x20 </span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span><span class="mh">0x1f7</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0x20</span>                        
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nb">dx</span><span class="p">,</span><span class="nb">al</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Á¨¨4Ê≠•ÔºöÊ£ÄÊµãÁ°¨ÁõòÁä∂ÊÄÅ</span>
</span></span><span class="line"><span class="cl"><span class="nl">.not_ready:</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Âêå‰∏ÄÁ´ØÂè£ÔºåÂÜôÊó∂Ë°®Á§∫ÂÜôÂÖ•ÂëΩ‰ª§Â≠óÔºåËØªÊó∂Ë°®Á§∫ËØªÂÖ•Á°¨ÁõòÁä∂ÊÄÅ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">nop</span>
</span></span><span class="line"><span class="cl">    <span class="nf">in</span> <span class="nb">al</span><span class="p">,</span><span class="nb">dx</span>
</span></span><span class="line"><span class="cl">    <span class="nf">and</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0x88</span>	                                        <span class="c1">;Á¨¨4‰Ωç‰∏∫1Ë°®Á§∫Á°¨ÁõòÊéßÂà∂Âô®Â∑≤ÂáÜÂ§áÂ•ΩÊï∞ÊçÆ‰º†ËæìÔºåÁ¨¨7‰Ωç‰∏∫1Ë°®Á§∫Á°¨ÁõòÂøô</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cmp</span> <span class="nb">al</span><span class="p">,</span><span class="mh">0x08</span>
</span></span><span class="line"><span class="cl">    <span class="nf">jnz</span> <span class="nv">.not_ready</span>	                                    <span class="c1">;Ëã•Êú™ÂáÜÂ§áÂ•ΩÔºåÁªßÁª≠Á≠â„ÄÇ</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">                                                        <span class="c1">;Á¨¨5Ê≠•Ôºö‰ªé0x1f0Á´ØÂè£ËØªÊï∞ÊçÆ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ax</span><span class="p">,</span> <span class="nb">di</span>                                          <span class="c1">;diÂΩì‰∏≠Â≠òÂÇ®ÁöÑÊòØË¶ÅËØªÂèñÁöÑÊâáÂå∫Êï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span> <span class="mi">256</span>                                         <span class="c1">;ÊØè‰∏™ÊâáÂå∫512Â≠óËäÇÔºå‰∏ÄÊ¨°ËØªÂèñ‰∏§‰∏™Â≠óËäÇÔºåÊâÄ‰ª•‰∏Ä‰∏™ÊâáÂå∫Â∞±Ë¶ÅËØªÂèñ256Ê¨°Ôºå‰∏éÊâáÂå∫Êï∞Áõ∏‰πòÔºåÂ∞±Á≠âÂæóÂà∞ÊÄªËØªÂèñÊ¨°Êï∞</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mul</span> <span class="nb">dx</span>                                              <span class="c1">;8‰Ωç‰πòÊ≥ï‰∏é16‰Ωç‰πòÊ≥ïÁü•ËØÜÊü•Áúã‰π¶p133,Ê≥®ÊÑèÔºö16‰Ωç‰πòÊ≥ï‰ºöÊîπÂèòdxÁöÑÂÄºÔºÅÔºÅÔºÅÔºÅ</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">cx</span><span class="p">,</span> <span class="nb">ax</span>	                                        <span class="c1">; ÂæóÂà∞‰∫ÜË¶ÅËØªÂèñÁöÑÊÄªÊ¨°Êï∞ÔºåÁÑ∂ÂêéÂ∞ÜËøô‰∏™Êï∞Â≠óÊîæÂÖ•cx‰∏≠</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">dx</span><span class="p">,</span> <span class="mh">0x1f0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.go_on_read:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">in</span> <span class="nb">ax</span><span class="p">,</span><span class="nb">dx</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nb">ebx</span><span class="p">],</span><span class="nb">ax</span>                                        <span class="c1">;‰∏érd_disk_m_16Áõ∏ÊØîÔºåÂ∞±ÊòØÊääËøô‰∏§Âè•ÁöÑbxÊîπÊàê‰∫Üebx</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">ebx</span><span class="p">,</span><span class="mi">2</span>		        
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; Áî±‰∫éÂú®ÂÆûÊ®°Âºè‰∏ãÂÅèÁßªÂú∞ÂùÄ‰∏∫16‰Ωç,ÊâÄ‰ª•Áî®bxÂè™‰ºöËÆøÈóÆÂà∞0~FFFFhÁöÑÂÅèÁßª„ÄÇ</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; loaderÁöÑÊ†àÊåáÈíà‰∏∫0x900,bx‰∏∫ÊåáÂêëÁöÑÊï∞ÊçÆËæìÂá∫ÁºìÂÜ≤Âå∫,‰∏î‰∏∫16‰ΩçÔºå</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; Ë∂ÖËøá0xffffÂêé,bxÈÉ®ÂàÜ‰ºö‰ªé0ÂºÄÂßã,ÊâÄ‰ª•ÂΩìË¶ÅËØªÂèñÁöÑÊâáÂå∫Êï∞ËøáÂ§ß,ÂæÖÂÜôÂÖ•ÁöÑÂú∞ÂùÄË∂ÖËøábxÁöÑËåÉÂõ¥Êó∂Ôºå</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ‰ªéÁ°¨Áõò‰∏äËØªÂá∫ÁöÑÊï∞ÊçÆ‰ºöÊää0x0000~0xffffÁöÑË¶ÜÁõñÔºå</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÈÄ†ÊàêÊ†àË¢´Á†¥Âùè,ÊâÄ‰ª•retËøîÂõûÊó∂,ËøîÂõûÂú∞ÂùÄË¢´Á†¥Âùè‰∫Ü,Â∑≤Áªè‰∏çÊòØ‰πãÂâçÊ≠£Á°ÆÁöÑÂú∞ÂùÄ,</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÊïÖÁ®ãÂ∫èÂá∫‰ºöÈîô,‰∏çÁü•ÈÅì‰ºöË∑ëÂà∞Âì™ÈáåÂéª„ÄÇ</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÊâÄ‰ª•Êîπ‰∏∫ebx‰ª£ÊõøbxÊåáÂêëÁºìÂÜ≤Âå∫,ËøôÊ†∑ÁîüÊàêÁöÑÊú∫Âô®Á†ÅÂâçÈù¢‰ºöÊúâ0x66Âíå0x67Êù•ÂèçËΩ¨„ÄÇ</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; 0X66Áî®‰∫éÂèçËΩ¨ÈªòËÆ§ÁöÑÊìç‰ΩúÊï∞Â§ßÂ∞è! 0X67Áî®‰∫éÂèçËΩ¨ÈªòËÆ§ÁöÑÂØªÂùÄÊñπÂºè.</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; cpuÂ§Ñ‰∫é16‰ΩçÊ®°ÂºèÊó∂,‰ºöÁêÜÊâÄÂΩìÁÑ∂ÁöÑËÆ§‰∏∫Êìç‰ΩúÊï∞ÂíåÂØªÂùÄÈÉΩÊòØ16‰Ωç,Â§Ñ‰∫é32‰ΩçÊ®°ÂºèÊó∂,</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ‰πü‰ºöËÆ§‰∏∫Ë¶ÅÊâßË°åÁöÑÊåá‰ª§ÊòØ32‰Ωç.</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÂΩìÊàë‰ª¨Âú®ÂÖ∂‰∏≠‰ªªÊÑèÊ®°Âºè‰∏ãÁî®‰∫ÜÂè¶Â§ñÊ®°ÂºèÁöÑÂØªÂùÄÊñπÂºèÊàñÊìç‰ΩúÊï∞Â§ßÂ∞è(Âßë‰∏îËÆ§‰∏∫16‰ΩçÊ®°ÂºèÁî®16‰ΩçÂ≠óËäÇÊìç‰ΩúÊï∞Ôºå</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; 32‰ΩçÊ®°Âºè‰∏ãÁî®32Â≠óËäÇÁöÑÊìç‰ΩúÊï∞)Êó∂,ÁºñËØëÂô®‰ºöÂú®Êåá‰ª§ÂâçÂ∏ÆÊàë‰ª¨Âä†‰∏ä0x66Êàñ0x67Ôºå</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ‰∏¥Êó∂ÊîπÂèòÂΩìÂâçcpuÊ®°ÂºèÂà∞Âè¶Â§ñÁöÑÊ®°Âºè‰∏ã.</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÂÅáËÆæÂΩìÂâçËøêË°åÂú®16‰ΩçÊ®°Âºè,ÈÅáÂà∞0X66Êó∂,Êìç‰ΩúÊï∞Â§ßÂ∞èÂèò‰∏∫32‰Ωç.</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÂÅáËÆæÂΩìÂâçËøêË°åÂú®32‰ΩçÊ®°Âºè,ÈÅáÂà∞0X66Êó∂,Êìç‰ΩúÊï∞Â§ßÂ∞èÂèò‰∏∫16‰Ωç.</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÂÅáËÆæÂΩìÂâçËøêË°åÂú®16‰ΩçÊ®°Âºè,ÈÅáÂà∞0X67Êó∂,ÂØªÂùÄÊñπÂºèÂèò‰∏∫32‰ΩçÂØªÂùÄ</span>
</span></span><span class="line"><span class="cl">                                                        <span class="c1">; ÂÅáËÆæÂΩìÂâçËøêË°åÂú®32‰ΩçÊ®°Âºè,ÈÅáÂà∞0X67Êó∂,ÂØªÂùÄÊñπÂºèÂèò‰∏∫16‰ΩçÂØªÂùÄ.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">loop</span> <span class="nv">.go_on_read</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ret</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÁºñËØëËøêË°å">ÁºñËØëËøêË°å
</h3><p>/start.sh</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># ËÆæÁΩÆÂ∑•‰ΩúÁõÆÂΩïÂíåÂ∑•ÂÖ∑</span>
</span></span><span class="line"><span class="cl"><span class="nv">BIN_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/bin
</span></span><span class="line"><span class="cl"><span class="nv">BOOT_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/boot
</span></span><span class="line"><span class="cl"><span class="nv">BOOT_INCLUDE_DIR</span><span class="o">=</span><span class="nv">$BOOT_DIR</span>/include/
</span></span><span class="line"><span class="cl"><span class="nv">KERNEL_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/lib/kernel
</span></span><span class="line"><span class="cl"><span class="nv">IMG</span><span class="o">=</span>/home/minios/bochs/hd60M.img
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">NASM</span><span class="o">=</span>nasm
</span></span><span class="line"><span class="cl"><span class="nv">GCC</span><span class="o">=</span>gcc-4.4
</span></span><span class="line"><span class="cl"><span class="nv">LD</span><span class="o">=</span>ld
</span></span><span class="line"><span class="cl"><span class="nv">DD</span><span class="o">=</span>dd
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÁõÆÊ†áÊñá‰ª∂</span>
</span></span><span class="line"><span class="cl"><span class="nv">MBR_SRC</span><span class="o">=</span><span class="nv">$BOOT_DIR</span>/mbr.S
</span></span><span class="line"><span class="cl"><span class="nv">LOADER_SRC</span><span class="o">=</span><span class="nv">$BOOT_DIR</span>/loader.S
</span></span><span class="line"><span class="cl"><span class="nv">KERNEL_SRC</span><span class="o">=</span><span class="nv">$KERNEL_DIR</span>/main.c
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">MBR_BIN</span><span class="o">=</span><span class="nv">$BIN_DIR</span>/mbr.bin
</span></span><span class="line"><span class="cl"><span class="nv">LOADER_BIN</span><span class="o">=</span><span class="nv">$BIN_DIR</span>/loader.bin
</span></span><span class="line"><span class="cl"><span class="nv">KERNEL_OBJ</span><span class="o">=</span><span class="nv">$BIN_DIR</span>/main.o
</span></span><span class="line"><span class="cl"><span class="nv">KERNEL_BIN</span><span class="o">=</span><span class="nv">$BIN_DIR</span>/kernel.bin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂàõÂª∫ÁõÆÂΩï</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ÂàõÂª∫ÁõÆÊ†áÁõÆÂΩï...&#34;</span>
</span></span><span class="line"><span class="cl">mkdir -p <span class="nv">$BIN_DIR</span>
</span></span><span class="line"><span class="cl">mkdir -p <span class="nv">$BOOT_DIR</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÁºñËØë MBR</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ÁºñËØë MBR...&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$NASM</span> -I <span class="nv">$BOOT_INCLUDE_DIR</span> <span class="nv">$MBR_SRC</span> -o <span class="nv">$MBR_BIN</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÁºñËØë Loader</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ÁºñËØë Loader...&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$NASM</span> -I <span class="nv">$BOOT_INCLUDE_DIR</span> <span class="nv">$LOADER_SRC</span> -o <span class="nv">$LOADER_BIN</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÁºñËØëÂÜÖÊ†∏</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ÁºñËØëÂÜÖÊ†∏...&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$GCC</span> <span class="nv">$KERNEL_SRC</span> -c -m32 -o <span class="nv">$KERNEL_OBJ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÈìæÊé•ÂÜÖÊ†∏</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ÈìæÊé•ÂÜÖÊ†∏...&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$LD</span> -m elf_i386 -Ttext 0x00001500 -e main -o <span class="nv">$KERNEL_BIN</span> <span class="nv">$KERNEL_OBJ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂàõÂª∫ÂêØÂä®ÈïúÂÉè</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ÂàõÂª∫ÂêØÂä®ÈïúÂÉè...&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$DD</span> <span class="k">if</span><span class="o">=</span><span class="nv">$MBR_BIN</span> <span class="nv">of</span><span class="o">=</span><span class="nv">$IMG</span> <span class="nv">bs</span><span class="o">=</span><span class="m">512</span> <span class="nv">count</span><span class="o">=</span><span class="m">1</span> <span class="nv">conv</span><span class="o">=</span>notrunc
</span></span><span class="line"><span class="cl"><span class="nv">$DD</span> <span class="k">if</span><span class="o">=</span><span class="nv">$LOADER_BIN</span> <span class="nv">of</span><span class="o">=</span><span class="nv">$IMG</span> <span class="nv">bs</span><span class="o">=</span><span class="m">512</span> <span class="nv">count</span><span class="o">=</span><span class="m">4</span> <span class="nv">seek</span><span class="o">=</span><span class="m">2</span> <span class="nv">conv</span><span class="o">=</span>notrunc
</span></span><span class="line"><span class="cl"><span class="nv">$DD</span> <span class="k">if</span><span class="o">=</span><span class="nv">$KERNEL_BIN</span> <span class="nv">of</span><span class="o">=</span><span class="nv">$IMG</span> <span class="nv">bs</span><span class="o">=</span><span class="m">512</span> <span class="nv">count</span><span class="o">=</span><span class="m">200</span> <span class="nv">seek</span><span class="o">=</span><span class="m">9</span> <span class="nv">conv</span><span class="o">=</span>notrunc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂÆåÊàê</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ÊûÑÂª∫ÂÆåÊàêÔºÅÈïúÂÉèÊñá‰ª∂Â∑≤ÂàõÂª∫Ôºö</span><span class="nv">$IMG</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÈÄÄÂá∫ËÑöÊú¨</span>
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    

    
    
</footer>

    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0%E4%B8%80-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/">
        
        
            <div class="article-image">
                
                    <img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2025/01/upgit_20250108_1736322215.jpg" loading="lazy" data-key="" data-hash="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2025/01/upgit_20250108_1736322215.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">„ÄäÊìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü„ÄãÁ¨¨ÂçÅ‰∫åÁ´†Ôºà‰∏ÄÔºâ ‚Äî‚Äî Á≥ªÁªüË∞ÉÁî®</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0%E4%BA%8C-%E5%AE%8C%E5%96%84%E5%A0%86%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">
        
        
            <div class="article-image">
                
                    <img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2025/01/upgit_20250108_1736322476.jpg" loading="lazy" data-key="" data-hash="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2025/01/upgit_20250108_1736322476.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">„ÄäÊìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü„ÄãÁ¨¨ÂçÅ‰∫åÁ´†Ôºà‰∫åÔºâ ‚Äî‚Äî ÂÆåÂñÑÂ†ÜÂÜÖÂ≠òÁÆ°ÁêÜ</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%BF%9B%E7%A8%8B/">
        
        
            <div class="article-image">
                
                    <img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2025/01/upgit_20250105_1736061136.jpg" loading="lazy" data-key="" data-hash="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2025/01/upgit_20250105_1736061136.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">„ÄäÊìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü„ÄãÁ¨¨ÂçÅ‰∏ÄÁ´† ‚Äî‚Äî ÂàõÂª∫Áî®Êà∑ËøõÁ®ã</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F%E7%AC%AC%E5%8D%81%E7%AB%A0%E4%BA%8C-%E9%94%AE%E7%9B%98%E9%A9%B1%E5%8A%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%BC%96%E5%86%99%E4%B8%8E%E8%BE%93%E5%85%A5%E7%B3%BB%E7%BB%9F/">
        
        
            <div class="article-image">
                
                    <img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241227_1735287198.jpg" loading="lazy" data-key="" data-hash="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241227_1735287198.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">„ÄäÊìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü„ÄãÁ¨¨ÂçÅÁ´†Ôºà‰∫åÔºâ ‚Äî‚Äî ÈîÆÁõòÈ©±Âä®Á®ãÂ∫èÁöÑÁºñÂÜô‰∏éËæìÂÖ•Á≥ªÁªü</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9C%9F%E8%B1%A1%E8%BF%98%E5%8E%9F%E7%AC%AC%E5%8D%81%E7%AB%A0%E4%B8%80-%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6%E4%B9%8B%E4%BA%92%E6%96%A5%E9%94%81%E5%AE%9E%E7%8E%B0%E4%B8%8E%E8%BE%93%E5%87%BA%E7%B3%BB%E7%BB%9F/">
        
        
            <div class="article-image">
                
                    <img src="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241223_1734950685.jpg" loading="lazy" data-key="" data-hash="https://raw.githubusercontent.com/jl-sky/imageDatesets/master/2024/12/upgit_20241223_1734950685.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">„ÄäÊìç‰ΩúÁ≥ªÁªüÁúüË±°ËøòÂéü„ÄãÁ¨¨ÂçÅÁ´†Ôºà‰∏ÄÔºâ ‚Äî‚Äî ÂêåÊ≠•Êú∫Âà∂‰πã‰∫íÊñ•ÈîÅÂÆûÁé∞‰∏éËæìÂá∫Á≥ªÁªü</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet'/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
        --waline-font-size: var(--article-font-size);
    }
    .waline-container .wl-count {
        color: var(--card-text-color-main);
    }
</style><script>
    
    Waline.init({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://npm.elemecdn.com/@waline/emojis@1.1.0/bilibili","https://npm.elemecdn.com/@waline/emojis@1.1.0/bmoji","https://npm.elemecdn.com/@waline/emojis@1.1.0/weibo"],"lang":"zh-CN","locale":{"admin":"‰Ω†Â•Ω","placeholder":null,"sofa":"ËøòÊ≤°Êúâ‰∫∫ËØÑËÆ∫Âì¶ÔºÅÂø´Êù•Êä¢Ê≤ôÂèëÂêß~"},"placeholder":"Ê¨¢ËøéÁïô‰∏ãÂÆùË¥µÁöÑËØÑËÆ∫ÔºÅ","requiredMeta":["name","email","url"],"serverURL":"https://blogcomment-iqp14djt5-jl-skys-projects.vercel.app/","visitor":false});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy;
        
        2024 -
        
        2025 JL-sky
    </section>

    
    <section class="running-time">
        ÁΩëÁ´ôÂ∑≤ËøêË°å
        <span id="runningdays" class="running-days"></span>
    </section>

    
    <section class="totalcount">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        ÂèëË°®‰∫Ü20ÁØáÊñáÁ´† ¬∑
        ÊÄªËÆ°
        132,182Â≠ó
        
    </section>

    
</footer>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

        </main>
    </div>
    <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.dde1bc60c191a36f391af9ea35dd08be3c74bca8ca0cd8ff6a663c09a0256be0.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

<script>
    let s1 = '2024-11-24'; 
    s1 = new Date(s1.replace(/-/g, "/"));
    let s2 = new Date();
    let timeDifference = s2.getTime() - s1.getTime();

    let days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
    let hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    let minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));

    let result = days + "Â§©" + hours + "Â∞èÊó∂" + minutes + "ÂàÜÈíü";
    document.getElementById('runningdays').innerHTML = result;
</script>

<div id="particles-js"></div>

<script src=http://localhost:1313/background/particles.min.js></script>
<script>
    particlesJS.load('particles-js', resources.Get("background/package.json").Permalink, function () {
        console.log('particles.js loaded - callback');
    });
</script>

<style>
    #particles-js {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: -1;
    }
</style>
</body>

</html>